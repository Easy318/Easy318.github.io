<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Superli&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://ojerk.cn/"/>
  <updated>2019-12-05T13:50:47.490Z</updated>
  <id>https://ojerk.cn/</id>
  
  <author>
    <name>李超</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SQLAlchemy不完全指北</title>
    <link href="https://ojerk.cn/SQLAlchemy/"/>
    <id>https://ojerk.cn/SQLAlchemy/</id>
    <published>2019-09-24T07:30:48.000Z</published>
    <updated>2019-12-05T13:50:47.490Z</updated>
    
    <content type="html"><![CDATA[<h2 id="阅读前的准备"><a href="#阅读前的准备" class="headerlink" title="阅读前的准备"></a>阅读前的准备</h2><blockquote><p>在开始前,请确保你已经做好以下准备</p></blockquote><ul><li>请确保你的Python版本是3.6以上</li><li>已安装完Mysql-server,如果还没有安装,可以参考<a href="https://ojerk.cn/MysqlServer%E5%90%84%E5%B9%B3%E5%8F%B0%E4%B8%8B%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/">MysqlServer各平台下的安装及使用</a></li></ul><h2 id="SQLALchemy安装及使用"><a href="#SQLALchemy安装及使用" class="headerlink" title="SQLALchemy安装及使用"></a>SQLALchemy安装及使用</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install SQLAlchemy</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p><strong>直接上一个增删改查的栗子:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine, Column, Integer, String</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库配置</span></span><br><span class="line">HOSTNAME = <span class="string">'127.0.0.1'</span></span><br><span class="line">PORT = <span class="string">'3306'</span></span><br><span class="line">DATABASE = <span class="string">'first_sqlalchemy'</span></span><br><span class="line">USERNAME = <span class="string">'root'</span></span><br><span class="line">PASSWORD = <span class="string">'root'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># dialect+driver://username:password@host:port/database</span></span><br><span class="line">DB_URI = <span class="string">f"mysql+pymysql://<span class="subst">&#123;USERNAME&#125;</span>:<span class="subst">&#123;PASSWORD&#125;</span>@<span class="subst">&#123;HOSTNAME&#125;</span>:<span class="subst">&#123;PORT&#125;</span>/<span class="subst">&#123;DATABASE&#125;</span>?charset=utf8mb4"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建链接引擎</span></span><br><span class="line">engine = create_engine(DB_URI)</span><br><span class="line"><span class="comment"># 利用引擎来创建一个ORM基类</span></span><br><span class="line">Base = declarative_base(engine)</span><br><span class="line"><span class="comment"># 利用session对象进行数据的增删改查</span></span><br><span class="line">session = sessionmaker(engine)()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用这个Base类作为基类来写自己的ORM类。要定义__tablename__类属性，来指定这个模型映射到数据库中的表名</span></span><br><span class="line"><span class="comment"># 在这个ORM模型中创建一些属性，来跟表中的字段进行一一映射。这些属性必须是sqlalchemy给我们提供好的数据类型。</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'person'</span></span><br><span class="line">    id = Column(Integer, primary_key=<span class="keyword">True</span>, autoincrement=<span class="keyword">True</span>)</span><br><span class="line">    name = Column(String(<span class="number">50</span>))</span><br><span class="line">    age = Column(Integer)</span><br><span class="line">    country = Column(String(<span class="number">50</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 方便打印对象时,查看数据</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f"&lt;Person(name:<span class="subst">&#123;self.name&#125;</span>, age:<span class="subst">&#123;self.age&#125;</span>, country:<span class="subst">&#123;self.country&#125;</span>)&gt;"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用Base.metadata.create_all()来将模型映射到数据库中</span></span><br><span class="line"><span class="comment"># 注意: 一旦使用Base.metadata.create_all()将模型映射到数据库中后，即使改变了模型的字段，也不会重新映射了</span></span><br><span class="line"><span class="comment"># 为了方便测试,可以调用Base.metadata.drop_all(),清除由Base创建的表</span></span><br><span class="line"><span class="comment"># Base.metadata.drop_all()</span></span><br><span class="line"></span><br><span class="line">Base.metadata.create_all()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加数据</span></span><br><span class="line"><span class="comment"># 方法一(单个添加)</span></span><br><span class="line">p = Person(name=<span class="string">'张三'</span>, age=<span class="number">18</span>, country=<span class="string">'china'</span>)</span><br><span class="line">session.add(p)</span><br><span class="line">session.commit()</span><br><span class="line"><span class="comment"># 方法二(一次性添加多个)</span></span><br><span class="line">p1 = Person(name=<span class="string">'李四'</span>,age=<span class="number">19</span>,country=<span class="string">'china'</span>)</span><br><span class="line">p2 = Person(name=<span class="string">'王五'</span>,age=<span class="number">20</span>,country=<span class="string">'china'</span>)</span><br><span class="line">session.add_all([p1,p2])</span><br><span class="line">session.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看数据</span></span><br><span class="line"><span class="comment"># 查找某个模型对应的那个表中所有的数据：</span></span><br><span class="line">all_person = session.query(Person).all()</span><br><span class="line"><span class="comment"># 使用filter_by来做条件查询</span></span><br><span class="line">all_person = session.query(Person).filter_by(name=<span class="string">'张三'</span>).all()</span><br><span class="line"><span class="comment"># 使用filter来做条件查询</span></span><br><span class="line">all_person = session.query(Person).filter(Person.name==<span class="string">'张三'</span>).all()</span><br><span class="line"><span class="comment"># 使用get方法查找数据，get方法是根据id来查找的，只会返回一条数据或者None</span></span><br><span class="line">person = session.query(Person).get(primary_key)</span><br><span class="line"><span class="comment"># 使用first方法获取结果集中的第一条数据</span></span><br><span class="line">person = session.query(Person).first()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改数据</span></span><br><span class="line">person = session.query(Person).first()</span><br><span class="line">person.name = <span class="string">'王麻子'</span></span><br><span class="line">session.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除数据</span></span><br><span class="line">person = session.query(Person).first()</span><br><span class="line">session.delete(person)</span><br><span class="line">session.commit()</span><br></pre></td></tr></table></figure><p><strong>常用数据类型:</strong></p><table><thead><tr><th>python类型</th><th>映射到数据库的对应类型</th><th>说明</th></tr></thead><tbody><tr><td>Integer</td><td>int</td><td>整型</td></tr><tr><td>Float</td><td>float</td><td>浮点类型(占32位)</td></tr><tr><td>Double</td><td>double</td><td>双精度浮点类型(占64位)</td></tr><tr><td>String</td><td>varchar</td><td>可变字符类型</td></tr><tr><td>Boolean</td><td>tinyint</td><td>布尔类型</td></tr><tr><td>DECIMAL</td><td>decimal</td><td>定点类型</td></tr><tr><td>Enum</td><td>enum</td><td>枚举类型</td></tr><tr><td>Date</td><td>datetime</td><td>时间类型，只能存储年月日</td></tr><tr><td>DateTime</td><td>datetime</td><td>时间类型，可以存储年月日时分秒毫秒等</td></tr><tr><td>Time</td><td>datetime</td><td>时间类型，只能存储时分秒</td></tr><tr><td>Text</td><td>text</td><td>存储长字符串(大概6w多字符)</td></tr><tr><td>LONGTEXT</td><td>longtext</td><td>长文本类型</td></tr></tbody></table><p>补充:</p><ul><li>DECIMAL(arg1,arg2) 传两个参数,arg1代表该字段一共存储多少位数字,arg2代表小数点后保留多少位(四舍五入)</li><li><a href="https://ojerk.cn/Enum/">Eunm</a>可以直接用Python3自带的枚举类来进行传递,示例代码如下:</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 不使用自带的enum</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'article'</span></span><br><span class="line">    id = Column(Integer,primary_key=<span class="keyword">True</span>,autoincrement=<span class="keyword">True</span>)</span><br><span class="line">    tag = Column(Enum(<span class="string">"python"</span>,<span class="string">'flask'</span>,<span class="string">'django'</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</span><br><span class="line">Tag = Enum(<span class="string">'Tag'</span>, <span class="string">'python flask django'</span>)</span><br><span class="line"><span class="comment"># 使用自带的enum</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'article'</span></span><br><span class="line">    id = Column(Integer,primary_key=<span class="keyword">True</span>,autoincrement=<span class="keyword">True</span>)</span><br><span class="line">    tag = Column(Enum(Tag))</span><br><span class="line"></span><br><span class="line">article = Article(tag=Tag.flask)</span><br></pre></td></tr></table></figure><ul><li>关于映射到数据库里的datetime类型,可以借助Python里datetime模块来实现,示例代码如下</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Date, DateTime, Time</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, date, time</span><br><span class="line"></span><br><span class="line"><span class="comment"># Date</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'article'</span></span><br><span class="line">    id = Column(Integer,primary_key=<span class="keyword">True</span>,autoincrement=<span class="keyword">True</span>)</span><br><span class="line">    create_time = Column(Date)</span><br><span class="line"></span><br><span class="line">article = Article(create_time=date(<span class="number">2017</span>,<span class="number">10</span>,<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># DateTime</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'article'</span></span><br><span class="line">    id = Column(Integer,primary_key=<span class="keyword">True</span>,autoincrement=<span class="keyword">True</span>)</span><br><span class="line">    create_time = Column(DateTime)</span><br><span class="line"></span><br><span class="line">article = Article(create_time=datetime(<span class="number">2011</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">11</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Time</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'article'</span></span><br><span class="line">    id = Column(Integer,primary_key=<span class="keyword">True</span>,autoincrement=<span class="keyword">True</span>)</span><br><span class="line">    create_time = Column(Time)</span><br><span class="line"></span><br><span class="line">article = Article(create_time=time(hour=<span class="number">11</span>,minute=<span class="number">11</span>,second=<span class="number">11</span>))</span><br></pre></td></tr></table></figure><p><strong>Column常用参数:</strong></p><ul><li>primary_key：设置字段为主键</li><li>autoincrement：设置字段为自增长的</li><li>default：设置字段的默认值,常用于发表时间这些字段上</li><li>nullable：指定某个字段是否可以为空,默认值是True</li><li>unique：指定某个字段的值是否唯一,默认是False</li><li>onupdate：在数据更新的时候会调用这个参数指定的值或者函数<ul><li>注意</li><li>在第一次插入这条数据的时候，不会用onupdate的值，只会使用default的值</li><li>常用于每次更新数据的时候都要更新字段,比如update_time</li></ul></li><li>name：指定ORM模型中某个属性映射到表中的字段名<ul><li>注意</li><li>如果不指定，那么会使用这个属性的名字来作为字段名</li><li>如果指定了，就会使用指定的这个值作为参数</li><li>这个参数也可以当作位置参数，在第1个参数来指定, 请见下面示例代码</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关键字参数指定</span></span><br><span class="line">title = Column(String(<span class="number">50</span>),name=<span class="string">'my_title'</span>,nullable=<span class="keyword">False</span>)</span><br><span class="line"><span class="comment"># 位置参数指定</span></span><br><span class="line">title = Column(<span class="string">'my_title'</span>,String(<span class="number">50</span>),nullable=<span class="keyword">False</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;阅读前的准备&quot;&gt;&lt;a href=&quot;#阅读前的准备&quot; class=&quot;headerlink&quot; title=&quot;阅读前的准备&quot;&gt;&lt;/a&gt;阅读前的准备&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;在开始前,请确保你已经做好以下准备&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;

      
    
    </summary>
    
      <category term="SQLAlchemy" scheme="https://ojerk.cn/categories/SQLAlchemy/"/>
    
    
      <category term="SQLAlchemy" scheme="https://ojerk.cn/tags/SQLAlchemy/"/>
    
  </entry>
  
  <entry>
    <title>MysqlServer各平台下的安装及使用</title>
    <link href="https://ojerk.cn/MysqlServer%E5%90%84%E5%B9%B3%E5%8F%B0%E4%B8%8B%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/"/>
    <id>https://ojerk.cn/MysqlServer各平台下的安装及使用/</id>
    <published>2019-09-24T06:35:17.000Z</published>
    <updated>2019-09-24T07:53:48.023Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Linux下MysqlServer的安装及使用"><a href="#Linux下MysqlServer的安装及使用" class="headerlink" title="Linux下MysqlServer的安装及使用"></a>Linux下MysqlServer的安装及使用</h2><p>本次教程针对以下版本的linux系统,其他版本的请自行测试</p><ul><li>Debian 8 and 9</li><li>Ubuntu 16.04, 18.04, and 18.10</li></ul><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><strong>第一步:</strong></p><p><a href="https://dev.mysql.com/downloads/repo/apt/" target="_blank" rel="noopener">猛击这里</a>,下载MySQL APT repository</p><p><strong>第二步:</strong></p><p>使用以下命令安装第一步下载的发行包<br>在安装包的过程中，将要求您选择MySQL服务器和其他组件的版本,我们只选择第一个服务就好了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i /PATH/version-specific-package-name.deb</span><br></pre></td></tr></table></figure><p><strong>第三步:</strong><br>更新包信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><p><strong>第四步:</strong></p><p>安装MysqlServer(这时就会根据刚才的配置,自动下载你配置好的mysqlserver)<br>过程中需要配置root的密码<br>加密那部分为了保证兼容性选第二个就可以(兼容5.x版本)<br>安装完成以后服务会自动启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p><strong>查看server状态:</strong></p><p>可以以此来判断mysql是否安装成功</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql status</span><br></pre></td></tr></table></figure><p><strong>关闭服务:</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql stop</span><br></pre></td></tr></table></figure><p><strong>重启服务:</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql start</span><br></pre></td></tr></table></figure><h3 id="配置远程访问"><a href="#配置远程访问" class="headerlink" title="配置远程访问"></a>配置远程访问</h3><p>默认刚装完的mysql服务是不提供远程连接的权限的,需要更改一下在mysql数据库里user表里host项的配置信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p&lt;password&gt;</span><br><span class="line">use mysql;</span><br><span class="line">update user set host = '%' where user = 'root';</span><br><span class="line">flush privileges;</span><br><span class="line">quit;</span><br></pre></td></tr></table></figure><p>这时候可以用Python编写一个脚本测试一下:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库的配置变量</span></span><br><span class="line">HOSTNAME = <span class="string">'xxx'</span></span><br><span class="line">PORT = <span class="string">'3306'</span></span><br><span class="line">DATABASE = <span class="string">'xxx'</span></span><br><span class="line">USERNAME = <span class="string">'root'</span></span><br><span class="line">PASSWORD = <span class="string">'xxx'</span></span><br><span class="line">DB_URI = <span class="string">'mysql+pymysql://&#123;&#125;:&#123;&#125;@&#123;&#125;:&#123;&#125;/&#123;&#125;'</span>.format(</span><br><span class="line">    USERNAME, PASSWORD, HOSTNAME, PORT, DATABASE)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据库引擎</span></span><br><span class="line">engine = create_engine(DB_URI)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建连接</span></span><br><span class="line"><span class="keyword">with</span> engine.connect() <span class="keyword">as</span> con:</span><br><span class="line">    rs = con.execute(<span class="string">'SELECT 1'</span>)</span><br><span class="line">    print(rs.fetchone())</span><br></pre></td></tr></table></figure><p>如果输出: (1,),则说明配置成功</p><h2 id="Windows下MysqlServer的安装及使用"><a href="#Windows下MysqlServer的安装及使用" class="headerlink" title="Windows下MysqlServer的安装及使用"></a>Windows下MysqlServer的安装及使用</h2><blockquote><p>待更新</p></blockquote><h2 id="Mac下MysqlServer的安装及使用"><a href="#Mac下MysqlServer的安装及使用" class="headerlink" title="Mac下MysqlServer的安装及使用"></a>Mac下MysqlServer的安装及使用</h2><blockquote><p>待更新</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Linux下MysqlServer的安装及使用&quot;&gt;&lt;a href=&quot;#Linux下MysqlServer的安装及使用&quot; class=&quot;headerlink&quot; title=&quot;Linux下MysqlServer的安装及使用&quot;&gt;&lt;/a&gt;Linux下MysqlServer
      
    
    </summary>
    
      <category term="Mysql" scheme="https://ojerk.cn/categories/Mysql/"/>
    
    
      <category term="Mysql" scheme="https://ojerk.cn/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>Python标准库之Enum(枚举)</title>
    <link href="https://ojerk.cn/Enum/"/>
    <id>https://ojerk.cn/Enum/</id>
    <published>2019-09-24T06:17:12.000Z</published>
    <updated>2019-11-30T11:03:49.622Z</updated>
    
    <content type="html"><![CDATA[<h2 id="快速上手指北"><a href="#快速上手指北" class="headerlink" title="快速上手指北"></a>快速上手指北</h2><p><strong>枚举的创建:</strong></p><ul><li>枚举名(name)不能重复,但是值(value)可以重复</li><li>如果需要创建值也不允许重复的枚举类,请使用@enum.unique装饰器</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum, unique</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法一</span></span><br><span class="line"><span class="comment"># 使用了自动值,从1开始计数</span></span><br><span class="line"></span><br><span class="line">Color = Enum(<span class="string">'Color'</span>, <span class="string">'RED GREEN BLUE'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span><span class="params">(Enum)</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line">    RED = 1</span><br><span class="line">    GREEN = <span class="number">2</span></span><br><span class="line">    BLUE = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@unique</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span><span class="params">(Enum)</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line">    RED = 1</span><br><span class="line">    GREEN =<span class="number">2</span></span><br><span class="line">    BLUE = <span class="number">3</span></span><br></pre></td></tr></table></figure><p><strong>枚举的访问:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法一</span></span><br><span class="line">member = Color.RED</span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line">member = Color[<span class="string">'RED'</span>]</span><br><span class="line"><span class="comment"># 方法三</span></span><br><span class="line">member = Color(<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>说明:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 1. 可读性极强的打印信息</span></span><br><span class="line">print(member)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Color.RED</span><br><span class="line">print(repr(member))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;Color.RED: <span class="number">1</span>&gt;</span><br><span class="line"><span class="comment"># 2. 枚举成员的类型是它所属的枚举：</span></span><br><span class="line">type(Color.RED)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;enum <span class="string">'Color'</span>&gt;</span><br><span class="line">isinstance(Color.GREEN, Color)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">True</span></span><br></pre></td></tr></table></figure><p><strong>枚举的属性:</strong></p><ul><li>只读,不能修改</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 属性name,枚举名</span></span><br><span class="line">member.name</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'RED'</span></span><br><span class="line"><span class="comment"># 数据value,枚举值</span></span><br><span class="line">member.value</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>枚举的循环(迭代):</strong></p><ul><li>按照顺序迭代</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 方法一</span></span><br><span class="line"><span class="keyword">for</span> color <span class="keyword">in</span> Color:</span><br><span class="line">    print(color)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Color.RED</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Color.GREEN</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Color.BLUE</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line"><span class="keyword">for</span> name, member <span class="keyword">in</span> Color.__members__.items():</span><br><span class="line">    print(name, member)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>RED Color.RED</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>RED Color.GREEN</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>RED Color.BLUE</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法三</span></span><br><span class="line">list(Color)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[&lt;Color.RED: <span class="number">1</span>&gt;, &lt;Color.GREEN: <span class="number">2</span>&gt;, &lt;Color.BLUE: <span class="number">3</span>&gt;]</span><br></pre></td></tr></table></figure><p><strong>枚举的比较:</strong></p><ul><li>不支持有序比较,比如大于小于</li><li>支持平等比较 == , !=</li><li>与非枚举值的比较总是不相等(即使是Enum类的变体IntEnum,也不行)</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Color.RED <span class="keyword">is</span> Color.RED</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">True</span></span><br><span class="line">Color.RED <span class="keyword">is</span> <span class="keyword">not</span> Color.BLUE</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">True</span></span><br><span class="line">Color.RED <span class="keyword">is</span> Color.BLUE</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">False</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;快速上手指北&quot;&gt;&lt;a href=&quot;#快速上手指北&quot; class=&quot;headerlink&quot; title=&quot;快速上手指北&quot;&gt;&lt;/a&gt;快速上手指北&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;枚举的创建:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;枚举名(name)不能重复,但是值
      
    
    </summary>
    
      <category term="Python" scheme="https://ojerk.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://ojerk.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu下MongoDB的安装及使用</title>
    <link href="https://ojerk.cn/Ubuntu%E4%B8%8BMongoDB%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/"/>
    <id>https://ojerk.cn/Ubuntu下MongoDB的安装及使用/</id>
    <published>2019-04-08T00:47:02.000Z</published>
    <updated>2019-12-05T13:51:23.599Z</updated>
    
    <content type="html"><![CDATA[<h1 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h1><blockquote><p>本文将介绍MongoDB在Ubuntu_16.04下的安装、启动、关闭、配置、卸载<br>以及基于Mongo Shell的MongoDB快速入门</p></blockquote><h2 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h2><p><strong>第一步:</strong></p><p>我们将使用乌班图上的包管理器安装 <strong>MongoDB 4.0 Community Edition</strong><br>目前Mongo只为以下三个版本提供了包安装的支持:</p><ul><li>14.04 LTS (trusty)</li><li>16.04 LTS (xenial)</li><li>18.04 LTS (bionic)</li></ul><p>Ubuntu版本查看</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsb_release -dc</span><br></pre></td></tr></table></figure><p>注意: WINDOWS SUBSYSTEM FOR LINUX (WSL) - UNSUPPORTED!</p><p><strong>第二步:</strong></p><p>glibc包至少升级到glibc 2.23</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> glibc版本查看</span><br><span class="line">getconf GNU_LIBC_VERSION</span><br><span class="line"><span class="meta">#</span> glibc升级</span><br><span class="line">apt-get upgrade glibc</span><br></pre></td></tr></table></figure><p><strong>第三步:</strong></p><p>卸载Ubuntu之前自带的MongoDB,以获得更好的维护和支持</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 查看之前MongoDB的安装</span><br><span class="line">sudo apt list --installed | grep mongodb</span><br><span class="line"><span class="meta">#</span> 卸载</span><br><span class="line">sudo apt remove mongodb</span><br><span class="line">sudo apt purge mongodb</span><br></pre></td></tr></table></figure><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span> 导入包管理系统使用的公钥</span><br><span class="line">sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 9DA31620334BD75D9DCB49F368818C72E52529D4</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 创建list file文件(演示使用的是16.04版本)</span><br><span class="line">echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/4.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-4.0.list</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 重新加载本地包数据</span><br><span class="line">sudo apt-get update</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 安装最新的MongoDB包</span><br><span class="line">sudo apt-get install -y mongodb-org</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 可选,固定当前安装版本,防止意外升级</span><br><span class="line">echo "mongodb-org hold" | sudo dpkg --set-selections</span><br><span class="line">echo "mongodb-org-server hold" | sudo dpkg --set-selections</span><br><span class="line">echo "mongodb-org-shell hold" | sudo dpkg --set-selections</span><br><span class="line">echo "mongodb-org-mongos hold" | sudo dpkg --set-selections</span><br><span class="line">echo "mongodb-org-tools hold" | sudo dpkg --set-selections</span><br></pre></td></tr></table></figure><p><strong>重要:</strong></p><p>当安装完成以后</p><ul><li>将会创建默认的数据仓库 /var/lib/mongodb</li><li>将会创建默认的日志仓库 /var/log/mongodb</li><li>将会创建默认的配置文件 /etc/mongod.conf</li></ul><h2 id="MongoDB使用"><a href="#MongoDB使用" class="headerlink" title="MongoDB使用"></a>MongoDB使用</h2><h3 id="启动MongoDB服务"><a href="#启动MongoDB服务" class="headerlink" title="启动MongoDB服务"></a>启动MongoDB服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 27017 is the default port the standalone mongod listens on</span><br><span class="line">sudo service mongod start</span><br><span class="line"><span class="meta">#</span> 或</span><br><span class="line">sudo mongod --config /etc/mongod.conf --fork</span><br></pre></td></tr></table></figure><h3 id="关闭MongoDB服务"><a href="#关闭MongoDB服务" class="headerlink" title="关闭MongoDB服务"></a>关闭MongoDB服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo service mongod stop</span><br><span class="line"><span class="meta">#</span> 或</span><br><span class="line"><span class="meta">#</span> step1: 查看mongod 进程id</span><br><span class="line">ps aux|grep mongod</span><br><span class="line"><span class="meta">#</span> kill mongod_pid</span><br><span class="line">sudo kill -2 &lt;mongod_pid&gt;</span><br></pre></td></tr></table></figure><h3 id="重启MongoDB服务器"><a href="#重启MongoDB服务器" class="headerlink" title="重启MongoDB服务器"></a>重启MongoDB服务器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mongod restart</span><br></pre></td></tr></table></figure><h3 id="连接MongoDB服务器"><a href="#连接MongoDB服务器" class="headerlink" title="连接MongoDB服务器"></a>连接MongoDB服务器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 使用默认的host和默认端口号(27017)启动</span><br><span class="line">mongo</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 使用指定服务器地址和端口号登陆</span><br><span class="line">mongo --host mongodb0.example.com:27017</span><br><span class="line"><span class="meta">#</span> 或者</span><br><span class="line">mongo --host mongodb0.example.com --port 27017</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 连接指定用户下指定数据库(带密码)</span><br><span class="line">mongo --username alice --password --authenticationDatabase admin --host mongodb0.examples.com --port 27017</span><br></pre></td></tr></table></figure><h2 id="卸载MongoDB"><a href="#卸载MongoDB" class="headerlink" title="卸载MongoDB"></a>卸载MongoDB</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 首先关闭MongoDB服务器</span><br><span class="line">sudo service mongod stop</span><br><span class="line"><span class="meta">#</span> 删除Mongo相关包</span><br><span class="line">sudo apt-get purge mongodb-org*</span><br><span class="line"><span class="meta">#</span> 删除Mongo数据和日志</span><br><span class="line">sudo rm -r /var/log/mongodb</span><br><span class="line">sudo rm -r /var/lib/mongodb</span><br></pre></td></tr></table></figure><h2 id="Mongo配置"><a href="#Mongo配置" class="headerlink" title="Mongo配置"></a>Mongo配置</h2><p>修改mongod启动配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 远程访问配置</span><br><span class="line"># network interfaces</span><br><span class="line">net:</span><br><span class="line">  port: 27017</span><br><span class="line">#  bindIp: 127.0.0.1</span><br><span class="line">  bindIp: 0.0.0.0</span><br><span class="line"></span><br><span class="line">#登录验证配置(需要先启动访问控制):</span><br><span class="line">security:</span><br><span class="line"> authorization: enabled</span><br></pre></td></tr></table></figure><h2 id="启动访问控制"><a href="#启动访问控制" class="headerlink" title="启动访问控制"></a>启动访问控制</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 先添加一个管理用户的用户</span><br><span class="line">use admin</span><br><span class="line">db.createUser(</span><br><span class="line">  &#123;</span><br><span class="line">    user: "wangluobu",</span><br><span class="line">    pwd: "xxx",</span><br><span class="line">    roles: [ &#123; role: "userAdminAnyDatabase", db: "admin" &#125;, "readWriteAnyDatabase" ]</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"><span class="meta">#</span> 修改配置文件(见上)</span><br><span class="line"><span class="meta">#</span> 重启服务器</span><br><span class="line">sudo service mongod restart</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 验证登录</span><br><span class="line">use admin</span><br><span class="line">db.auth("wangluobu", "xxx" )</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;引用&quot;&gt;&lt;a href=&quot;#引用&quot; class=&quot;headerlink&quot; title=&quot;引用&quot;&gt;&lt;/a&gt;引用&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;本文将介绍MongoDB在Ubuntu_16.04下的安装、启动、关闭、配置、卸载&lt;br&gt;以及基于Mongo Sh
      
    
    </summary>
    
      <category term="MongoDB" scheme="https://ojerk.cn/categories/MongoDB/"/>
    
    
      <category term="Ubuntu" scheme="https://ojerk.cn/tags/Ubuntu/"/>
    
      <category term="MongoDB" scheme="https://ojerk.cn/tags/MongoDB/"/>
    
  </entry>
  
  <entry>
    <title>一个部落奖励说明帖</title>
    <link href="https://ojerk.cn/award/"/>
    <id>https://ojerk.cn/award/</id>
    <published>2019-04-02T06:07:17.000Z</published>
    <updated>2019-04-02T06:47:19.822Z</updated>
    
    <content type="html"><![CDATA[<p><strong>这里其实需要插点什么东西,看着才会稍有美感,这样吧,say something ba~</strong></p><blockquote><p>勤以为学,信以立身</p></blockquote><p><img src="部落冲突奖励.png" alt="award图片"></p><p><strong>部落联赛奖励说明:</strong></p><p>疯狂赤鸡的部落联赛马上开始了,除了联赛提供的奖励外,我们还而外提供了最多4份的CoC终极无敌爆炸牛批帅气的<strong>月票</strong>奖励,心动了吗?获取规则如下.  </p><ul><li>如参赛的部落成员成功同本大满贯,则奖励自动升级为4份!!!</li><li>如参赛部落成员未有一人大满贯,则奖励将只会有两份</li><li>升级后奖励分发规则:<ul><li>3份只会从获得了大满贯的部落成员里抽出(如人数不够,很遗憾,多余的奖励将作废)</li><li>1份从获星最多者抽出(如大满贯超过3人,则从余下人里面抽出)</li></ul></li><li>未升级奖励分发:<ul><li>从获星最多者抽出</li></ul></li></ul><p>那么也就代表着什么呢?代表着以下行为将会被取消抽奖资格</p><ul><li>参赛不打者</li><li>降维打击者</li><li>过于自负者</li><li>总结一下就是,<strong>这次联赛每场都得打,而且只能打同本的对手</strong></li></ul><p>所以这次联赛目标很明确:不求联赛成绩最好,只求奖励拿到最多~!<br>所以大家 <strong>頑張ります</strong> !!!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;这里其实需要插点什么东西,看着才会稍有美感,这样吧,say something ba~&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;勤以为学,信以立身&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;部落冲突奖励.png&quot; alt
      
    
    </summary>
    
      <category term="Game" scheme="https://ojerk.cn/categories/Game/"/>
    
    
      <category term="Game" scheme="https://ojerk.cn/tags/Game/"/>
    
  </entry>
  
  <entry>
    <title>Vscode里TypeScript开发环境的配置</title>
    <link href="https://ojerk.cn/Vscode%E9%87%8CTypeScript%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E9%85%8D%E7%BD%AE/"/>
    <id>https://ojerk.cn/Vscode里TypeScript开发环境的配置/</id>
    <published>2019-02-19T02:33:15.000Z</published>
    <updated>2019-02-19T03:29:19.108Z</updated>
    
    <content type="html"><![CDATA[<h2 id="TypeScript安装"><a href="#TypeScript安装" class="headerlink" title="TypeScript安装"></a>TypeScript安装</h2><p>这里只针对npm用户,所以首先你得确保你已经正确安装了node</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure><h2 id="编译代码"><a href="#编译代码" class="headerlink" title="编译代码"></a>编译代码</h2><p>TypeScript文件以.ts作为扩展名,不能直接使用,需要编译为.js文件才能使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 编译(假设当前目录下存在hello.ts文件)</span><br><span class="line">tsc hello.ts</span><br></pre></td></tr></table></figure><p>这将输出hello.js文件,它包含了与hello.ts文件相同的js代码,这样就可以正常使用了,但是每次写完ts代码都需要编译一遍,这样是很痛苦的,Vscode为我们解决了这个问题</p><h2 id="Vscode下TypeScript开发环境配置"><a href="#Vscode下TypeScript开发环境配置" class="headerlink" title="Vscode下TypeScript开发环境配置"></a>Vscode下TypeScript开发环境配置</h2><p>让我们从一个简单的”Hello World”开始</p><ul><li>创建一个空文件夹”mytask”</li><li>生成tsconfig.json配置文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc --init</span><br></pre></td></tr></table></figure><ul><li>用Vscode打开该文件夹</li><li>创建一个HelloWorld.ts文件,包含以下内容</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params">name: <span class="built_in">string</span></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Hello <span class="subst">$&#123;name&#125;</span>!`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sayHello(<span class="string">'BISTU'</span>);</span><br></pre></td></tr></table></figure><ul><li>按下快键键 <strong>Ctrl+Shift+B</strong>或点击顶部菜单栏<strong>终端-&gt;运行生成任务…</strong>你将会看到如下选项</li></ul><p><img src="task.png" alt="task"></p><p>选择<strong>构建</strong>将会把当前目录(包含子目录)下所有ts文件编译为js文件<br>选择<strong>监视</strong>将在每次保存的时候把ts文件编译为js文件</p><h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><p>更改<strong>tsconfig.json</strong>下<strong>outDir</strong>配置将会改变js输出路径</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;TypeScript安装&quot;&gt;&lt;a href=&quot;#TypeScript安装&quot; class=&quot;headerlink&quot; title=&quot;TypeScript安装&quot;&gt;&lt;/a&gt;TypeScript安装&lt;/h2&gt;&lt;p&gt;这里只针对npm用户,所以首先你得确保你已经正确安装了nod
      
    
    </summary>
    
      <category term="TypeScript" scheme="https://ojerk.cn/categories/TypeScript/"/>
    
    
      <category term="Vscode" scheme="https://ojerk.cn/tags/Vscode/"/>
    
      <category term="TypeScript" scheme="https://ojerk.cn/tags/TypeScript/"/>
    
  </entry>
  
  <entry>
    <title>Vscode上Python环境的配置和使用</title>
    <link href="https://ojerk.cn/Vscode%E4%B8%8APython%E7%8E%AF%E5%A2%83%E7%9A%84%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8/"/>
    <id>https://ojerk.cn/Vscode上Python环境的配置和使用/</id>
    <published>2019-01-07T08:01:34.000Z</published>
    <updated>2019-12-05T13:52:16.604Z</updated>
    
    <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>随着博主越来越频繁的使用Vscode做Python开发,发现这玩意儿是越来越顺手(微软大法牛啤),有的细节很实用,但是时间久了就容易忘了,故在此做个整理,而且会不断更新…</p><h2 id="积累的干货"><a href="#积累的干货" class="headerlink" title="积累的干货"></a>积累的干货</h2><p><strong>powershell的授权:</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 以管理员身份打开powershell</span><br><span class="line"><span class="meta">#</span> 执行下面命令</span><br><span class="line">set-executionpolicy remotesigned</span><br></pre></td></tr></table></figure><p><strong>Vscode用户配置:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"terminal.integrated.shell.windows"</span>: <span class="string">"C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\powershell.exe"</span>,</span><br><span class="line">    <span class="string">"workbench.iconTheme"</span>: <span class="string">"material-icon-theme"</span>,</span><br><span class="line">    <span class="string">"python.venvPath"</span>: <span class="string">"D:/virtualenv"</span>,</span><br><span class="line">    <span class="string">"files.autoSave"</span>: <span class="string">"off"</span>,</span><br><span class="line">    <span class="string">"code-runner.executorMap"</span>: &#123;</span><br><span class="line">        <span class="string">"python"</span>: <span class="string">"set PYTHONIOENCODING=utf8 &amp;&amp; $pythonPath $fullFileName"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"gitlens.advanced.messages"</span>: &#123;</span><br><span class="line">        <span class="string">"suppressShowKeyBindingsNotice"</span>: true</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"git.autofetch"</span>: true,</span><br><span class="line">    <span class="string">"git.enableSmartCommit"</span>: true,</span><br><span class="line">    <span class="string">"python.linting.flake8Enabled"</span>: true,</span><br><span class="line">    <span class="string">"python.linting.pylintEnabled"</span>: false,</span><br><span class="line">    <span class="string">"window.zoomLevel"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">"gitlens.views.fileHistory.enabled"</span>: true,</span><br><span class="line">    <span class="string">"gitlens.views.lineHistory.enabled"</span>: true,</span><br><span class="line">    <span class="string">"editor.formatOnSave"</span>: true,</span><br><span class="line">    <span class="string">"python.autoComplete.addBrackets"</span>: false,</span><br><span class="line">    <span class="string">"search.location"</span>: <span class="string">"panel"</span>,</span><br><span class="line">    <span class="string">"autoDocstring.docstringFormat"</span>: <span class="string">"google"</span>,</span><br><span class="line">    <span class="string">"eslint.validate"</span>: [</span><br><span class="line">        <span class="string">"javascript"</span>,</span><br><span class="line">        <span class="string">"javascriptreact"</span>,</span><br><span class="line">        <span class="string">"typescript"</span>,</span><br><span class="line">        <span class="string">"typescriptreact"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"files.exclude"</span>: &#123;</span><br><span class="line">        <span class="string">"**/.git"</span>: true,</span><br><span class="line">        <span class="string">"**/.svn"</span>: true,</span><br><span class="line">        <span class="string">"**/.hg"</span>: true,</span><br><span class="line">        <span class="string">"**/CVS"</span>: true,</span><br><span class="line">        <span class="string">"**/.DS_Store"</span>: true,</span><br><span class="line">        <span class="string">"**/__pycache__"</span>: true</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"python.linting.flake8Args"</span>: [</span><br><span class="line">        <span class="string">"--max-line-length=600"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Vscode插件推荐:</strong></p><ul><li>Python(做Python开发必装!!!)</li><li>autoDocstring</li><li>Chinese (Simplified) Language Pack for Visual Studio Code</li><li>Code Runner</li><li>Gitlens</li><li>Markdown All in One</li><li>markdownlint</li><li>One Dark Pro(一款主题)</li><li>vscode-icons(文件图标主题)</li></ul><p><strong>Vscode断点调试:</strong></p><ul><li>调试控制台的使用</li><li>Logpoints(在调试不能暂停或停止的生产服务器时，日志点对于注入日志特别有用)</li></ul><p><img src="log-points.gif" alt="Logpoints的使用"></p><p><strong>代码中变量和方法的重构技巧:</strong></p><p>变量的重构:<br>方法一: 右键,选择提取变量<br>方法二: F1, Python Refactor: Extract Method.<br>方法三: 编辑自己的快捷键(python.refactorExtractVariable)<br>Note: 自定义快捷键的绑定方法,Ctrl+K Ctrl+S</p><p><img src="refactorExtractVar.gif" alt="变量重构"></p><p>方法重构:<br>方法一: 右键,选择提取方法<br>方法二: F1, Python Refactor: Sort Imports<br>方法三: 编辑自己的快捷键(python.refactorExtractMethod)</p><p><img src="refactorExtractMethod.gif" alt="方法重构"></p><p><strong>格式化import:</strong></p><p>方法一: 右键,排序import语句<br>方法二: F1, Python Refactor: Sort Imports<br>方法三: 编辑自己的快捷键(python.sortImports)</p><p><img src="sortImports.gif" alt="自动排序import"></p><h2 id="Vscode常用快捷键"><a href="#Vscode常用快捷键" class="headerlink" title="Vscode常用快捷键"></a>Vscode常用快捷键</h2><blockquote><p>在编写代码时,能够将双手放在键盘上对于高生产率至关重要,VS代码有一组丰富的默认键盘快捷键，并允许您自定义它们</p></blockquote><p><strong>添加光标:</strong> Alt + Click 或者 Ctrl+Alt+Down / Ctrl+Alt+Up</p><ul><li>该快捷键可能会被显卡占用</li></ul><p><img src="multicursor.gif" alt="添加光标"></p><p><strong>选择光标处的单词,接着按会再选择下一个相同的单词:</strong> Ctrl+D<br><img src="multicursor-word.gif" alt="添加光标"></p><p><strong>选择光标出所有出现的单词:</strong> Ctrl+Shift+L</p><p><strong>快速缩小或展开当前选择:</strong> Shift+Alt+Left / Shift+Alt+Right<br><img src="expandselection.gif" alt="快速缩小或展开当前选择"></p><p><strong>多列选择:</strong> Shift+Alt<br><img src="column-select.gif" alt="多列选择"></p><p><strong>在整个项目搜索文件(支持正则表达式):</strong> Ctrl+Shift+F<br><strong>高级搜索:</strong> Ctrl+Shift+J</p><p><strong>智能感知:</strong> 默认ctrl+space(但是被Windows占用),建议将其修改为ctrl+alt+space(command: “editor.action.triggerSuggest”)</p><p><strong>格式化整个文档:</strong> Shift+Alt+F<br><strong>格式化选中部分:</strong> Ctrl+K Ctrl+F<br>Note:<br>    Auto Docstring: Docstring Format 选择google样式</p><p><strong>折叠:</strong></p><ul><li>在光标处折叠最内侧未折叠的区域: Ctrl+Shift+[</li><li>在光标处展开折叠区域: Ctrl+Shift+]</li><li>在光标处折叠最内侧未折叠的区域以及该区域内的所有区域: Ctrl+K Ctrl+[</li><li>展开光标处的区域以及该区域内的所有区域: Ctrl+K Ctrl+]</li><li>折叠编辑器中所有区域: Ctrl+K Ctrl+0</li><li>在编辑器中展开所有区域: Ctrl+K Ctrl+J</li><li>折叠级别X的所有区域，当前光标位置的区域除外: Ctrl+K Ctrl+2 for level 2</li><li>折叠以块注释标记开头的所有区域: Ctrl+K Ctrl+/</li></ul><p><strong>缩进:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"editor.insertSpaces"</span>: true,</span><br><span class="line"><span class="string">"editor.tabSize"</span>: <span class="number">4</span>,</span><br></pre></td></tr></table></figure><p><strong>全局文件编码设置:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"files.encoding"</span>: <span class="string">"utf-8"</span></span><br></pre></td></tr></table></figure><p><strong>编辑器与窗口相关:</strong><br>跳转到指定代码行: Ctrl+G<br>打开一个新Code:  Ctrl+Shift+N<br>编辑器里窗口间的切换: Ctrl+Tab<br>移动当前窗口到 左/右 编辑器里: Ctrl+Alt+Left / Right<br>编辑器换位置: Ctrl+k然后按Left或Right</p><p><strong>格式调整:</strong><br>上下移动一行： Alt+Up / Alt+Down<br>上下复制一行:  Alt+Shift+Up / Alt+Shift+Down<br>在当前行 下边/上面 插入一行: Ctrl+Enter / Ctrl+Shift+Enter</p><p><strong>侧边栏:</strong><br>打开资源: ctrl+shift+E<br>打开搜索: ctrl+shift+F<br>打开git: ctrl+shift+G<br>打开调试: ctrl+shift+D<br>打开扩展: ctrl+shift+X<br>隐藏侧边栏: Ctrl+B</p><p><strong>光标:</strong><br>移动到行首：Home<br>移动到行尾：End<br>移动到文件结尾：Ctrl+End<br>移动到文件开头：Ctrl+Home<br>选中当前行: Ctrl+i<br>选择从光标到行尾: Shift+End<br>选择从行首到光标处: Shift+Home<br>选择光标所在单词: Shift+Alt+Left/Shift+Alt+Right</p><p><strong>控制台:</strong><br>打开控制台: Ctrl+`<br>打开控制台并新建一个Terminal: Ctrl+Shirt+`</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;随着博主越来越频繁的使用Vscode做Python开发,发现这玩意儿是越来越顺手(微软大法牛啤),有的细节很实用,但是时间久了就容易忘了,故
      
    
    </summary>
    
      <category term="Vscode" scheme="https://ojerk.cn/categories/Vscode/"/>
    
    
      <category term="Vscode" scheme="https://ojerk.cn/tags/Vscode/"/>
    
  </entry>
  
  <entry>
    <title>Python里的相对导入和绝对导入</title>
    <link href="https://ojerk.cn/Python-%E9%87%8C%E7%9A%84%E7%9B%B8%E5%AF%B9%E5%AF%BC%E5%85%A5%E5%92%8C%E7%BB%9D%E5%AF%B9%E5%AF%BC%E5%85%A5/"/>
    <id>https://ojerk.cn/Python-里的相对导入和绝对导入/</id>
    <published>2019-01-07T02:40:09.000Z</published>
    <updated>2019-12-05T13:49:00.749Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>这是对Python中import(导入)的更深层次理解</p><h2 id="Python-import-的工作原理"><a href="#Python-import-的工作原理" class="headerlink" title="Python import 的工作原理"></a>Python import 的工作原理</h2><p>首先你得知道:<br>Python里的模块: 是指以.py扩展名结尾的文件<br>Python里的包: 是指任何包含<strong>init</strong>.py文件的文件夹</p><p><strong>当Python导入一个abc这样的模块,过程是这样的:</strong></p><ul><li>首先会在先前导入的所有模块的缓存里(sys.modules)查找abc是否已经存在</li><li>如果没有找到,Python将会在内置模块列表(标准库)里面查找</li><li>如果还没找到,将会在其定义的目录列表里面查找(sys.path),通常这里面第一个是当前目录</li></ul><h2 id="PEP8中关于导入声明的形式"><a href="#PEP8中关于导入声明的形式" class="headerlink" title="PEP8中关于导入声明的形式"></a>PEP8中关于导入声明的形式</h2><ul><li>导入总是位于文件的顶部，在模块注释和文档字符串之后，在模块的全局变量与常量之前</li><li>导入应该按照以下的顺序分组：<ul><li>标准库导入</li><li>相关第三方导入</li><li>本地应用程序/库的特定导入</li></ul></li><li>每组导入之间使用空行隔开</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这是一个标准的导入样式示例</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""Illustration of good import statement styling.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Note that the imports come after the docstring.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Standard library imports</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># Third party imports</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_restful <span class="keyword">import</span> Api</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line"><span class="comment"># Local application imports</span></span><br><span class="line"><span class="keyword">from</span> local_module <span class="keyword">import</span> local_class</span><br><span class="line"><span class="keyword">from</span> local_package <span class="keyword">import</span> local_function</span><br></pre></td></tr></table></figure><p>tips: 可以利用插件格式化导入排版,节省时间</p><h2 id="绝对导入-相对导入"><a href="#绝对导入-相对导入" class="headerlink" title="绝对导入 / 相对导入"></a>绝对导入 / 相对导入</h2><p>假设您有以下的目录结构:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">└── project</span><br><span class="line">    ├── package1</span><br><span class="line">    │   ├── module1.py</span><br><span class="line">    │   └── module2.py</span><br><span class="line">    └── package2</span><br><span class="line">        ├── __init__.py</span><br><span class="line">        ├── module3.py</span><br><span class="line">        ├── module4.py</span><br><span class="line">        └── subpackage1</span><br><span class="line">            └── module5.py</span><br></pre></td></tr></table></figure><ul><li>package1/module2.py包含一个函数function1</li><li>package2/<strong>init</strong>.py包含一个类class1</li><li>package2/subpackage1/module5.py包含一个函数function2</li></ul><p><strong>绝对导入:</strong></p><p>使用项目根文件夹中的完整路径指定要导入的资源</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绝对导入示例,请注意您必须从顶级包文件夹中为每个包或文件提供详细路径</span></span><br><span class="line"><span class="keyword">from</span> package1 <span class="keyword">import</span> module1</span><br><span class="line"><span class="keyword">from</span> package1.module2 <span class="keyword">import</span> function1</span><br><span class="line"><span class="keyword">from</span> package2 <span class="keyword">import</span> class1</span><br><span class="line"><span class="keyword">from</span> package2.subpackage1.module5 <span class="keyword">import</span> function2</span><br></pre></td></tr></table></figure><p>绝对导入的利弊:<br>利: 绝对导入是首选，因为它们非常清晰和直接,事实上，PEP8明确建议使用绝对导入,只需查看语句，就可以很容易地确定导入资源的确切位置.<br>弊: 但是,有时候绝对导入会变得很冗长,比如:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> package1.subpackage2.subpackage3.subpackage4.module5 <span class="keyword">import</span> function6</span><br></pre></td></tr></table></figure><p>这样绝对导入用起来就会很操蛋,这时候可以用相对导入来代替</p><p><strong>相对导入:</strong></p><p>相对于当前位置导入资源,分为隐式和显示,Python3中已经弃用隐式导入</p><p>导入function1到package1/module1.py文件中:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># package1/module1.py</span></span><br><span class="line"><span class="keyword">from</span> .module2 <span class="keyword">import</span> function1</span><br></pre></td></tr></table></figure><p>将class1和function2导入package2/module3.py文件中:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># package2/module3.py</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> class1</span><br><span class="line"><span class="keyword">from</span> .subpackage1.module5 <span class="keyword">import</span> function2</span><br></pre></td></tr></table></figure><p>相对导入的利弊:<br>利: 相对进口的一个明显优势是它们非常简洁<br>弊: 它不像绝对导入那么可读,想要告诉你导入资源的位置并不容易,对于目录结构可能会发生变化的共享项目,相对导入可能会很混乱</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;这是对Python中import(导入)的更深层次理解&lt;/p&gt;
&lt;h2 id=&quot;Python-import-的工作原理&quot;&gt;&lt;a href=&quot;
      
    
    </summary>
    
      <category term="Python" scheme="https://ojerk.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://ojerk.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>JupyterNotebook---配置属于自己的Python虚拟环境</title>
    <link href="https://ojerk.cn/%E7%BB%99jupyterNotebook%E9%85%8D%E7%BD%AE%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"/>
    <id>https://ojerk.cn/给jupyterNotebook配置属于自己的Python虚拟环境/</id>
    <published>2018-11-07T02:02:48.000Z</published>
    <updated>2019-11-23T05:45:39.549Z</updated>
    
    <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>自从发现jupyterNotebook这种神器以后,发现项目里某些需要开会讨论的代码块,借助notebook可以很愉快的完成,只需要把环境部署到一个kernel上就行,接下来我将介绍如何在notebook上部署你专属的Python虚拟环境</p><h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><p>默认大家已经装好了jupyter</p><ol><li>进入到你需要部署的python虚拟环境里</li></ol><p><img src="第一步.png" alt="第一步"></p><ol start="2"><li>安装ipykernel</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install ipykernel</span><br></pre></td></tr></table></figure><ol start="3"><li>配置kernel</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法一</span></span><br><span class="line">python -m ipykernel install --user --display-name <span class="string">"&lt;notebookKernelName&gt;"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line">python -m ipykernel install --user --name &lt;localkernelName&gt; --display-name <span class="string">"&lt;notebookKernelName&gt;"</span></span><br></pre></td></tr></table></figure><p><strong>注意:</strong></p><ul><li>如果使用方法一,且不给本地的kernel起一个名字,那么默认将会使用python3(如果你装的是python3的话)为 kernel命名,这将会导致原来的kernel被覆盖</li><li>使用方法二命名的时候,名字最好不要使用<strong>python3</strong>(如果你装的是python3的话)</li></ul><p><img src="第二部.png" alt="第二部"></p><ol start="4"><li>启动Notebook查看属于我们的kernel</li></ol><p><img src="第三步.png" alt="第三步"></p><p>我们可以打印python的路径确认一下:</p><p><img src="第四步.png" alt="第四步"></p><h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><p>如果你一不小心创建了自己不满意的kernel怎么办?没关系还可以删除</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter kernelspec remove kernelName</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;自从发现jupyterNotebook这种神器以后,发现项目里某些需要开会讨论的代码块,借助notebook可以很愉快的完成,只需要把环境部
      
    
    </summary>
    
      <category term="jupyter" scheme="https://ojerk.cn/categories/jupyter/"/>
    
    
      <category term="jupyter" scheme="https://ojerk.cn/tags/jupyter/"/>
    
  </entry>
  
  <entry>
    <title>Python入门_4讲</title>
    <link href="https://ojerk.cn/Python%E5%85%A5%E9%97%A8-4%E8%AE%B2/"/>
    <id>https://ojerk.cn/Python入门-4讲/</id>
    <published>2018-10-19T06:15:29.000Z</published>
    <updated>2019-01-03T08:58:13.698Z</updated>
    
    <content type="html"><![CDATA[<h1 id="数据可视化"><a href="#数据可视化" class="headerlink" title="数据可视化"></a>数据可视化</h1><h2 id="词云"><a href="#词云" class="headerlink" title="词云"></a>词云</h2><p>词云又叫文字云,是对文本里频率较高的关键词在视觉上突显出来,达到一眼看过去就能知道文本数据主要表达的意思</p><h2 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h2><h3 id="text-characters项目介绍"><a href="#text-characters项目介绍" class="headerlink" title="text_characters项目介绍"></a>text_characters项目介绍</h3><ul><li>wordcloud默认是不支持中文的分词的,但这恰恰是们擅长的</li><li>非常方便的调用</li></ul><p><strong>传统调用:</strong></p><p>先说一个最简单的,当我们需要对一篇文章进行分词的时候,传统的调用方法首先是对该文章进行分句,然后再进行分词,我们可以看一下code</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首先需要引用我们需要用到的模块</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> pyltp <span class="keyword">import</span> Segmentor</span><br><span class="line"><span class="keyword">from</span> pyltp <span class="keyword">import</span> SentenceSplitter</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进行分句</span></span><br><span class="line">test_str = <span class="string">"元芳你怎么看?我就趴着看呗!"</span></span><br><span class="line">sents = SentenceSplitter.split(test_str)</span><br><span class="line"><span class="comment"># 转换成list</span></span><br><span class="line">sents = list(sents)</span><br><span class="line">sents</span><br></pre></td></tr></table></figure><pre><code>[&apos;元芳你怎么看?&apos;, &apos;我就趴着看呗!&apos;]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进行分词</span></span><br><span class="line"><span class="comment"># ltp模型目录的路径</span></span><br><span class="line">LTP_DATA_DIR = <span class="string">'/home/bnu/ltp_data'</span></span><br><span class="line"><span class="comment"># 分词模型路径，模型名称为`cws.model`</span></span><br><span class="line">cws_model_path = os.path.join(LTP_DATA_DIR, <span class="string">'cws.model'</span>)</span><br><span class="line"></span><br><span class="line">result = list()</span><br><span class="line"><span class="keyword">for</span> sen <span class="keyword">in</span> sents:</span><br><span class="line">    <span class="comment"># 初始化实例</span></span><br><span class="line">    segmentor = Segmentor()</span><br><span class="line">    <span class="comment"># 加载模型</span></span><br><span class="line">    segmentor.load(cws_model_path)</span><br><span class="line">    <span class="comment"># 开始分词</span></span><br><span class="line">    words = segmentor.segment(sen)</span><br><span class="line">    <span class="comment"># 转换成list</span></span><br><span class="line">    words = list(words)</span><br><span class="line">    result.append(words)</span><br><span class="line">print(cache_list)</span><br></pre></td></tr></table></figure><pre><code>[[&apos;元芳&apos;, &apos;你&apos;, &apos;怎么&apos;, &apos;看&apos;, &apos;?&apos;], [&apos;我&apos;, &apos;就&apos;, &apos;趴&apos;, &apos;着&apos;, &apos;看&apos;, &apos;呗&apos;, &apos;!&apos;]]</code></pre><p><strong>咱们家的调用方法:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tcharacters.ltp <span class="keyword">import</span> ltp</span><br><span class="line"><span class="comment"># 对整篇文章进行分词</span></span><br><span class="line">words = ltp.fenci(test_str)</span><br><span class="line">print(words)</span><br></pre></td></tr></table></figure><pre><code>[[&apos;元芳&apos;, &apos;你&apos;, &apos;怎么&apos;, &apos;看&apos;, &apos;?&apos;], [&apos;我&apos;, &apos;就&apos;, &apos;趴&apos;, &apos;着&apos;, &apos;看&apos;, &apos;呗&apos;, &apos;!&apos;]]</code></pre><h2 id="愉快的开始绘制我们的词云"><a href="#愉快的开始绘制我们的词云" class="headerlink" title="愉快的开始绘制我们的词云"></a>愉快的开始绘制我们的词云</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"><span class="keyword">from</span> tcharacters.ltp <span class="keyword">import</span> ltp</span><br><span class="line"><span class="keyword">from</span> ste <span class="keyword">import</span> util</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取我们第一章故事</span></span><br><span class="line">all_text = open(<span class="string">"中国人必读的100个历史故事.txt"</span>, encoding=<span class="string">"utf-8"</span>).read()</span><br><span class="line">text = all_text[:<span class="number">1526</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进行分词</span></span><br><span class="line">fenci_result = ltp.fenci(text)</span><br><span class="line"><span class="comment"># 处理成wordcloud需要的数据结构</span></span><br><span class="line">fenci_result = <span class="string">" "</span>.join(util.list_merge(fenci_result))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成词云</span></span><br><span class="line">wc = WordCloud(width=<span class="number">900</span>, height=<span class="number">600</span>).generate(fenci_result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line"><span class="comment"># 方法一(直接打印)</span></span><br><span class="line">plt.imshow(wc, interpolation=<span class="string">'bilinear'</span>)</span><br><span class="line">plt.axis(<span class="string">"off"</span>)</span><br></pre></td></tr></table></figure><p><img src="output_11_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法二(保存)</span></span><br><span class="line">wc.to_file(<span class="string">"fff.png"</span>)</span><br></pre></td></tr></table></figure><pre><code>&lt;wordcloud.wordcloud.WordCloud at 0x7fc654084f98&gt;</code></pre><p><strong>高大上的玩法:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"><span class="keyword">from</span> tcharacters.ltp <span class="keyword">import</span> ltp</span><br><span class="line"><span class="keyword">from</span> ste <span class="keyword">import</span> util</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取我们第一章故事</span></span><br><span class="line">all_text = open(<span class="string">"中国人必读的100个历史故事.txt"</span>, encoding=<span class="string">"utf-8"</span>).read()</span><br><span class="line">text = all_text[:<span class="number">1526</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进行分词</span></span><br><span class="line">fenci_result = ltp.fenci(text)</span><br><span class="line"><span class="comment"># 处理成wordcloud需要的数据结构</span></span><br><span class="line">fenci_result = <span class="string">" "</span>.join(util.list_merge(fenci_result))</span><br><span class="line"></span><br><span class="line"><span class="comment"># read the mask image</span></span><br><span class="line">alice_mask = np.array(Image.open(<span class="string">"./images/alice_mask.png"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例化一个词云对象</span></span><br><span class="line">wc = WordCloud(width=<span class="number">900</span>, height=<span class="number">600</span>, background_color=<span class="string">"white"</span>, max_words=<span class="number">2000</span>,</span><br><span class="line">               mask=alice_mask, contour_width=<span class="number">3</span>, contour_color=<span class="string">'steelblue'</span>)</span><br><span class="line"><span class="comment"># 生成词云</span></span><br><span class="line">wc.generate(fenci_result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看</span></span><br><span class="line"><span class="comment"># 方法一(直接打印)</span></span><br><span class="line">plt.imshow(wc, interpolation=<span class="string">'bilinear'</span>)</span><br><span class="line">plt.axis(<span class="string">"off"</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二(保存)</span></span><br><span class="line">wc.to_file(<span class="string">"alice.png"</span>)</span><br></pre></td></tr></table></figure><p><img src="output_14_0.png" alt="png"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;数据可视化&quot;&gt;&lt;a href=&quot;#数据可视化&quot; class=&quot;headerlink&quot; title=&quot;数据可视化&quot;&gt;&lt;/a&gt;数据可视化&lt;/h1&gt;&lt;h2 id=&quot;词云&quot;&gt;&lt;a href=&quot;#词云&quot; class=&quot;headerlink&quot; title=&quot;词云&quot;&gt;&lt;/a&gt;词
      
    
    </summary>
    
      <category term="Train" scheme="https://ojerk.cn/categories/Train/"/>
    
    
      <category term="Train" scheme="https://ojerk.cn/tags/Train/"/>
    
      <category term="词云" scheme="https://ojerk.cn/tags/%E8%AF%8D%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>词云里中文无法正常显示问题的解决</title>
    <link href="https://ojerk.cn/%E8%A7%A3%E5%86%B3%E8%AF%8D%E4%BA%91%E4%B8%AD%E6%96%87%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/"/>
    <id>https://ojerk.cn/解决词云中文无法正常显示问题/</id>
    <published>2018-10-18T09:59:11.000Z</published>
    <updated>2019-11-23T05:46:00.670Z</updated>
    
    <content type="html"><![CDATA[<h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><p>wordcloud默认字体不支持中文</p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p><strong>方法一:</strong></p><p>调用的时候传入font参数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># windows自带的字体路径</span></span><br><span class="line">font_path = <span class="string">'C:\Windows\Fonts\simfang.ttf'</span></span><br><span class="line">wc = WordCloud(font_path=font_path)</span><br></pre></td></tr></table></figure><p><strong>方法二:</strong></p><p>一劳永逸的方法</p><ul><li>首先下载字体文件 <a href="https://pan.baidu.com/s/1pPtPSjk4ToXmpjck6IlKJQ" target="_blank" rel="noopener">simhei.ttf</a> 9rm1(当然,你也可以用电脑上自带的)</li><li>找到你自己的 wordcloud目录 (博主目录位置D:\virtualenv\scrapy\Lib\site-packages\wordcloud)</li><li>把下载好的字体文件放到该目录下</li><li>打开目录下 wordcloud.py文件进行如下修改</li></ul><p><img src="字体路径.png" alt="字体路径"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;问题分析&quot;&gt;&lt;a href=&quot;#问题分析&quot; class=&quot;headerlink&quot; title=&quot;问题分析&quot;&gt;&lt;/a&gt;问题分析&lt;/h2&gt;&lt;p&gt;wordcloud默认字体不支持中文&lt;/p&gt;
&lt;h2 id=&quot;解决方法&quot;&gt;&lt;a href=&quot;#解决方法&quot; class=&quot;he
      
    
    </summary>
    
      <category term="python" scheme="https://ojerk.cn/categories/python/"/>
    
    
      <category term="词云" scheme="https://ojerk.cn/tags/%E8%AF%8D%E4%BA%91/"/>
    
  </entry>
  
  <entry>
    <title>Pip不完全指北</title>
    <link href="https://ojerk.cn/Pip%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/"/>
    <id>https://ojerk.cn/Pip常用技巧总结/</id>
    <published>2018-10-16T09:01:21.000Z</published>
    <updated>2019-12-05T13:48:45.445Z</updated>
    
    <content type="html"><![CDATA[<h2 id="国内镜像源的配置"><a href="#国内镜像源的配置" class="headerlink" title="国内镜像源的配置"></a>国内镜像源的配置</h2><ul><li>在用户目录下新建pip目录</li><li>在pip目录下新建pip.ini配置文件</li><li>填入下面内容并保存</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line">no-warn-script-location=False</span><br></pre></td></tr></table></figure><p>常用国内镜像源:</p><ul><li>豆瓣：<a href="https://pypi.douban.com/simple" target="_blank" rel="noopener">https://pypi.douban.com/simple</a></li><li>清华大学：<a href="https://pypi.tuna.tsinghua.edu.cn/simple" target="_blank" rel="noopener">https://pypi.tuna.tsinghua.edu.cn/simple</a></li></ul><h2 id="常用的花里胡哨"><a href="#常用的花里胡哨" class="headerlink" title="常用的花里胡哨"></a>常用的花里胡哨</h2><p><strong>安装/卸载:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 安装</span><br><span class="line">pip install &lt;包名&gt;</span><br><span class="line"># 卸载</span><br><span class="line">pip uninstall &lt;包名&gt;</span><br></pre></td></tr></table></figure><p><strong>升级:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 查询可升级包</span><br><span class="line">pip list -o</span><br><span class="line"># 自我升级</span><br><span class="line">pip install -U pip</span><br><span class="line"># 升级包</span><br><span class="line">pip install -U &lt;包名&gt;</span><br></pre></td></tr></table></figure><p><strong>查询:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 查询包所在目录</span><br><span class="line">pip show -f &lt;包名&gt;</span><br><span class="line"># 搜索包</span><br><span class="line">pip search &lt;关键字&gt;</span><br></pre></td></tr></table></figure><p><strong>列出已安装的包:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 方法一</span><br><span class="line">pip freeze</span><br><span class="line"></span><br><span class="line"># 方法二</span><br><span class="line">pip list</span><br></pre></td></tr></table></figure><p><strong>下载而不安装包:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip download -d &lt;目录&gt;</span><br><span class="line"></span><br><span class="line"># 高级点的</span><br><span class="line">pip download -d &lt;目录&gt; -r requirements.txt</span><br></pre></td></tr></table></figure><p><strong>导出/安装 requirements.txt:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 导出</span><br><span class="line">pip freeze &gt; &lt;目录&gt;/requirements.txt</span><br><span class="line"># 安装</span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;国内镜像源的配置&quot;&gt;&lt;a href=&quot;#国内镜像源的配置&quot; class=&quot;headerlink&quot; title=&quot;国内镜像源的配置&quot;&gt;&lt;/a&gt;国内镜像源的配置&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;在用户目录下新建pip目录&lt;/li&gt;
&lt;li&gt;在pip目录下新建pip.ini配
      
    
    </summary>
    
      <category term="Pip" scheme="https://ojerk.cn/categories/Pip/"/>
    
    
      <category term="Pip" scheme="https://ojerk.cn/tags/Pip/"/>
    
  </entry>
  
  <entry>
    <title>Python入门_3讲</title>
    <link href="https://ojerk.cn/Python%E5%85%A5%E9%97%A8-3%E8%AE%B2/"/>
    <id>https://ojerk.cn/Python入门-3讲/</id>
    <published>2018-10-12T04:50:49.000Z</published>
    <updated>2019-01-03T08:58:07.964Z</updated>
    
    <content type="html"><![CDATA[<h1 id="爬虫超光速入门"><a href="#爬虫超光速入门" class="headerlink" title="爬虫超光速入门"></a>爬虫超光速入门</h1><h2 id="什么是爬虫"><a href="#什么是爬虫" class="headerlink" title="什么是爬虫?"></a>什么是爬虫?</h2><p>请求网站并提取数据的自动化程序</p><h2 id="爬虫的基本流程"><a href="#爬虫的基本流程" class="headerlink" title="爬虫的基本流程"></a>爬虫的基本流程</h2><p><img src="爬虫流程.png" alt="爬虫流程"></p><ol><li>通过HTTP库向目标站点发起请求，即发送一个Request，请求可以包含额外的headers等信息，等待服务器响应</li><li>如果服务器能正常响应，会得到一个Response，Response的内容便是所要获取的页面内容，类型可能有HTML，Json字符串，二进制数据（如图片视频）等类型</li><li>得到的内容可能是HTML，可以用正则表达式、网页解析库进行解析。可能是Json，可以直接转为Json对象解析，可能是二进制数据，可以做保存或者进一步的处理</li><li>保存形式多样，可以存为文本，也可以保存至数据库，或者保存特定格式的文件</li></ol><h2 id="爬虫基本原理解析"><a href="#爬虫基本原理解析" class="headerlink" title="爬虫基本原理解析"></a>爬虫基本原理解析</h2><p><strong>Request中包含什么？</strong></p><ul><li>请求方式:主要有GET、POST两种类型，另外还有HEAD、PUT、DELETE、OPTIONS等。</li><li>请求url: URL全称统一资源定位符，如一个网页文档、一张图片、一个视频等都可以用URL唯一来确定。</li><li>请求头: 包含请求时的头部信息，如User-Agent、Host、Cookies等信息。</li><li>请求体: 请求时额外携带的数据,如表单提交时的表单数据</li></ul><p><strong>Response中包含什么？</strong></p><ul><li>响应状态: 有多种响应状态，如200代表成功、301跳转、404找不到页面、502服务器错误</li><li>响应头: 如内容类型、内容长度、服务器信息、设置Cookie等等。</li><li>响应体: 最主要的部分，包含了请求资源的内容，如网页HTML、图片二进制数据等。</li></ul><p><strong>能抓怎样的数据？</strong></p><ul><li>网页文本: 如HTML文档、Json格式文本等。</li><li>图片: 获取到的是二进制文件，保存为图片格式。</li><li>视屏: 同为二进制文件，保存为视频格式即可!</li><li>其他: 只要是能请求到的，都能获取</li></ul><p><strong>常用的解析方法:</strong></p><ul><li>直接处理</li><li>json解析</li><li>正则表达式</li><li>BeautifulSoup</li><li>PyQuery</li><li>XPath</li></ul><p><strong>解决JavaScript渲染问题的常用方法？</strong></p><ul><li>分析Ajax请求</li><li>通过Selenium/WebDriver</li></ul><p><strong>怎样保存数据？</strong></p><ul><li>文本: 纯文本、Json、Xml等</li><li>关系型数据库: 如MySQL、Oracle、SQL Server等具有结构化表结构形式存储</li><li>非关系型数据库: 如MongoDB、Redis等Key-Value形式存储</li><li>二进制文件: 如图片、视频、音频等等直接保存成特定格式即可</li></ul><h2 id="实战演练"><a href="#实战演练" class="headerlink" title="实战演练"></a>实战演练</h2><p>来不及解释了,快上车!!!</p><p><img src="任务.png" alt="任务"></p><p>我知道你们肯定懒得输地址: <a href="http://www.17k.com/book/271047.html" target="_blank" rel="noopener">http://www.17k.com/book/271047.html</a> </p><h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><p>python3的安装包在我们提供的资料里有</p><ul><li>安装python3(如果不清楚请<a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014316090478912dab2a3a9e8f4ed49d28854b292f85bb000" target="_blank" rel="noopener">猛击这里</a>)</li><li>验证python是否安装成功</li><li>安装爬虫依赖库<ul><li>进入爬虫项目 <strong>CreepFiction</strong> 目录下</li><li>在任意空白处,按住Shift+鼠标右键选择<strong>在此处打开powershell窗口</strong></li><li>在命令行输入 pip install -r requirements.txt 并回车</li></ul></li></ul><h3 id="执行爬虫"><a href="#执行爬虫" class="headerlink" title="执行爬虫"></a>执行爬虫</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在命令行输入 python creep_start.py 并回车</span><br></pre></td></tr></table></figure><p><strong>查看抓取的结果:</strong></p><p><img src="结果.png" alt="结果"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;爬虫超光速入门&quot;&gt;&lt;a href=&quot;#爬虫超光速入门&quot; class=&quot;headerlink&quot; title=&quot;爬虫超光速入门&quot;&gt;&lt;/a&gt;爬虫超光速入门&lt;/h1&gt;&lt;h2 id=&quot;什么是爬虫&quot;&gt;&lt;a href=&quot;#什么是爬虫&quot; class=&quot;headerlink&quot; ti
      
    
    </summary>
    
      <category term="Train" scheme="https://ojerk.cn/categories/Train/"/>
    
    
      <category term="Train" scheme="https://ojerk.cn/tags/Train/"/>
    
      <category term="爬虫" scheme="https://ojerk.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Numpy里nan,inf的快速转换</title>
    <link href="https://ojerk.cn/Numpy%E9%87%8Cnan-inf%E7%9A%84%E5%BF%AB%E9%80%9F%E8%BD%AC%E6%8D%A2/"/>
    <id>https://ojerk.cn/Numpy里nan-inf的快速转换/</id>
    <published>2018-10-11T01:37:16.000Z</published>
    <updated>2019-12-05T13:48:01.182Z</updated>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>在处理np.ndarray时,当数组里有nan,inf时,得到的结果往往和我们的预期不大符合,比如当我们计算累加时:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">nn = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, np.nan])</span><br><span class="line">print(nn.sum())</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nan</span><br></pre></td></tr></table></figure><p>原因其实很简单,Python里nan,inf对象都具有传播特性,这时候就需要我们把nan或inf转换成我们需要的值</p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>numpy.nan_to_num(x, copy=True)</p><ul><li>x: array_like</li><li>copy=True时,不对原数据进行修改</li><li>数组里nan变为0, inf(-inf)变为有限大的一个数</li><li>return: ndarray, 返回的结果拥有和原数据相同的shape,dtype变为数组里最精准的类型</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.set_printoptions(precision=<span class="number">4</span>)</span><br><span class="line">x = np.array([np.inf, -np.inf, np.nan, <span class="number">-128</span>, <span class="number">128</span>])</span><br><span class="line">np.nan_to_num(x)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([ 1.7977e+308, -1.7977e+308,  0.0000e+000, -1.2800e+002,</span><br><span class="line">        1.2800e+002])</span><br></pre></td></tr></table></figure><h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nan_inf2zero</span><span class="params">(array)</span>:</span></span><br><span class="line">    where_are_nan = np.isnan(array)</span><br><span class="line">    where_are_inf = np.isinf(array)</span><br><span class="line">    array[where_are_nan] = <span class="number">0</span></span><br><span class="line">    array[where_are_inf] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> array</span><br><span class="line"></span><br><span class="line">x = np.array([np.inf, -np.inf, np.nan, <span class="number">-128</span>, <span class="number">128</span>])</span><br><span class="line">result = nan_inf2zero(x)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([   0.,    0.,    0., -128.,  128.])</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;在处理np.ndarray时,当数组里有nan,inf时,得到的结果往往和我们的预期不大符合,比如当我们计算累加时:&lt;/p&gt;
&lt;figure
      
    
    </summary>
    
      <category term="Numpy" scheme="https://ojerk.cn/categories/Numpy/"/>
    
    
      <category term="Numpy" scheme="https://ojerk.cn/tags/Numpy/"/>
    
  </entry>
  
  <entry>
    <title>Python入门_2讲</title>
    <link href="https://ojerk.cn/Python%E5%85%A5%E9%97%A8-2%E8%AE%B2/"/>
    <id>https://ojerk.cn/Python入门-2讲/</id>
    <published>2018-09-28T06:46:31.000Z</published>
    <updated>2019-01-03T08:57:59.495Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python入门-2讲"><a href="#Python入门-2讲" class="headerlink" title="Python入门_2讲"></a>Python入门_2讲</h1><h2 id="上节课的回顾"><a href="#上节课的回顾" class="headerlink" title="上节课的回顾"></a>上节课的回顾</h2><ul><li>Python里的关键字</li><li>神器的存储机制(指针问题)</li><li>回顾一下上节课的牛刀大试</li></ul><h2 id="Python-里主要的数据类型"><a href="#Python-里主要的数据类型" class="headerlink" title="Python 里主要的数据类型"></a>Python 里主要的数据类型</h2><h3 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h3><p>在讲基本的数据类型之前,我们先简单的了解一下Python里关于序列的简单概念</p><p>序列具备的基本特点:</p><ul><li>序列是Python中最基本的数据结构</li><li>序列中的每个元素都分配一个数字 - 它的位置，或索引，第一个索引是0，第二个索引是1，依此类推</li><li>序列都可以进行的操作包括索引，切片，加，乘，检查成员</li><li>Python已经内置确定序列的长度以及确定最大和最小的元素的方法</li><li>序列里面最常见的就是列表和元组</li></ul><h3 id="List-列表"><a href="#List-列表" class="headerlink" title="List(列表)"></a>List(列表)</h3><p>特点:</p><ul><li>列表中元素的类型可以不相同,甚至可以包含列表</li><li>列表是写在方括号([])之间、用逗号分隔开的元素列表</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line">names = [<span class="string">"AsyDogface"</span>, <span class="string">"Bnu"</span>, <span class="string">"Bistu"</span>, <span class="string">"Eric"</span>, <span class="string">"HelloKitty"</span>]</span><br><span class="line">print(names)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 访问列表中的值</span></span><br><span class="line">names[<span class="number">0</span>]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改列表</span></span><br><span class="line">names[<span class="number">1</span>] = <span class="string">"Python"</span></span><br><span class="line">names</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 增加</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法1</span></span><br><span class="line">names.append(<span class="string">"zhangsan"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2</span></span><br><span class="line">name2 = [<span class="string">"zhangsan"</span>]</span><br><span class="line">names += name2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法3</span></span><br><span class="line">name2 = [<span class="string">"zhangsan"</span>]</span><br><span class="line">names.extend(name2)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除列表里的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法1</span></span><br><span class="line"><span class="comment"># 通过下标删除</span></span><br><span class="line"><span class="keyword">del</span> names[<span class="number">1</span>]</span><br><span class="line">names</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2</span></span><br><span class="line"><span class="comment"># 删除指定元素</span></span><br><span class="line">names.remove(<span class="string">"Eric"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法3</span></span><br><span class="line">last_value = names.pop()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切片(重点掌握)</span></span><br><span class="line">names[<span class="number">1</span>:<span class="number">4</span>]  <span class="comment">#取下标1至下标4之间的数字，包括1，不包括4(前闭后开)</span></span><br><span class="line">names[<span class="number">1</span>:<span class="number">-1</span>] <span class="comment">#取下标1至-1的值，不包括-1</span></span><br><span class="line">names[<span class="number">0</span>:<span class="number">3</span>]</span><br><span class="line">names[:<span class="number">3</span>] <span class="comment">#如果是从头开始取，0可以忽略，跟上句效果一样</span></span><br><span class="line">names[<span class="number">3</span>:] <span class="comment">#如果想取最后一个，必须不能写-1，只能这么写</span></span><br><span class="line">names[<span class="number">3</span>:<span class="number">-1</span>] <span class="comment">#这样-1就不会被包含了</span></span><br><span class="line">names[<span class="number">0</span>::<span class="number">2</span>] <span class="comment">#后面的2是代表，每隔一个元素，就取一个</span></span><br><span class="line">names[::<span class="number">2</span>] <span class="comment">#和上句效果一样</span></span><br></pre></td></tr></table></figure><p><strong>常用方法:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计</span></span><br><span class="line">names.count(<span class="string">"Bnu"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 排序</span></span><br><span class="line">numbers = [<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">99</span>]</span><br><span class="line">numbers.sort()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 翻转</span></span><br><span class="line">names.reverse()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取下标</span></span><br><span class="line">names.index(<span class="string">"Bnu"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环</span></span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">    print(name)</span><br></pre></td></tr></table></figure><p><strong>关于列表的一些扩展:</strong></p><p>列表推导式:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vec = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</span><br><span class="line">[[x, x**<span class="number">2</span>] <span class="keyword">for</span> x <span class="keyword">in</span> vec] <span class="comment"># result:[[2, 4], [4, 16], [6, 36]]</span></span><br><span class="line"><span class="comment"># 我们可以用 if 子句作为过滤器</span></span><br><span class="line">[<span class="number">3</span>*x <span class="keyword">for</span> x <span class="keyword">in</span> vec <span class="keyword">if</span> x &gt; <span class="number">3</span>] <span class="comment"># result:[12, 18]</span></span><br></pre></td></tr></table></figure><p>循环里的一些技巧:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vec1 = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</span><br><span class="line">vec2 = [<span class="number">4</span>, <span class="number">3</span>, <span class="number">-9</span>]</span><br><span class="line">[x*y <span class="keyword">for</span> x <span class="keyword">in</span> vec1 <span class="keyword">for</span> y <span class="keyword">in</span> vec2] <span class="comment"># result:[8, 6, -18, 16, 12, -36, 24, 18, -54]</span></span><br><span class="line">[vec1[i]*vec2[i] <span class="keyword">for</span> i <span class="keyword">in</span> range(len(vec1))] <span class="comment"># result:[8, 12, -54]</span></span><br></pre></td></tr></table></figure><p>以下实例将3X4的矩阵列表转换为4X3列表：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> matrix = [</span><br><span class="line">     [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">     [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">     [<span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>], ]</span><br><span class="line"></span><br><span class="line">[[row[i] <span class="keyword">for</span> row <span class="keyword">in</span> matrix] <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>)] <span class="comment"># result:[[1, 5, 9], [2, 6, 10], [3, 7, 11], [4, 8, 12]]</span></span><br></pre></td></tr></table></figure><p><strong>牛刀: 还试呐?</strong></p><p>问题: 有这么个列表 [8, 0, 1, 7, 4, 6, 9, 1, 2, 6, 5, 6, 0, 5, 3, 4, 5, 9, 8, 3] 打印出列表里面数为9的索引值</p><h3 id="Tuple-元组"><a href="#Tuple-元组" class="headerlink" title="Tuple(元组)"></a>Tuple(元组)</h3><ul><li>元组其实跟列表差不多，也是存一组数，只不是它一旦创建，便不能再修改，所以又叫只读列表</li><li>元组中只包含一个元素时，需要在元素后面添加逗号，否则括号会被当作运算符使用</li><li>它只有2个方法，一个是count,一个是index</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"></span><br><span class="line">names = (<span class="string">"alex"</span>,<span class="string">"jack"</span>,<span class="string">"eric"</span>)</span><br><span class="line">print(<span class="string">"names的类型:"</span>,type(names))</span><br><span class="line">print(<span class="string">"names的值:"</span>,names)</span><br></pre></td></tr></table></figure><h3 id="Dictionary-字典"><a href="#Dictionary-字典" class="headerlink" title="Dictionary(字典)"></a>Dictionary(字典)</h3><ul><li>字典是无序的</li><li>字典当中的元素是通过键来存取的，而不是通过索引(偏移量)存取</li><li>字典是一种映射类型，字典用”{ }”标识，它是一个无序的键(key) : 值(value)对集合</li><li>在同一个字典中，键(key)必须是唯一的</li><li>键必须不可变，所以可以用数字，字符串或元组充当，而用列表就不行</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line">info = &#123;</span><br><span class="line">    <span class="string">'stu1'</span>: <span class="string">"TengLan Wu"</span>,</span><br><span class="line">    <span class="string">'stu2'</span>: <span class="string">"LongZe Luola"</span>,</span><br><span class="line">    <span class="string">'stu3'</span>: <span class="string">"XiaoZe Maliya"</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法1</span></span><br><span class="line">info.get(<span class="string">"stu1"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2</span></span><br><span class="line">info[<span class="string">"stu1"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法1和方法2有什么区别?</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 增加</span></span><br><span class="line">info[<span class="string">"stu4"</span>] = <span class="string">"cangjingkong"</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改</span></span><br><span class="line">info[<span class="string">"stu4"</span>] = <span class="string">"wutenglan"</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法1</span></span><br><span class="line">info.pop(<span class="string">"stu4"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2</span></span><br><span class="line"><span class="keyword">del</span> info[<span class="string">"stu1"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法3</span></span><br><span class="line"><span class="comment"># 随机删除</span></span><br><span class="line">info.popitem()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字典的嵌套</span></span><br><span class="line"></span><br><span class="line">av_catalog = &#123;</span><br><span class="line">    <span class="string">"欧美"</span>:&#123;</span><br><span class="line">        <span class="string">"www.youporn.com"</span>: [<span class="string">"很多免费的,世界最大的"</span>,<span class="string">"质量一般"</span>],</span><br><span class="line">        <span class="string">"www.pornhub.com"</span>: [<span class="string">"很多免费的,也很大"</span>,<span class="string">"质量比yourporn高点"</span>],</span><br><span class="line">        <span class="string">"letmedothistoyou.com"</span>: [<span class="string">"多是自拍,高质量图片很多"</span>,<span class="string">"资源不多,更新慢"</span>],</span><br><span class="line">        <span class="string">"x-art.com"</span>:[<span class="string">"质量很高,真的很高"</span>,<span class="string">"全部收费,屌比请绕过"</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"日韩"</span>:&#123;</span><br><span class="line">        <span class="string">"tokyo-hot"</span>:[<span class="string">"质量怎样不清楚,个人已经不喜欢日韩范了"</span>,<span class="string">"听说是收费的"</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"大陆"</span>:&#123;</span><br><span class="line">        <span class="string">"1024"</span>:[<span class="string">"全部免费,真好,好人一生平安"</span>,<span class="string">"服务器在国外,慢"</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">av_catalog[<span class="string">"大陆"</span>][<span class="string">"1024"</span>][<span class="number">1</span>] += <span class="string">",可以用爬虫爬下来"</span></span><br><span class="line">print(av_catalog[<span class="string">"大陆"</span>][<span class="string">"1024"</span>])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 循环</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#方法1</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> info:</span><br><span class="line">    print(key,info[key])</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法2</span></span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> info.items(): <span class="comment">#会先把dict转成list,数据里大时莫用</span></span><br><span class="line">    print(k,v)</span><br></pre></td></tr></table></figure><h3 id="Set-集合"><a href="#Set-集合" class="headerlink" title="Set(集合)"></a>Set(集合)</h3><p>特点:</p><ul><li>一个无序不重复元素的序列</li><li>基本功能是进行成员关系测试和删除重复元素</li><li>可以使用大括号 { } 或者 set() 函数创建集合，注意：创建一个空集合必须用 set() 而不是 { }，因为 { } 是用来创建一个空字典</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个唯一字符的集合</span></span><br><span class="line">set(<span class="string">"Hello"</span>)  </span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个数值集合  </span></span><br><span class="line">set([<span class="number">3</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">10</span>])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关系测试</span></span><br><span class="line"></span><br><span class="line">s = set(<span class="string">"Hi"</span>) </span><br><span class="line">t = set(<span class="string">"Hello"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = t|s          <span class="comment"># t 和 s的并集  </span></span><br><span class="line">b = t&amp;s          <span class="comment"># t 和 s的交集 </span></span><br><span class="line">c = t-s          <span class="comment"># 求差集（项在t中，但不在s中）</span></span><br><span class="line">d = t^s          <span class="comment"># 对称差集（项在t或s中，但不会同时出现在二者中）</span></span><br></pre></td></tr></table></figure><h4 id="牛刀大大大大试"><a href="#牛刀大大大大试" class="headerlink" title="牛刀大大大大试"></a>牛刀大大大大试</h4><p>任务二:<br>编写一个多级菜单,要求实现:</p><ul><li>三级菜单</li><li>可依次选择进入、退出各子菜单</li></ul><p>完成一级菜单 / 二级菜单</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python入门-2讲&quot;&gt;&lt;a href=&quot;#Python入门-2讲&quot; class=&quot;headerlink&quot; title=&quot;Python入门_2讲&quot;&gt;&lt;/a&gt;Python入门_2讲&lt;/h1&gt;&lt;h2 id=&quot;上节课的回顾&quot;&gt;&lt;a href=&quot;#上节课的回顾&quot; cla
      
    
    </summary>
    
      <category term="Train" scheme="https://ojerk.cn/categories/Train/"/>
    
    
      <category term="Train" scheme="https://ojerk.cn/tags/Train/"/>
    
  </entry>
  
  <entry>
    <title>Python入门_1讲</title>
    <link href="https://ojerk.cn/Python%E5%85%A5%E9%97%A8-1%E8%AE%B2/"/>
    <id>https://ojerk.cn/Python入门-1讲/</id>
    <published>2018-09-19T11:10:54.000Z</published>
    <updated>2019-01-03T08:57:51.480Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python入门-1讲"><a href="#Python入门-1讲" class="headerlink" title="Python入门_1讲"></a>Python入门_1讲</h1><p>关于本人培训之前需要注意的几点:</p><ul><li>培训的通知, 培训资料的下载(<a href="http://www.superli.tech/categories/Train/" target="_blank" rel="noopener">无敌传送门</a>)</li><li>课后问题的回复</li><li>本人的一些情况</li><li><a href="https://github.com/Easy318/MyPicture/blob/master/%E5%9B%BE%E5%BD%A2%E6%A8%A1%E6%9D%BF/%E8%AF%BE%E7%A8%8B%E5%A4%A7%E7%BA%B2.png?raw=true" target="_blank" rel="noopener">课程大纲</a></li></ul><h2 id="Python-里的基本概念"><a href="#Python-里的基本概念" class="headerlink" title="Python 里的基本概念"></a>Python 里的基本概念</h2><h3 id="程序的注释"><a href="#程序的注释" class="headerlink" title="程序的注释"></a>程序的注释</h3><p>Python的编译器会忽略注释掉的文本,但是,作为文档,它对程序的阅读者是很有帮助的</p><p>基本的使用:</p><ul><li>单行注释使用 <strong>#</strong></li><li>多行注释使用 <strong>3个单引号或者3个双引号括</strong> 起来的一个字符串</li></ul><h3 id="标识符的拼写和命名惯例"><a href="#标识符的拼写和命名惯例" class="headerlink" title="标识符的拼写和命名惯例"></a>标识符的拼写和命名惯例</h3><ul><li>Python 对大小写敏感(区分大小写)</li><li>标识符由字母、数字和下划线组成</li><li>标识符必须是字母或下划线( _ )开头</li><li>不能以关键字(保留字)命名</li></ul><p>Python里面的关键字:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> keyword</span><br><span class="line">print(keyword.kwlist)</span><br></pre></td></tr></table></figure><p>命名规范:</p><ul><li>为什么使用命名规范<ul><li>程序员们为了自己的代码能更容易的在同行之间交流，所以多采取统一的可读性比较好的命名方式</li><li>驼峰式命名法 / 下划线法</li></ul></li><li>类名采用大驼峰式命名,即首字母需要大写</li><li>模块、变量、函数和方法名称可以凭自己喜好使用 驼峰式命名法 / 下划线法</li><li>当一个变量名是一个常量的时候所有字母大写</li></ul><p>概念补充：</p><ul><li>驼峰式命名： 骆驼式命名法就是当变量名或函数名是由一个或多个单词连结在一起，而构成的唯一识别字时，第一个单词以小写字母开始，从第二个单词开始以后的每个单词的首字母都采用大写字母，例如：myFirstName、myLastName，这样的变量名看上去就像骆驼峰一样此起彼伏</li><li>下划线命名法： 逻辑断点之间用下划线连接，字母全部小写，例如： my_firstname, my_lastname</li></ul><h3 id="行与缩进"><a href="#行与缩进" class="headerlink" title="行与缩进"></a>行与缩进</h3><p>Python使用缩进来表示代码块,而不是{},缩进的空格数是可变的，但是同一个代码块的语句必须包含相同的缩进空格数, 为了统一,一般使用4个空格来进行缩进</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 标准</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">False</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"False"</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 非标准</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">False</span>:</span><br><span class="line">   <span class="keyword">print</span> (<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"False"</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 错误</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">False</span>:</span><br><span class="line">   <span class="keyword">print</span> (<span class="string">"True"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"False"</span>)</span><br><span class="line">   print(<span class="string">"Hello, world"</span>)</span><br></pre></td></tr></table></figure><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>只介绍基本的数据类型:</p><table><thead><tr><th>数据类型</th><th>例子</th></tr></thead><tbody><tr><td>Number（数字)</td><td>int,long,float,complex</td></tr><tr><td>String（字符串)</td><td>“BNU”</td></tr><tr><td>List（列表)</td><td>[1,2,3],[1,2,3,[1,2,3],4]</td></tr><tr><td>Dictionary（字典)</td><td>{1:”nihao”,2:”hello”}</td></tr><tr><td>Tuple（元组)</td><td>(1,2,3,abc)</td></tr><tr><td>Bool（布尔)</td><td>True、False</td></tr></tbody></table><p><strong>变量的声明:</strong> 因为在Python里面一切皆对象, 任何变量都可以指定为任何类型的一个值,所以不需要为该变量声明为某一个类型,这和很多其他语言中的情况不太一样, 但是请记住,所有的值和对象都是有类型的,而且类型错误一定会进行检查</p><p>一个简单的赋值操作:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">"Hello, Python"</span></span><br><span class="line">text</span><br></pre></td></tr></table></figure><h3 id="输出-输入"><a href="#输出-输入" class="headerlink" title="输出/输入"></a>输出/输入</h3><p><strong>输出:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(text)</span><br></pre></td></tr></table></figure><p><strong>输入:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user_input = input(<span class="string">"&gt;&gt;&gt;:"</span>)</span><br><span class="line">print(user_input)</span><br></pre></td></tr></table></figure><h3 id="逻辑判断"><a href="#逻辑判断" class="headerlink" title="逻辑判断"></a>逻辑判断</h3><p>Python条件语句是通过一条或多条语句的执行结果（True或者False）来决定执行的代码块</p><p>用图来简单表示:</p><p><img src="条件控制.png" alt="条件控制"></p><p>Python中if语句的一般形式如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition_1:</span><br><span class="line">    statement_block_1</span><br><span class="line"><span class="keyword">elif</span> condition_2:</span><br><span class="line">    statement_block_2</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    statement_block_3</span><br></pre></td></tr></table></figure><ul><li>如果 “condition_1” 为 True 将执行 “statement_block_1” 块语句</li><li>如果 “condition_1” 为False，将判断 “condition_2”</li><li>如果”condition_2” 为 True 将执行 “statement_block_2” 块语句</li><li>如果 “condition_2” 为False，将执行”statement_block_3”块语句</li></ul><p><strong>注意:</strong></p><ul><li>Python 中用 elif 代替了 else if，所以if语句的关键字为：if – elif – else</li><li>每个条件后面要使用冒号 :，表示接下来是满足条件后要执行的语句块</li><li>使用缩进来划分语句块，相同缩进数的语句在一起组成一个语句块</li><li>在Python中没有switch – case语句</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 评级</span></span><br><span class="line">score = <span class="number">90</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="number">0</span> &lt; score &lt;= <span class="number">60</span>:</span><br><span class="line">    print(<span class="string">"不及格"</span>)</span><br><span class="line"><span class="keyword">elif</span> <span class="number">60</span> &lt; score &lt;= <span class="number">90</span>:</span><br><span class="line">    print(<span class="string">"良好"</span>)</span><br><span class="line"><span class="keyword">elif</span> <span class="number">90</span> &lt; score &lt;=<span class="number">100</span>:</span><br><span class="line">    print(<span class="string">"优秀"</span>)</span><br></pre></td></tr></table></figure><p>牛刀小试: <strong>猜数字游戏</strong></p><p>操作中…</p><h3 id="逻辑循环"><a href="#逻辑循环" class="headerlink" title="逻辑循环"></a>逻辑循环</h3><p>Python中的循环语句有 for 和 while</p><p><strong>注意:</strong> 切勿把程序写成死循环</p><h4 id="while-loop"><a href="#while-loop" class="headerlink" title="while loop"></a>while loop</h4><p>简单的用流程图表示为:</p><p><img src="whileloop.png" alt="whileloop"></p><p>基本句法:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 判断条件：</span><br><span class="line">    语句</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="keyword">while</span> 判断条件:</span><br><span class="line">    成立则执行该语句</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    不成立则执行该语句然后退出</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 循环10次:</span></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    print(<span class="string">"你是风儿我是沙,缠缠绵绵到天涯..."</span>,count)</span><br><span class="line">    count +=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> count == <span class="number">10</span>:</span><br><span class="line">        print(<span class="string">"What the hell 风和沙,你们这些bad guy.."</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">5</span>:</span><br><span class="line">   <span class="keyword">print</span> (count, <span class="string">" 小于 5"</span>)</span><br><span class="line">   count = count + <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">   <span class="keyword">print</span> (count, <span class="string">" 大于或等于 5"</span>)</span><br></pre></td></tr></table></figure><h4 id="for-语句"><a href="#for-语句" class="headerlink" title="for 语句"></a>for 语句</h4><p>Python for循环可以遍历任何序列的项目，如一个列表或者一个字符串</p><p>for循环的一般格式如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &lt;variable&gt; <span class="keyword">in</span> &lt;sequence&gt;:</span><br><span class="line">    &lt;statements&gt;</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    &lt;statements&gt;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打印10个数</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    print(<span class="string">"loop:"</span>, i )</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"循环完毕"</span>)</span><br></pre></td></tr></table></figure><p><strong>关于 continu与break 用法:</strong></p><p>需求一：还是上面的程序，但是遇到小于5的循环次数就不走了，直接跳入下一次循环</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span> i&lt;<span class="number">5</span>:</span><br><span class="line">        <span class="keyword">continue</span> <span class="comment">#不往下走了,直接进入下一次loop</span></span><br><span class="line">    print(<span class="string">"loop:"</span>, i )</span><br></pre></td></tr></table></figure><p>需求二：还是上面的程序，但是遇到大于5的循环次数就不走了，直接退出</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span> i&gt;<span class="number">5</span>:</span><br><span class="line">        <span class="keyword">break</span> <span class="comment">#不往下走了,直接跳出整个loop</span></span><br><span class="line">    print(<span class="string">"loop:"</span>, i )</span><br></pre></td></tr></table></figure><h3 id="牛刀大试"><a href="#牛刀大试" class="headerlink" title="牛刀大试"></a>牛刀大试</h3><p>回到上面for 循环的例子，如何实现让用户不断的猜年龄，但用户最多只有3次猜的机会，再猜不对就退出程序</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python入门-1讲&quot;&gt;&lt;a href=&quot;#Python入门-1讲&quot; class=&quot;headerlink&quot; title=&quot;Python入门_1讲&quot;&gt;&lt;/a&gt;Python入门_1讲&lt;/h1&gt;&lt;p&gt;关于本人培训之前需要注意的几点:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;培训的通
      
    
    </summary>
    
      <category term="Train" scheme="https://ojerk.cn/categories/Train/"/>
    
    
      <category term="Train" scheme="https://ojerk.cn/tags/Train/"/>
    
  </entry>
  
  <entry>
    <title>一个部落</title>
    <link href="https://ojerk.cn/game/"/>
    <id>https://ojerk.cn/game/</id>
    <published>2018-09-19T11:01:12.000Z</published>
    <updated>2019-01-22T02:25:05.848Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一个部落不完全指北"><a href="#一个部落不完全指北" class="headerlink" title="一个部落不完全指北"></a>一个部落不完全指北</h1><blockquote><p>更新时间: 2019年1月21日16:26:01</p></blockquote><h2 id="部落简介"><a href="#部落简介" class="headerlink" title="部落简介"></a>部落简介</h2><p><strong>创建历史:</strong><br>  部落成立于好几年前,由一儿子提出众父亲附议而创建,部落名灵感来源于周星驰&lt;&lt;鹿鼎记&gt;&gt;里”有间客栈”.刚开始本只打算宿舍内部休闲消遣就行,然发现开个部落战马蛋要10人,遂决定扩招,经过大家不断努力发展到了30人左右,而且居然还有妹子,但是随着毕业的日子越来越近,学渣忙着补考,学霸忙着考研,以及等等各种鸭梨,慢慢的很多人都AFK了,期间爸爸们的心血<del>差点毁于@不及阁@屌炸天的小兵手上</del>交于认真负责的@屌炸天的小兵细心打理,于2019年1月21日15:50:34还往前翻个几星期,发现毕业以后基本上联系的机会变少了,但是父子间的感情是不能够淡的,就决定重建部落</p><h2 id="招人要求"><a href="#招人要求" class="headerlink" title="招人要求"></a>招人要求</h2><p>截止2019年1月21日16:05:35部落情况:</p><p><img src="部落.png" alt="部落简介"><br><img src="部落竞赛.png" alt="部落竞赛"></p><p>部落于前不久以惊人的速度复活了!在这先感谢给为大佬的努力!!!<del>首领菊花献上先</del><br>部落代码: #P2J80YL0<br>微信: lc571347851<br>加入我们部落的暗号: <strong>一个部落牛批</strong><br>部落人员构造: 几乎都是研究生和刚毕业不久的愣头青(都是单身帅气的小哥哥哦!)<br>等级: 9~10本居多<br>部落风格: 娱乐里tou着认真</p><p>So,综上:</p><ul><li>部落战频率偏高,学生考试期间,其他特殊时段,将会有一段休战期</li><li>也欢迎休闲活跃的玩家</li><li>部落城堡不得低于7本,<del>当然你也可以使劲跟首领Py</del></li><li>这里不是互刷部落</li><li>能够认真看完我们落规</li><li>妹子可以无视上面条件加入,<del>首领说的</del>,<del>大屌萌妹请自爱</del></li></ul><p>什么人适合我们部落:</p><ul><li>学生</li><li>刚毕业没多久的小哥哥小姐姐</li><li>喜欢结交朋友</li><li>3星大手</li><li><del>热爱生活(我tao这条什么鬼)</del></li><li>有团队意识</li><li>不仅限于coc游戏交流,我们微信群里还有Dota4000分大神,LOL大师大手,吃鸡自走人形挂,王者荣耀金手指…</li></ul><h2 id="部落相关规定"><a href="#部落相关规定" class="headerlink" title="部落相关规定"></a>部落相关规定</h2><h3 id="部落战"><a href="#部落战" class="headerlink" title="部落战"></a>部落战</h3><ul><li>规则同样适用于部落联赛</li><li>部落战除特殊时期,基本上连开</li><li>部落战开始搜索对战时间统一定为晚上10点左右,方便大佬捐兵</li><li>参战人员从挂绿牌的队员中选出,所以请管理好自己的牌子</li><li>部落战务必引援</li><li>部落战技巧可以请教<del>部落首领</del>部落里三星大佬</li><li>部落战流派不做硬性规定(能三星同本的流派就是好流派)</li><li>屌丝兵 乱打 / 不打, 导致部落战失败会及时处理(这属于消极应战)</li><li>部落战紧急要兵可以到微信群要,等级高的大佬们白天都在上班,平时没时间老盯着游戏</li></ul><h3 id="部落联赛"><a href="#部落联赛" class="headerlink" title="部落联赛"></a>部落联赛</h3><ul><li>都报名参加,每胜利一场,参加了即使没上场也有奖励</li><li>在能保证胜利的前提下,将会派出低本出战</li></ul><h3 id="部落联赛奖励发放"><a href="#部落联赛奖励发放" class="headerlink" title="部落联赛奖励发放"></a>部落联赛奖励发放</h3><ul><li>首先将会分出一份发给联赛结束时部落里最活跃的队员(<a href="#关于活跃与不活跃">什么是最活跃的队员?</a>)</li><li>然后会分出3份发给最先完成<strong>部落竞赛</strong>任务的<strong>前3名</strong>(依次往下)</li><li>如果剩下还有,将会发给部落联赛表现积极的队员</li></ul><h3 id="部落驻军"><a href="#部落驻军" class="headerlink" title="部落驻军"></a>部落驻军</h3><ul><li>20单位: 1龙</li><li>25单位: 1龙 + MM / 法师 / 气球</li><li>30单位以上: 1龙/1狗 + 气球</li></ul><h2 id="关于平时捐兵"><a href="#关于平时捐兵" class="headerlink" title="关于平时捐兵"></a>关于平时捐兵</h2><ul><li>部落提供了两个捐兵脚本</li><li>部落不反对使用脚本,但是请使用脚本的同学把<strong>请求增援</strong>这个选项关了</li><li>除非特殊要求,请不要捐赠黄毛,炸弹人,哥布林,如果有人举报将会被处理</li><li>理论上你可以在请求援兵上提出任何要求,比如”给我来满级XXX”,但是要求越高你可能得到的增援时间越长</li><li>短时间内立马的到增援的办法:<ul><li>向脚本要</li><li>降低要求</li><li><del>和大佬Py</del></li><li>微信群</li></ul></li></ul><p>脚本捐兵细则:</p><ul><li>脚本只能识别中文不能识别英文</li><li>脚本目前只提供增援 <strong>胖子,MM</strong>,以后会扩充法师,气球,武神</li><li>凡识别到 <strong>不 / 除 / 部落战</strong> 关键字,将不会获得增援</li><li>识别到 <strong>随意</strong> 关键字将会获得MM</li><li>如果遵照以上仍然还没获得增援,那是因为脚本还没造好兵,又或者拉闸了…</li></ul><h2 id="清人"><a href="#清人" class="headerlink" title="清人"></a>清人</h2><ul><li>参加部落战后: 不打 / 瞎打 导致部落战失败(你可以手残,但是请不要瞎jer打)</li><li>屡次违反落规的铁头娃娃</li><li>当部落人数超过45人时,将会清理不活跃队员(<a href="#关于活跃与不活跃">不活跃?</a>)</li></ul><p><strong>补充:</strong>低本可以不捐兵,目前部落对捐兵人数没有做强制性安排,因为大家都很自觉</p><h2 id="关于活跃与不活跃"><a href="#关于活跃与不活跃" class="headerlink" title="关于活跃与不活跃"></a>关于活跃与不活跃</h2><p>根据官方数据会有如下统计:<br><img src="活跃与不活跃.png" alt="活跃与不活跃"></p><p>我们科比大佬(KOBE BRYANT)就是最活跃玩家,而二营长就很危险了</p><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><ul><li>这只是第一版规定,肯定有诸多不成熟和不适合我们部落的地方,希望部落成员积极提出自己的看法和意见</li><li>谢谢各位大佬能够看完</li></ul><blockquote><p>以上所有最终解释权归一个部落所有</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;一个部落不完全指北&quot;&gt;&lt;a href=&quot;#一个部落不完全指北&quot; class=&quot;headerlink&quot; title=&quot;一个部落不完全指北&quot;&gt;&lt;/a&gt;一个部落不完全指北&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;更新时间: 2019年1月21日16:26:01&lt;/p&gt;

      
    
    </summary>
    
      <category term="Game" scheme="https://ojerk.cn/categories/Game/"/>
    
    
      <category term="Game" scheme="https://ojerk.cn/tags/Game/"/>
    
  </entry>
  
  <entry>
    <title>培训通知帖</title>
    <link href="https://ojerk.cn/%E5%9F%B9%E8%AE%AD%E9%80%9A%E7%9F%A5%E5%B8%96/"/>
    <id>https://ojerk.cn/培训通知帖/</id>
    <published>2018-09-18T06:58:41.000Z</published>
    <updated>2019-11-30T11:00:53.443Z</updated>
    
    <content type="html"><![CDATA[<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>今后(仅限本人)所有培训通知将会在此帖更新</p><h2 id="第一次培训通知"><a href="#第一次培训通知" class="headerlink" title="第一次培训通知"></a>第一次培训通知</h2><ul><li>培训时间: 2018/9/21</li><li>培训地点: 你们熟悉的教室</li><li>培训内容: Python入门_1讲</li><li>资料下载: <a href="https://pan.baidu.com/s/1fB2V2DI-0DblyUr57gj49w" target="_blank" rel="noopener">猛击这里获取</a></li></ul><h2 id="第二次培训通知"><a href="#第二次培训通知" class="headerlink" title="第二次培训通知"></a>第二次培训通知</h2><ul><li>培训时间: 2018/9/28</li><li>培训地点: 你们熟悉的教室</li><li>培训内容: Python入门_2讲</li><li>资料下载: <a href="https://pan.baidu.com/s/1CaTuV8SVFWjPVHiKMtUp5Q" target="_blank" rel="noopener">猛击这里获取</a></li></ul><h2 id="第三次培训通知"><a href="#第三次培训通知" class="headerlink" title="第三次培训通知"></a>第三次培训通知</h2><ul><li>培训时间: 2018/10/12</li><li>培训地点: 你们熟悉的教室</li><li>培训内容: Python入门_3讲</li><li>资料下载: <a href="https://pan.baidu.com/s/1KpCYkvNMFsX0ZjfyjrHL6w" target="_blank" rel="noopener">猛击这里获取</a></li></ul><h2 id="第四次培训通知-最后一次"><a href="#第四次培训通知-最后一次" class="headerlink" title="第四次培训通知(最后一次)"></a>第四次培训通知(最后一次)</h2><ul><li>培训时间: 2018/10/19</li><li>培训地点: 你们熟悉的教室</li><li>培训内容: Python入门_4讲</li><li>资料下载: <a href="https://pan.baidu.com/s/1hP3z69cdSSAA1_DiFDdwug" target="_blank" rel="noopener">猛击这里获取</a></li></ul><h2 id="最后更新时间"><a href="#最后更新时间" class="headerlink" title="最后更新时间"></a>最后更新时间</h2><p>2018年10月19日14:26:14</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h2&gt;&lt;p&gt;今后(仅限本人)所有培训通知将会在此帖更新&lt;/p&gt;
&lt;h2 id=&quot;第一次培训通知&quot;&gt;&lt;a href=&quot;#第一次培训通知&quot; class=&quot;h
      
    
    </summary>
    
      <category term="培训" scheme="https://ojerk.cn/categories/%E5%9F%B9%E8%AE%AD/"/>
    
    
      <category term="培训" scheme="https://ojerk.cn/tags/%E5%9F%B9%E8%AE%AD/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu下多用户版jupyterhub部署</title>
    <link href="https://ojerk.cn/Ubuntu%E4%B8%8B%E5%A4%9A%E7%94%A8%E6%88%B7%E7%89%88jupyterhub%E9%83%A8%E7%BD%B2/"/>
    <id>https://ojerk.cn/Ubuntu下多用户版jupyterhub部署/</id>
    <published>2018-08-23T11:11:14.000Z</published>
    <updated>2019-12-05T13:51:11.634Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Ubuntu下多用户版jupyterhub部署"><a href="#Ubuntu下多用户版jupyterhub部署" class="headerlink" title="Ubuntu下多用户版jupyterhub部署"></a>Ubuntu下多用户版jupyterhub部署</h1><p>最近培训关于Python的一些课程,因为面对的是一些不太了解编程的研究生,后期可能会遇到配置开发环境等等一系列问题,所以Leader决定在工作站部署一个多用户版的jupyterhub供大家学习使用.</p><p>需求:</p><ul><li>大家统一使用一个虚拟环境,解决重复配置开发环境问题</li><li>能够实现多用户登录,每人对应一个账号密码</li><li>改造一下登陆后的template,可以造成让大家以为这玩意儿是我们开发的假象~</li></ul><h2 id="环境部署"><a href="#环境部署" class="headerlink" title="环境部署"></a>环境部署</h2><p>本地环境:</p><ul><li>Python 3.5.2</li><li>Linux4.4.0-128-generic_x86_64</li></ul><h3 id="安装jupyterhub"><a href="#安装jupyterhub" class="headerlink" title="安装jupyterhub"></a>安装jupyterhub</h3><p>新建一个虚拟环境:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkvirtualenv jupyterhub</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 安装最新版本的npm/nodejs-legacy</span><br><span class="line">sudo apt-get install npm nodejs-legacy</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 安装hub和代理</span><br><span class="line">pip install jupyterhub</span><br><span class="line">npm install -g configurable-http-proxy</span><br><span class="line"><span class="meta">#</span> needed if running the notebook servers locally</span><br><span class="line">pip install notebook</span><br></pre></td></tr></table></figure><p>判断是否安装成功:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jupyterhub -h</span><br><span class="line">configurable-http-proxy -h</span><br></pre></td></tr></table></figure><p>启动:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> Visit https://localhost:8000,默认端口号8000</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> To start the Hub server, run the command</span><br><span class="line">jupyterhub</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> To allow multiple users to sign in to the Hub server, you must start jupyterhub as a privileged user, such as root</span><br><span class="line">sudo jupyterhub</span><br></pre></td></tr></table></figure><h3 id="jupyterhub配置"><a href="#jupyterhub配置" class="headerlink" title="jupyterhub配置"></a>jupyterhub配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 新建一个用户,用作管理所有jupyterhub下的账号信息</span><br><span class="line">adduser jpadmin</span><br><span class="line"><span class="meta">#</span> 新建一个普通测试用户</span><br><span class="line">adduser xiaozhang</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 创建一个.myjupyterhub文件夹用作管理jupyterhub配置文件</span><br><span class="line">cd /home/jpadmin</span><br><span class="line">mkdir .jupyterhub</span><br><span class="line">cd /home/jpadmin/.jupyterhub</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 生成配置文件</span><br><span class="line">jupyterhub --generate-config</span><br><span class="line"><span class="meta">#</span> 打开配置文件,添加以下配置并保存</span><br><span class="line">vim jupyterhub_config.py</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 是否启动浏览器</span><br><span class="line">c.NotebookApp.open_browser = False</span><br><span class="line"><span class="meta">#</span> 管理员级别用户</span><br><span class="line">c.JupyterHub.admin_users = &#123;'jpadmin'&#125;</span><br><span class="line"><span class="meta">#</span> 普通级别用户</span><br><span class="line">c.Authenticator.whitelist = &#123;'xiaozhang'&#125;</span><br></pre></td></tr></table></figure><h3 id="kernel配置"><a href="#kernel配置" class="headerlink" title="kernel配置"></a>kernel配置</h3><p><strong>注意:</strong> 如果此后是通过jupyterhub admin前端添加的用户,还是需要过来这里添加kernel信息,不然只会使用全局变量里的Python解释器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 安装ipykernel</span><br><span class="line">pip install ipykernel</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 添加新的kernel信息到虚拟环境jupyterhub里</span><br><span class="line"><span class="meta">#</span> python -m ipykernel install --user --name &lt;你的环境名&gt; --display-name "&lt;kernel名字&gt;"（你 kernel 的名字，可以在 jupyter 中看到，可以和环境名不一样）</span><br><span class="line"><span class="meta">#</span> 底层实际上就是在$HOME/.local/share/jupyter/kernel/ 下生成三个配置文件,因为用的同一个虚拟环境jupyterhub,所以之后新添加的用户不需要重新install kernel,只需要copy from kernel文件夹里面的信息就可以了</span><br><span class="line"><span class="meta">#</span> kernel.json</span><br><span class="line"><span class="meta">#</span> &#123;</span><br><span class="line"><span class="meta">#</span>  "display_name": "test",</span><br><span class="line"><span class="meta">#</span>  "language": "python",</span><br><span class="line"><span class="meta">#</span>  "argv": [</span><br><span class="line"><span class="meta">#</span>   "/home/bnu/.virtualenvs/jupyterhub/bin/python",</span><br><span class="line"><span class="meta">#</span>   "-m",</span><br><span class="line"><span class="meta">#</span>   "ipykernel_launcher",</span><br><span class="line"><span class="meta">#</span>   "-f",</span><br><span class="line"><span class="meta">#</span>   "&#123;connection_file&#125;"</span><br><span class="line"><span class="meta">#</span>  ]</span><br><span class="line"><span class="meta">#</span> &#125;</span><br><span class="line"><span class="meta">#</span> 可以看到路径是指向我们虚拟环境的</span><br><span class="line">python -m ipykernel install --user --name jupyterhub --display-name "赞"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 给用户配置kernel信息(刚入门shell,水平有限~ 只能麻烦点了ε=(´ο｀*)))唉)</span><br><span class="line"><span class="meta">#</span> 打包kernel信息</span><br><span class="line">tar -czvf kernelinfo.tar.gz ~/.local/share/jupyter/kernels/jupyterhub</span><br><span class="line"><span class="meta">#</span> 取出备用</span><br><span class="line">sz kernelinfo.tar.gz</span><br><span class="line">rm kernelinfo.tar.gz</span><br><span class="line"><span class="meta">#</span> 切换成需要配置的用户</span><br><span class="line"><span class="meta">#</span> 这样做貌似避免了权限问题,不过也可以手动改</span><br><span class="line"><span class="meta">#</span> Linux下更改用户组的命令: sudo chown username:username filename (带上参数-R则是递归修改)</span><br><span class="line">su jpadmin</span><br><span class="line">cd ~</span><br><span class="line">mkdir -p /home/jpadmin/.local/share/jupyter/kernels</span><br><span class="line">cd /home/jpadmin/.local/share/jupyter/kernels</span><br><span class="line">rz &lt;kernelinfo.tar.gz&gt;</span><br><span class="line">tar -xzvf kernelinfo.tar.gz</span><br></pre></td></tr></table></figure><h3 id="template配置"><a href="#template配置" class="headerlink" title="template配置"></a>template配置</h3><p>全局替换: 把准备好的custom文件 放到 /home/.virtualenvs/jupyterhub/lib/python3.5/dist-packages/notebook/static/custom 下进行替换</p><h2 id="启动jupyterhub服务器"><a href="#启动jupyterhub服务器" class="headerlink" title="启动jupyterhub服务器"></a>启动jupyterhub服务器</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">workon jupyterhub</span><br><span class="line">cd /home/jpadmin/.jupyterhub</span><br><span class="line">sudo -i</span><br><span class="line">nohup jupyterhub &amp;</span><br></pre></td></tr></table></figure><h2 id="关闭jupyterhub服务器"><a href="#关闭jupyterhub服务器" class="headerlink" title="关闭jupyterhub服务器"></a>关闭jupyterhub服务器</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> ps -fA | grep python</span><br><span class="line">kill &lt;pid&gt;</span><br><span class="line"><span class="meta">$</span> ps aux | grep configurable-http-proxy</span><br><span class="line">kill &lt;pid&gt;</span><br></pre></td></tr></table></figure><p>登录测试:</p><p><img src="adminlogin.png" alt="管理员登录图"></p><p>Kernel:</p><p><img src="kernel.png" alt="kernel"></p><p>AdministratorControl:</p><p><img src="control.png" alt="kernel"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Ubuntu下多用户版jupyterhub部署&quot;&gt;&lt;a href=&quot;#Ubuntu下多用户版jupyterhub部署&quot; class=&quot;headerlink&quot; title=&quot;Ubuntu下多用户版jupyterhub部署&quot;&gt;&lt;/a&gt;Ubuntu下多用户版jupyte
      
    
    </summary>
    
      <category term="jupyter" scheme="https://ojerk.cn/categories/jupyter/"/>
    
    
      <category term="Linux" scheme="https://ojerk.cn/tags/Linux/"/>
    
      <category term="Jupyterhub" scheme="https://ojerk.cn/tags/Jupyterhub/"/>
    
      <category term="jupyter" scheme="https://ojerk.cn/tags/jupyter/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu下matplotlib不能正常显示中文问题的解决</title>
    <link href="https://ojerk.cn/%E8%A7%A3%E5%86%B3Ubuntu%E4%B8%8Bmatplotlib%E4%B8%8D%E8%83%BD%E6%AD%A3%E5%B8%B8%E6%98%BE%E7%A4%BA%E4%B8%AD%E6%96%87/"/>
    <id>https://ojerk.cn/解决Ubuntu下matplotlib不能正常显示中文/</id>
    <published>2018-08-23T11:06:35.000Z</published>
    <updated>2019-11-23T05:50:33.578Z</updated>
    
    <content type="html"><![CDATA[<h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>环境:</p><ul><li>Python 3.6.5</li><li>Linux4.4.0-128-generic_x86_64</li></ul><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>工作站上部署了一个jupyterhub并安装了matplotlib,当生成图片里label用的是中文字符的时候,出现了下面情况:</p><p><img src="abnormal.png" alt="中文字符不正常显示图"></p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一种</span></span><br><span class="line"><span class="comment"># 用来正常显示中文标签</span></span><br><span class="line">mpl.rcParams[<span class="string">'font.sans-serif'</span>] = [<span class="string">'SimHei'</span>]</span><br><span class="line"><span class="comment"># 用正常显示负号</span></span><br><span class="line">mpl.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种</span></span><br><span class="line">myfont = FontProperties(fname=<span class="string">'msyh.ttf'</span>)</span><br><span class="line">mpl.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="keyword">False</span></span><br></pre></td></tr></table></figure><p><strong>以上方法尝试无效,可采取以下方法</strong></p><ul><li>下载中文字体: <a href="https://pan.baidu.com/s/1pPtPSjk4ToXmpjck6IlKJQ" target="_blank" rel="noopener">simhei.ttf</a> 9rm1</li><li>放入 /usr/share/fonts/</li><li>接着放入matplotlib字体文件夹下: /usr/local/lib/python3.6/site-packages/matplotlib/mpl-data/fonts/ttf/</li><li>修改配置文件:</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找配置文件位置</span></span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line">print(matplotlib.matplotlib_fname())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用vim打开并作如下修改</span></span><br><span class="line">sudo vim matplotlibbrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加或去除#号修改</span></span><br><span class="line">font-family : sans-serif</span><br><span class="line">font.sans-serif : SIMHEI</span><br></pre></td></tr></table></figure><ul><li>删除缓存文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> cd 到之前启动jupyterhub的用户目录</span><br><span class="line">cd ~</span><br><span class="line">cd .cache/matplotlib/</span><br><span class="line"><span class="meta">#</span> 并删除下面的缓存文件</span><br><span class="line">rm XXX.cache XXX.json</span><br><span class="line">rmdir XXX.cache</span><br></pre></td></tr></table></figure><ul><li>重启kernel</li></ul><p><img src="normal.png" alt="正常显示图"></p><p>发现中文显示正常了</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;开发环境&quot;&gt;&lt;a href=&quot;#开发环境&quot; class=&quot;headerlink&quot; title=&quot;开发环境&quot;&gt;&lt;/a&gt;开发环境&lt;/h2&gt;&lt;p&gt;环境:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Python 3.6.5&lt;/li&gt;
&lt;li&gt;Linux4.4.0-128-generic_
      
    
    </summary>
    
      <category term="matplotlib" scheme="https://ojerk.cn/categories/matplotlib/"/>
    
    
      <category term="matplotlib" scheme="https://ojerk.cn/tags/matplotlib/"/>
    
  </entry>
  
  <entry>
    <title>Vscode右键Runcode中文乱码问题的解决</title>
    <link href="https://ojerk.cn/%E8%A7%A3%E5%86%B3Vscode%E5%8F%B3%E9%94%AERuncode%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/"/>
    <id>https://ojerk.cn/解决Vscode右键Runcode中文乱码问题/</id>
    <published>2018-08-23T10:55:52.000Z</published>
    <updated>2019-11-30T11:00:28.837Z</updated>
    
    <content type="html"><![CDATA[<h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><p>产生该问题的原因是Vscode里code-runner插件默认用的不是 <strong>uft-8</strong> 编码</p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>添加一个执行变量</p><ul><li>打开Vscode配置(Ctrl+,)</li><li>在配置文件里添加如下内容</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"code-runner.executorMap"</span>: &#123;</span><br><span class="line">        <span class="string">"python"</span>: <span class="string">"set PYTHONIOENCODING=utf8 &amp;&amp; $pythonPath $fullFileName"</span>,</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;问题分析&quot;&gt;&lt;a href=&quot;#问题分析&quot; class=&quot;headerlink&quot; title=&quot;问题分析&quot;&gt;&lt;/a&gt;问题分析&lt;/h2&gt;&lt;p&gt;产生该问题的原因是Vscode里code-runner插件默认用的不是 &lt;strong&gt;uft-8&lt;/strong&gt; 编码&lt;
      
    
    </summary>
    
      <category term="vscode" scheme="https://ojerk.cn/categories/vscode/"/>
    
    
      <category term="vscode" scheme="https://ojerk.cn/tags/vscode/"/>
    
      <category term="乱码" scheme="https://ojerk.cn/tags/%E4%B9%B1%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>Pandas.DataFrame内存使用的查看</title>
    <link href="https://ojerk.cn/Pandas-DataFrame%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E7%9A%84%E6%9F%A5%E7%9C%8B/"/>
    <id>https://ojerk.cn/Pandas-DataFrame内存使用的查看/</id>
    <published>2018-08-23T10:49:16.000Z</published>
    <updated>2019-12-05T13:48:12.236Z</updated>
    
    <content type="html"><![CDATA[<p>使用 <strong>DataFrame.info()</strong>, 我们可以获取DataFrame的一些高level信息，譬如数据量、数据类型和内存使用量,这个方法默认情况下返回一个近似的内存使用量，我们设置参数memory_usage为‘deep’来获得准确的内存使用量：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.info(memory_usage=<span class="string">'deep'</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;使用 &lt;strong&gt;DataFrame.info()&lt;/strong&gt;, 我们可以获取DataFrame的一些高level信息，譬如数据量、数据类型和内存使用量,这个方法默认情况下返回一个近似的内存使用量，我们设置参数memory_usage为‘deep’来获得准确的内存
      
    
    </summary>
    
      <category term="Pandas" scheme="https://ojerk.cn/categories/Pandas/"/>
    
    
      <category term="Pandas" scheme="https://ojerk.cn/tags/Pandas/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu下Python自动上网脚本的实现</title>
    <link href="https://ojerk.cn/Ubuntu%E4%B8%8BPython%E8%87%AA%E5%8A%A8%E4%B8%8A%E7%BD%91%E8%84%9A%E6%9C%AC%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <id>https://ojerk.cn/Ubuntu下Python自动上网脚本的实现/</id>
    <published>2018-08-23T10:39:39.000Z</published>
    <updated>2018-10-19T01:08:56.277Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ubuntu下实现通过远程登录校园网"><a href="#ubuntu下实现通过远程登录校园网" class="headerlink" title="ubuntu下实现通过远程登录校园网"></a>ubuntu下实现通过远程登录校园网</h1><p>由于我们外部工作站的主机放在保密机房,所以每当工作站需要联网都得申请-&gt;登记-&gt;联网,显得非常麻烦,所以可以通过Python写一个能够实现自动联网的脚本</p><p>需求:</p><ul><li>在不需要进入保密机房的前提下:当有人在工作站上工作需要用到网时,可以使用自己的账号密码登上互联网</li></ul><p>思路: 通过selenium实现打开浏览器,填写上网账号密码登录互联网</p><h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><p>本机环境:</p><ul><li>Python 3.6.5</li><li>Linux4.4.0-128-generic_x86_64</li></ul><p>不知道为什么selenium不在支持PhantomJs,所以选择了Chrome</p><p>本次使用的有关Chrome信息:</p><ul><li>Chrome安装时间:2018年6月20日09:10:55</li><li>Chrome版本:Google Chrome 67.0.3396.87</li><li>对应安装的ChromeDriver 版本: v2.39</li></ul><p>Chrome for linux <a href="https://www.google.com/chrome/thankyou.html?platform=linux&amp;statcb=1&amp;installdataindex=defaultbrowser" target="_blank" rel="noopener">下载</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 安装</span><br><span class="line">dpkg -i google-chrome-stable_current_amd64.deb</span><br></pre></td></tr></table></figure><p>ChromeDriver <a href="http://chromedriver.storage.googleapis.com/index.html" target="_blank" rel="noopener">下载</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 存放位置</span><br><span class="line">mv ./chromedriver usr/bin/</span><br><span class="line"><span class="meta">#</span> 添加可执行权限</span><br><span class="line">sudo chmod a+x /usr/bin/chromedriver</span><br></pre></td></tr></table></figure><p><strong>注意:</strong> Chrome与ChromeDriver版本必须得对应,不然程序可能会报错~</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 selenium</span></span><br><span class="line">pip install selenium</span><br></pre></td></tr></table></figure><h2 id="编写脚本"><a href="#编写脚本" class="headerlink" title="编写脚本"></a>编写脚本</h2><p>源码存放在我们工作站上的gitlab上: <a href="http://172.16.160.219:9090/AsyDogface/AutoSurf" target="_blank" rel="noopener">http://172.16.160.219:9090/AsyDogface/AutoSurf</a></p><p>首次运行报错:selenium.common.exceptions.WebDriverException: Message: ‘chromedriver’ executable needs to be in PATH</p><p>是由于driver版本过高导致的bug,解决方法:</p><ul><li>方法一:重新下载低版本的Chrome以及对应的ChromeDriver</li><li>方法二:修改driver启动option</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法二:修改driver启动option</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line">chrome_options = Options()</span><br><span class="line">chrome_options.add_argument(<span class="string">'--headless'</span>)</span><br><span class="line">chrome_options.add_argument(<span class="string">'--no-sandbox'</span>)</span><br><span class="line">chrome_options.add_argument(<span class="string">'--disable-dev-shm-usage'</span>)</span><br><span class="line">driver = webdriver.Chrome(<span class="string">'/path/to/your_chrome_driver_dir/chromedriver'</span>,chrome_options=chrome_options)</span><br></pre></td></tr></table></figure><p>再次尝试启动:</p><p><img src="login.png" alt="login"></p><p>ping一下百度试试:</p><p><img src="ping.png" alt="ping"></p><p>至此,大功告成~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ubuntu下实现通过远程登录校园网&quot;&gt;&lt;a href=&quot;#ubuntu下实现通过远程登录校园网&quot; class=&quot;headerlink&quot; title=&quot;ubuntu下实现通过远程登录校园网&quot;&gt;&lt;/a&gt;ubuntu下实现通过远程登录校园网&lt;/h1&gt;&lt;p&gt;由于我们外部
      
    
    </summary>
    
      <category term="Script" scheme="https://ojerk.cn/categories/Script/"/>
    
    
      <category term="Python" scheme="https://ojerk.cn/tags/Python/"/>
    
      <category term="Linux" scheme="https://ojerk.cn/tags/Linux/"/>
    
      <category term="Script" scheme="https://ojerk.cn/tags/Script/"/>
    
  </entry>
  
  <entry>
    <title>Python虚拟环境搭建/迁移</title>
    <link href="https://ojerk.cn/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-%E8%BF%81%E7%A7%BB/"/>
    <id>https://ojerk.cn/Python虚拟环境搭建-迁移/</id>
    <published>2018-08-22T11:54:20.000Z</published>
    <updated>2019-12-05T13:50:02.366Z</updated>
    
    <content type="html"><![CDATA[<h1 id="VirtualEnv-and-VirtualEnvWrapper-Briefer-Course"><a href="#VirtualEnv-and-VirtualEnvWrapper-Briefer-Course" class="headerlink" title="VirtualEnv and VirtualEnvWrapper Briefer Course"></a>VirtualEnv and VirtualEnvWrapper Briefer Course</h1><blockquote><p>内容包括了虚拟环境的搭建、使用、迁移</p></blockquote><h2 id="什么是VirtualEnv"><a href="#什么是VirtualEnv" class="headerlink" title="什么是VirtualEnv"></a>什么是VirtualEnv</h2><p><strong>VirtualEnv</strong> = Virtual environment       顾名思义就是虚拟环境的意思</p><p><strong>VirtualEnvWrapper</strong>:是对前者提供了一些便利的命令行上的封装</p><h2 id="为什么使用VirtualEnv"><a href="#为什么使用VirtualEnv" class="headerlink" title="为什么使用VirtualEnv"></a>为什么使用VirtualEnv</h2><p>VirtualEnv用于在一台机器上创建多个独立的python运行环境,它的优点:</p><ul><li>可以让每一个python项目单独使用一个环境，而不会影响python系统环境，也不会影响其他项目的环境</li><li>可以选择不同的Python版（系统已安装的）或Packages</li><li>可以在没有root权限的情况下安装新套件，而且它们之间互不影响</li></ul><h2 id="如何食用VirtualEnv"><a href="#如何食用VirtualEnv" class="headerlink" title="如何食用VirtualEnv"></a>如何食用VirtualEnv</h2><blockquote><p>只针对win10下</p></blockquote><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#virtualenv安装</span></span><br><span class="line">pip install virtualenv </span><br><span class="line"><span class="comment">#virtualenvwrapper安装</span></span><br><span class="line">pip install virtualenvwrapper-win</span><br></pre></td></tr></table></figure><p><strong>注意</strong>:virtualenvwrapper需要配置所有虚拟环境的存放目录:<em>WORKON_HOME</em></p><p><img src="workonhome.png" alt="图片"></p><h3 id="VirtualEnv食用"><a href="#VirtualEnv食用" class="headerlink" title="VirtualEnv食用"></a>VirtualEnv食用</h3><p><strong>虚拟环境的创建:</strong></p><ol><li>默认Python版本创建虚拟环境:<ul><li>cd到需要创建虚拟环境的目录</li><li>创建虚拟环境</li></ul></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">virtualenv &lt;env_name&gt;</span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">virtualenv --no-site-packages &lt;env_name&gt;</span><br><span class="line"><span class="comment"># –no-site-packages表示不包括系统全局的Python安装包，这样会更令环境更干净</span></span><br></pre></td></tr></table></figure><ol start="2"><li>自定义Python版本创建虚拟环境<ul><li>首先安装需要的Python版本</li><li>cd到需要创建虚拟环境的目录</li><li>指定virtualenv中的python版本,并创建虚拟环境</li></ul></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virtualenv --no-site-packages --python=<span class="number">2.7</span>  &lt;envname&gt;</span><br></pre></td></tr></table></figure><p><strong>虚拟环境的激活</strong>:</p><ol><li>cd到你创建的虚拟环境目录下</li><li>激活环境</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Script\activate  (<span class="keyword">or</span> Script\activate.bat)</span><br></pre></td></tr></table></figure><p>这时候你可以看到命令行前面多出了你虚拟环境的名字,代表成功激活虚拟环境</p><p><strong>虚拟环境的退出</strong>:</p><p>直接在该环境中使用</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure><p><strong>删除虚拟环境</strong>:</p><p>直接删除虚拟环境所在的文件夹就可以</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -r &lt;target envname&gt;</span><br></pre></td></tr></table></figure><h2 id="VirtualEnvWrapper食用"><a href="#VirtualEnvWrapper食用" class="headerlink" title="VirtualEnvWrapper食用"></a>VirtualEnvWrapper食用</h2><blockquote><p>VirtualEnvWrapper下创建的虚拟环境默认都是干净的,就像Virtualenv下执行了–no-site-packages命令一样</p></blockquote><p><strong>创建虚拟环境</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkvirtualenv &lt;envname&gt;</span><br></pre></td></tr></table></figure><p><strong>列出已有的虚拟环境</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">workon</span><br></pre></td></tr></table></figure><p><strong>切换虚拟环境</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">workon &lt;envname&gt;</span><br></pre></td></tr></table></figure><p><strong>退出虚拟环境</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure><p><strong>删除虚拟环境</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmvirtualenv &lt;envname&gt;</span><br></pre></td></tr></table></figure><h2 id="VSCode下虚拟环境的迁移"><a href="#VSCode下虚拟环境的迁移" class="headerlink" title="VSCode下虚拟环境的迁移"></a>VSCode下虚拟环境的迁移</h2><h3 id="首先配置Virtualenv"><a href="#首先配置Virtualenv" class="headerlink" title="首先配置Virtualenv"></a>首先配置Virtualenv</h3><p>目标电脑必须安装了相同的Python版本以及pip和Virtualenv,然后根据情况选择:</p><p><strong>方法一</strong>:</p><ul><li>当没有网或者网络不好的情况下</li><li>直接将本地env1里的文件copy到目标电脑env2下,可以正常使用,显然这是不好的…</li></ul><p><strong>方法二</strong>:</p><ul><li>进入需要迁移的虚拟环境里</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure><p>将包依赖信息保存在requirements.txt文件中,文件结构如下图:</p><p><img src="requirements.png" alt="图片"></p><ul><li>把该文档copy到目标电脑虚拟环境目录下,执行</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#进入虚拟环境</span></span><br><span class="line">workon &lt;target envname&gt;</span><br><span class="line"><span class="comment">#先卸载一遍,以防原来环境里有残留</span></span><br><span class="line">pip uninstall -ry requirements.txt</span><br><span class="line"><span class="comment">#再执行安装(没安装成功的话可能是包依赖冲突,手动调整下文档里包的位置即可)</span></span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><h4 id="然后配置VSCode"><a href="#然后配置VSCode" class="headerlink" title="然后配置VSCode"></a>然后配置VSCode</h4><ul><li>首先配置虚拟环境根目录</li></ul><p><img src="vscode下env路径.png" alt="图片"></p><ul><li>重启VSCode</li><li>打开VSCode控制面板</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctrl+shift+P</span><br></pre></td></tr></table></figure><ul><li>输入</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Python:Select Interpreter</span><br></pre></td></tr></table></figure><ul><li>选择虚拟环境</li></ul><p><img src="选择虚拟环境.png" alt="图片"></p><ul><li>至此,大功告成</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;VirtualEnv-and-VirtualEnvWrapper-Briefer-Course&quot;&gt;&lt;a href=&quot;#VirtualEnv-and-VirtualEnvWrapper-Briefer-Course&quot; class=&quot;headerlink&quot; title
      
    
    </summary>
    
      <category term="Virtualenv" scheme="https://ojerk.cn/categories/Virtualenv/"/>
    
    
      <category term="VirtualEnv" scheme="https://ojerk.cn/tags/VirtualEnv/"/>
    
  </entry>
  
  <entry>
    <title>Pip---搭建属于自己的PipServer服务器</title>
    <link href="https://ojerk.cn/%E6%90%AD%E5%BB%BA%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84Pipserver/"/>
    <id>https://ojerk.cn/搭建属于自己的Pipserver/</id>
    <published>2018-08-22T11:49:27.000Z</published>
    <updated>2019-11-23T05:45:10.890Z</updated>
    
    <content type="html"><![CDATA[<h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>Windows10</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pypiserver</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h3><ul><li>创建包仓库,eg D:/packages</li><li>把下载好的python包放到创建好的仓库里</li><li>启动pypi-server服务器,并指定仓库目录</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Will listen to all IPs.</span></span><br><span class="line">pypi-server -p <span class="number">8080</span> D:/packages</span><br></pre></td></tr></table></figure><h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><ul><li>配置pip.ini文件</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url=http://&lt;server_ip&gt;:8080/simple</span><br><span class="line">trusted-host=&lt;server_ip&gt;</span><br><span class="line">no-warn-script-location=False</span><br></pre></td></tr></table></figure><ul><li>从服务器下载packages</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install &lt;package&gt;</span><br></pre></td></tr></table></figure><ul><li>搜索包</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip search --index http://&lt;server_ip&gt;:8080</span><br></pre></td></tr></table></figure><p><strong>值得注意的是:</strong> 想要search正常工作,url后面不能以 <em>simple</em> 结尾</p><h2 id="获取帮助信息"><a href="#获取帮助信息" class="headerlink" title="获取帮助信息"></a>获取帮助信息</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pypi-server --help</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;开发环境&quot;&gt;&lt;a href=&quot;#开发环境&quot; class=&quot;headerlink&quot; title=&quot;开发环境&quot;&gt;&lt;/a&gt;开发环境&lt;/h2&gt;&lt;p&gt;Windows10&lt;/p&gt;
&lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; tit
      
    
    </summary>
    
      <category term="pip" scheme="https://ojerk.cn/categories/pip/"/>
    
    
      <category term="Pip" scheme="https://ojerk.cn/tags/Pip/"/>
    
  </entry>
  
  <entry>
    <title>Python自动化Word、Excel</title>
    <link href="https://ojerk.cn/Python%E8%87%AA%E5%8A%A8%E5%8C%96Word%E3%80%81Excel/"/>
    <id>https://ojerk.cn/Python自动化Word、Excel/</id>
    <published>2018-08-22T11:43:49.000Z</published>
    <updated>2018-10-19T01:05:18.525Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python自动化Wrod和Excel入门培训"><a href="#Python自动化Wrod和Excel入门培训" class="headerlink" title="Python自动化Wrod和Excel入门培训"></a>Python自动化Wrod和Excel入门培训</h1><h2 id="阅读文档之前你应该"><a href="#阅读文档之前你应该" class="headerlink" title="阅读文档之前你应该"></a>阅读文档之前你应该</h2><ul><li>在window环境下</li><li>熟悉Python</li><li>了解Word和Excel</li><li>结合./doc和./src文件下的测试文档和源文件进行学习使用</li></ul><h2 id="培训完以后你应该具备"><a href="#培训完以后你应该具备" class="headerlink" title="培训完以后你应该具备"></a>培训完以后你应该具备</h2><ul><li style="list-style: none"><input type="checkbox" checked> 能够使用Python对Work进行段落、图片、表格插入，以及简单的样式应用</li><li style="list-style: none"><input type="checkbox" checked> 能够使用Python对Excel进行简单的数据导入导出,获取合并单元格的值</li><li style="list-style: none"><input type="checkbox" checked> 能够在数据库、Excel和Word之间相互导入导出数据</li></ul><h2 id="Python自动化之Word"><a href="#Python自动化之Word" class="headerlink" title="Python自动化之Word"></a>Python自动化之Word</h2><h3 id="安装-python-docx"><a href="#安装-python-docx" class="headerlink" title="安装(python-docx)"></a>安装(python-docx)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install python-docx</span><br></pre></td></tr></table></figure><h3 id="快速入门-auto-Word"><a href="#快速入门-auto-Word" class="headerlink" title="快速入门(auto_Word)"></a>快速入门(auto_Word)</h3><h4 id="打开一份文档"><a href="#打开一份文档" class="headerlink" title="打开一份文档"></a>打开一份文档</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> docx <span class="keyword">import</span> Document</span><br><span class="line"><span class="comment"># 打开一份空白的模板,这几乎和新建一份默认设置的空白文档一样</span></span><br><span class="line">document = Document()</span><br><span class="line"><span class="comment"># 打开一份已有的文档</span></span><br><span class="line"><span class="comment"># document = Document('file_path')</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对文档操作完以后记得保存</span></span><br><span class="line">document.save(<span class="string">'file_path'</span>)</span><br></pre></td></tr></table></figure><h4 id="添加标题"><a href="#添加标题" class="headerlink" title="添加标题"></a>添加标题</h4><p>标题一共分为9级(1~9)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认一级标题</span></span><br><span class="line">document.add_heading(<span class="string">'一级标题'</span>)</span><br><span class="line">document.add_heading(<span class="string">'二级标题'</span>, level=<span class="number">2</span>)</span><br><span class="line">document.add_heading(<span class="string">'三级标题'</span>, level=<span class="number">3</span>)</span><br><span class="line">document.add_heading(<span class="string">'四级标题'</span>, level=<span class="number">4</span>)</span><br><span class="line">document.add_heading(<span class="string">'五级标题'</span>, level=<span class="number">5</span>)</span><br><span class="line">document.add_heading(<span class="string">'六级标题'</span>, level=<span class="number">6</span>)</span><br><span class="line">document.add_heading(<span class="string">'七级标题'</span>, level=<span class="number">7</span>)</span><br><span class="line">document.add_heading(<span class="string">'八级标题'</span>, level=<span class="number">8</span>)</span><br><span class="line">document.add_heading(<span class="string">'九级标题'</span>, level=<span class="number">9</span>)</span><br></pre></td></tr></table></figure><h4 id="段落"><a href="#段落" class="headerlink" title="段落"></a>段落</h4><p><strong>段落的添加</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加到最后</span></span><br><span class="line">paragraph = document.add_paragraph(<span class="string">'after'</span>)</span><br><span class="line"><span class="comment"># 添加到之前</span></span><br><span class="line">prior_paragraph = paragraph.insert_paragraph_before(<span class="string">'before'</span>)</span><br></pre></td></tr></table></figure><p><strong>段落样式的应用</strong>:</p><blockquote><p>可通过add_run()方法来实现段落的拆分,字体样式应用(比如:粗体和斜体)</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 段落样式</span></span><br><span class="line">document.add_paragraph(<span class="string">'一个简单的段落样式.'</span>, style=<span class="string">'ListBullet'</span>)</span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">paragraph = document.add_paragraph(<span class="string">'Lorem ipsum dolor sit amet.'</span>)</span><br><span class="line">paragraph.style = <span class="string">'ListBullet'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过add_run()方法来实现</span></span><br><span class="line"><span class="comment"># 把一个段落分开运行</span></span><br><span class="line">paragraph = document.add_paragraph(<span class="string">'我是 '</span>)</span><br><span class="line">paragraph.add_run(<span class="string">'奥特曼.'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 应用粗体和斜体</span></span><br><span class="line">paragraph = document.add_paragraph(<span class="string">'我 '</span>)</span><br><span class="line">paragraph.add_run(<span class="string">'是 '</span>).bold = <span class="keyword">True</span></span><br><span class="line">paragraph.add_run(<span class="string">'奥 '</span>).italic = <span class="keyword">True</span></span><br><span class="line">paragraph.add_run(<span class="string">' 特曼.'</span>)</span><br><span class="line"><span class="comment"># 也可以</span></span><br><span class="line">run = paragraph.add_run(<span class="string">'是 '</span>)</span><br><span class="line">run.bold = <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符样式,包括其字体，大小，颜色，粗体，斜体等</span></span><br><span class="line">paragraph = document.add_paragraph(<span class="string">'一样, '</span>)</span><br><span class="line">paragraph.add_run(<span class="string">'很明显不一样嘛.'</span>, <span class="string">'Emphasis'</span>)</span><br><span class="line"><span class="comment"># 也可以</span></span><br><span class="line">paragraph_6 = document.add_paragraph(<span class="string">'一样, '</span>)</span><br><span class="line">run = paragraph_6.add_run(<span class="string">'很明显不一样嘛.'</span>)</span><br><span class="line">run.style = <span class="string">'Emphasis'</span></span><br></pre></td></tr></table></figure><h4 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分页</span></span><br><span class="line">document.add_page_break()</span><br></pre></td></tr></table></figure><h4 id="插入图片"><a href="#插入图片" class="headerlink" title="插入图片"></a>插入图片</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.add_picture(<span class="string">'../img/协同.png'</span>, width=Inches(<span class="number">2</span>))</span><br></pre></td></tr></table></figure><h4 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h4><p><strong>表格的创建</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 表格</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建表格</span></span><br><span class="line">table = document.add_table(rows=<span class="number">2</span>, cols=<span class="number">2</span>)</span><br><span class="line"><span class="comment"># 获取单个表格元素</span></span><br><span class="line">cell = table.cell(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment"># 给表格元素传值</span></span><br><span class="line">cell.text = <span class="string">'第一行,第二列'</span></span><br><span class="line"><span class="comment"># 获取一行元素 just like list,并传值</span></span><br><span class="line"><span class="comment"># 获取第二行元素</span></span><br><span class="line">row = table.rows[<span class="number">1</span>]</span><br><span class="line">row.cells[<span class="number">0</span>].text = <span class="string">'第二行,第一列'</span></span><br><span class="line">row.cells[<span class="number">1</span>].text = <span class="string">'第二行,第二列'</span></span><br></pre></td></tr></table></figure><p><strong>一个模拟从数据库导入数据到word表格里的实例</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">document.add_paragraph(<span class="string">'表'</span>)</span><br><span class="line"><span class="comment"># 假装这是数据库取出来的数据</span></span><br><span class="line">data_list = [&#123;</span><br><span class="line">    <span class="string">"name"</span>:<span class="string">"张麻子"</span>,</span><br><span class="line">    <span class="string">"age"</span>:<span class="string">"18"</span>,</span><br><span class="line">    <span class="string">"描述"</span>:<span class="string">"脸上有麻子"</span>,</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"name"</span>:<span class="string">"赵四"</span>,</span><br><span class="line">    <span class="string">"age"</span>:<span class="string">"998"</span>,</span><br><span class="line">    <span class="string">"描述"</span>:<span class="string">"尼古拉斯赵四"</span>,</span><br><span class="line">&#125;]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个表格</span></span><br><span class="line">table = document.add_table(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">table.style = <span class="string">'LightShading-Accent2'</span></span><br><span class="line"><span class="comment"># 填写标头</span></span><br><span class="line">heading_cells = table.rows[<span class="number">0</span>].cells</span><br><span class="line">heading_cells[<span class="number">0</span>].text = <span class="string">'name'</span></span><br><span class="line">heading_cells[<span class="number">1</span>].text = <span class="string">'age'</span></span><br><span class="line">heading_cells[<span class="number">2</span>].text = <span class="string">'描述'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把数据导入到表格里</span></span><br><span class="line"><span class="keyword">for</span> items <span class="keyword">in</span> data_list:</span><br><span class="line">    row = table_1.add_row()</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">        row.cells[i].text = items[item]</span><br><span class="line">        i += <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="了解更多-auto-word"><a href="#了解更多-auto-word" class="headerlink" title="了解更多(auto_word)"></a>了解更多(auto_word)</h3><p>如果你对python自动化word很感兴趣,想进一步提升请<a href="http://python-docx.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">猛击这里</a></p><h2 id="Python自动化之Excel"><a href="#Python自动化之Excel" class="headerlink" title="Python自动化之Excel"></a>Python自动化之Excel</h2><h3 id="安装-xlrd、xlwt"><a href="#安装-xlrd、xlwt" class="headerlink" title="安装(xlrd、xlwt)"></a>安装(xlrd、xlwt)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># xlrd 涌入内容读取, xlwr 用于内容写入</span></span><br><span class="line">pip install xlrd</span><br><span class="line">pip install xlwt</span><br></pre></td></tr></table></figure><h3 id="快速入门-auto-Excel"><a href="#快速入门-auto-Excel" class="headerlink" title="快速入门(auto_Excel)"></a>快速入门(auto_Excel)</h3><h3 id="xlrd使用"><a href="#xlrd使用" class="headerlink" title="xlrd使用"></a>xlrd使用</h3><h4 id="获取Excel文件"><a href="#获取Excel文件" class="headerlink" title="获取Excel文件"></a>获取Excel文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">workbook = xlrd.open_workbook(<span class="string">'excel_file_path'</span>)</span><br></pre></td></tr></table></figure><h4 id="获取工作表名称"><a href="#获取工作表名称" class="headerlink" title="获取工作表名称"></a>获取工作表名称</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取所有工作表名称</span></span><br><span class="line">workbook_name_list = workbook.sheet_name()</span><br><span class="line"><span class="comment"># 根据索引获取sheet名称</span></span><br><span class="line">sheet2_name = workbook.sheet_name()[<span class="number">1</span>]</span><br></pre></td></tr></table></figure><h4 id="获取工作表-三种方式"><a href="#获取工作表-三种方式" class="headerlink" title="获取工作表(三种方式)"></a>获取工作表(三种方式)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sheet_1 = workbook.sheets()[<span class="number">0</span>]     <span class="comment">#通过索引顺序获取</span></span><br><span class="line">sheet_2 = workbook.sheet_by_index(<span class="number">1</span>)     <span class="comment">#通过索引顺序获取</span></span><br><span class="line">sheet = workbook.sheet_by_name(u‘Sheet_name‘)   <span class="comment">#通过Excel表名称</span></span><br></pre></td></tr></table></figure><h4 id="常用的sheet对象的属性和方法"><a href="#常用的sheet对象的属性和方法" class="headerlink" title="常用的sheet对象的属性和方法"></a>常用的sheet对象的属性和方法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取sheet名称</span></span><br><span class="line">sheet_name = sheet.name</span><br><span class="line"><span class="comment"># 获取sheet行数</span></span><br><span class="line">sheet_rows = sheet.nrows</span><br><span class="line"><span class="comment"># 获取sheet列数</span></span><br><span class="line">sheet_cols = sheet.ncols</span><br><span class="line"><span class="comment"># 获取sheet整行的值(索引)</span></span><br><span class="line">rows = sheet.row_values(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 获取sheet整列的值(索引)</span></span><br><span class="line">cols = sheet.col_values(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取指定单元格的内容</span></span><br><span class="line"><span class="comment"># 方法一(x,y表示二维索引坐标):</span></span><br><span class="line">cell_data = sheet.cell(x,y).value</span><br><span class="line"><span class="comment"># 方法二:</span></span><br><span class="line">cell_data = sheet.cell_value(x,y)</span><br><span class="line"><span class="comment"># 方法三:</span></span><br><span class="line">cell_data = sheet.row(x)[y].value</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取单元格内容的数据类型(解决获取date类型为浮点型的引子)</span></span><br><span class="line"><span class="comment"># 返回值说明: 0 empty,1 string, 2 number, 3 date, 4 boolean, 5 error</span></span><br><span class="line">cell_type = sheet.cell(x,y).ctype</span><br></pre></td></tr></table></figure><h4 id="获取单元内容为日期类型的方式"><a href="#获取单元内容为日期类型的方式" class="headerlink" title="获取单元内容为日期类型的方式"></a>获取单元内容为日期类型的方式</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">date_value = xlrd.xldate_as_tuple(sheet_2.cell_value(<span class="number">1</span>,<span class="number">2</span>),workbook.datemode)</span><br><span class="line">result = date(*date_value[:<span class="number">3</span>]).strftime(<span class="string">r'%Y/%m/%d'</span>)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><h4 id="扩展-获取合并单元格的内容"><a href="#扩展-获取合并单元格的内容" class="headerlink" title="(扩展)获取合并单元格的内容"></a>(扩展)获取合并单元格的内容</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 只获取合并单元格的内容</span></span><br><span class="line"><span class="comment"># 问题,只能取到行/列合并的第一个索引值</span></span><br><span class="line"><span class="comment"># 解决代码</span></span><br><span class="line">merge = []</span><br><span class="line"><span class="keyword">for</span> (rlow,rhigh,clow,chigh) <span class="keyword">in</span> sheet_2.merged_cells:</span><br><span class="line">    merge.append([rlow,clow])</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> merge:</span><br><span class="line">    print(sheet_2.cell_value(index[<span class="number">0</span>],index[<span class="number">1</span>]))</span><br></pre></td></tr></table></figure><h3 id="xlwt使用"><a href="#xlwt使用" class="headerlink" title="xlwt使用"></a>xlwt使用</h3><h4 id="sheet的创建"><a href="#sheet的创建" class="headerlink" title="sheet的创建"></a>sheet的创建</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建工作簿</span></span><br><span class="line">workbook = xlwt.Workbook()</span><br><span class="line"><span class="comment"># 创建sheet,第二参数用于确认同一个cell单元是否可以重设值</span></span><br><span class="line">sheet_1 = workbook.add_sheet(<span class="string">'sheet_name'</span>,cell_overwrite_ok=<span class="keyword">True</span>)</span><br><span class="line"><span class="comment"># 完成编辑后记得保存</span></span><br><span class="line">workbook.save(<span class="string">'file_path'</span>)</span><br></pre></td></tr></table></figure><h4 id="内容的写入"><a href="#内容的写入" class="headerlink" title="内容的写入"></a>内容的写入</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># x,y 表行索引, y,h 表列索引 , string表要输入的字符串, style表字符串样式,如果只有两个参数x,y则表示第x+1行第y+1列</span></span><br><span class="line">sheet.write(x, y, h, w, string, sytle)</span><br></pre></td></tr></table></figure><h4 id="单元格的合并"><a href="#单元格的合并" class="headerlink" title="单元格的合并"></a>单元格的合并</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 和xlrd不一样的地方是,x,y,h,w顾头又顾尾!!!</span></span><br><span class="line"><span class="comment"># 和xlrd不一样的地方是,x,y,h,w顾头又顾尾!!!</span></span><br><span class="line"><span class="comment"># 和xlrd不一样的地方是,x,y,h,w顾头又顾尾!!!</span></span><br><span class="line"><span class="comment"># 直接写入一个合并的单元格</span></span><br><span class="line">sheet.write_merge(x, y, h, w, string, sytle)</span><br></pre></td></tr></table></figure><h4 id="牛刀小试"><a href="#牛刀小试" class="headerlink" title="牛刀小试"></a>牛刀小试</h4><blockquote><p>案例来自<a href="https://www.cnblogs.com/linyfeng/p/7123423.html" target="_blank" rel="noopener">这里</a>,例子非常棒,但是由于时间有点早,本人大胆进行了加工改良</p></blockquote><p><strong>请生成如下图格式的Excel文件</strong>:</p><p><img src="xlwt练习_01.png" alt="Excel写入练习 图片_01"></p><p><strong>源码</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置字体的样式</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_style</span><span class="params">(name,height,bold=False)</span>:</span></span><br><span class="line">    style = xlwt.XFStyle() <span class="comment"># 初始化样式</span></span><br><span class="line">    font = xlwt.Font() <span class="comment"># 为样式创建字体</span></span><br><span class="line">    font.name = name <span class="comment"># 'Times New Roman'</span></span><br><span class="line">    font.bold = bold</span><br><span class="line">    font.color_index = <span class="number">4</span></span><br><span class="line">    font.height = height</span><br><span class="line">    style.font = font</span><br><span class="line">    <span class="comment"># 这部分设置居中格式</span></span><br><span class="line">    alignment = xlwt.Alignment()</span><br><span class="line">    alignment.horz = xlwt.Alignment.HORZ_CENTER    <span class="comment">#水平居中</span></span><br><span class="line">    alignment.vert = xlwt.Alignment.VERT_CENTER    <span class="comment">#垂直居中</span></span><br><span class="line">    style.alignment = alignment</span><br><span class="line">    <span class="keyword">return</span> style</span><br><span class="line"></span><br><span class="line"><span class="comment">#生成excel文件</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write_excel</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''创建第一个sheet:sheet1'''</span></span><br><span class="line">    workbook = xlwt.Workbook() <span class="comment">#创建工作簿</span></span><br><span class="line">    sheet1 = workbook.add_sheet(<span class="string">'sheet1'</span>,cell_overwrite_ok=<span class="keyword">True</span>) <span class="comment">#创建sheet</span></span><br><span class="line">    row0 = [<span class="string">'业务'</span>,<span class="string">'状态'</span>,<span class="string">'北京'</span>,<span class="string">'上海'</span>,<span class="string">'广州'</span>,<span class="string">'深圳'</span>,<span class="string">'状态小计'</span>,<span class="string">'合计'</span>]</span><br><span class="line">    column0 = [<span class="string">'机票'</span>,<span class="string">'船票'</span>,<span class="string">'火车票'</span>,<span class="string">'汽车票'</span>,<span class="string">'其它'</span>]</span><br><span class="line">    status = [<span class="string">'预订'</span>,<span class="string">'出票'</span>,<span class="string">'退票'</span>,<span class="string">'业务小计'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">#生成第一行</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(row0)):</span><br><span class="line">        sheet1.write(<span class="number">0</span>,i,row0[i],set_style(<span class="string">'Times New Roman'</span>,<span class="number">220</span>,<span class="keyword">True</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#生成第一列和最后一列(合并4行)</span></span><br><span class="line">    i, j = <span class="number">1</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="number">4</span>*len(column0) <span class="keyword">and</span> j &lt; len(column0):</span><br><span class="line">        sheet1.write_merge(i,i+<span class="number">3</span>,<span class="number">0</span>,<span class="number">0</span>,column0[j],set_style(<span class="string">'Arial'</span>,<span class="number">220</span>,<span class="keyword">True</span>)) <span class="comment">#第一列</span></span><br><span class="line">        sheet1.write_merge(i,i+<span class="number">3</span>,<span class="number">7</span>,<span class="number">7</span>) <span class="comment">#最后一列"合计"</span></span><br><span class="line">        i += <span class="number">4</span></span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line">    sheet1.write_merge(<span class="number">21</span>,<span class="number">21</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="string">u'合计'</span>,set_style(<span class="string">'Times New Roman'</span>,<span class="number">220</span>,<span class="keyword">True</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#生成第二列</span></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="number">4</span>*len(column0):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(status)):</span><br><span class="line">            sheet1.write(j+i+<span class="number">1</span>, <span class="number">1</span>, status[j])</span><br><span class="line">        i += <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    workbook.save(<span class="string">'../doc/demo1.xls'</span>) <span class="comment">#保存文件</span></span><br><span class="line">write_excel()</span><br></pre></td></tr></table></figure><h4 id="再次牛刀小试"><a href="#再次牛刀小试" class="headerlink" title="再次牛刀小试"></a>再次牛刀小试</h4><p><strong>请生成如下图格式的Excel文件</strong>:</p><p><img src="xlwt练习_02.png" alt="Excel写入练习 图片_02"></p><p><strong>源码</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成exce文件</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write_excel_two</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''创建第二个sheet:sheet2'''</span></span><br><span class="line">    workbook = xlwt.Workbook() <span class="comment">#创建工作簿</span></span><br><span class="line">    sheet2 = workbook.add_sheet(<span class="string">'sheet2'</span>,cell_overwrite_ok=<span class="keyword">True</span>) <span class="comment">#创建sheet2</span></span><br><span class="line">    row0 = [<span class="string">'姓名'</span>,<span class="string">'年龄'</span>,<span class="string">'出生日期'</span>,<span class="string">'爱好'</span>,<span class="string">'关系'</span>]</span><br><span class="line">    column0 = [<span class="string">'小杰'</span>,<span class="string">'小胖'</span>,<span class="string">'小明'</span>,<span class="string">'大神'</span>,<span class="string">'大仙'</span>,<span class="string">'小敏'</span>,<span class="string">'无名'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">#生成第一行</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(row0)):</span><br><span class="line">        sheet2.write(<span class="number">0</span>,i,row0[i],set_style(<span class="string">'Times New Roman'</span>,<span class="number">220</span>,<span class="keyword">True</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#生成第一列</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(column0)):</span><br><span class="line">        sheet2.write(i+<span class="number">1</span>,<span class="number">0</span>,column0[i],set_style(<span class="string">'Times New Roman'</span>,<span class="number">220</span>))</span><br><span class="line"></span><br><span class="line">    sheet2.write(<span class="number">1</span>,<span class="number">2</span>,<span class="string">'1911/11/11'</span>,set_style(<span class="string">'Times New Roman'</span>,<span class="number">220</span>))</span><br><span class="line">    sheet2.write_merge(<span class="number">7</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="string">'暂无'</span>,set_style(<span class="string">'Times New Roman'</span>,<span class="number">220</span>)) <span class="comment">#合并列单元格</span></span><br><span class="line">    sheet2.write_merge(<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="string">'好朋友'</span>,set_style(<span class="string">'Times New Roman'</span>,<span class="number">220</span>)) <span class="comment">#合并行单元格</span></span><br><span class="line"></span><br><span class="line">    workbook.save(<span class="string">'../doc/demo2.xls'</span>) <span class="comment">#保存文件</span></span><br><span class="line">write_excel_two()</span><br></pre></td></tr></table></figure><h3 id="了解更多-auto-excel"><a href="#了解更多-auto-excel" class="headerlink" title="了解更多(auto_excel)"></a>了解更多(auto_excel)</h3><p>如果你对python自动化Excel很感兴趣,想进一步提升请<a href="http://www.python-excel.org/" target="_blank" rel="noopener">猛击这里</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python自动化Wrod和Excel入门培训&quot;&gt;&lt;a href=&quot;#Python自动化Wrod和Excel入门培训&quot; class=&quot;headerlink&quot; title=&quot;Python自动化Wrod和Excel入门培训&quot;&gt;&lt;/a&gt;Python自动化Wrod和Exc
      
    
    </summary>
    
      <category term="Python" scheme="https://ojerk.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://ojerk.cn/tags/Python/"/>
    
      <category term="Word" scheme="https://ojerk.cn/tags/Word/"/>
    
      <category term="Excel" scheme="https://ojerk.cn/tags/Excel/"/>
    
  </entry>
  
  <entry>
    <title>Python多进程不完全指北</title>
    <link href="https://ojerk.cn/Python%E5%A4%9A%E8%BF%9B%E7%A8%8B%E7%AE%80%E5%8D%95%E4%B8%8A%E6%89%8B/"/>
    <id>https://ojerk.cn/Python多进程简单上手/</id>
    <published>2018-08-22T11:34:14.000Z</published>
    <updated>2019-12-05T13:49:20.447Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python-Multiprocessing"><a href="#Python-Multiprocessing" class="headerlink" title="Python Multiprocessing"></a>Python Multiprocessing</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Python 中多线程无法利用多核优势,所以</p><ul><li>面对CPU密集型任务时,Multiprocessing无疑时最好的选择</li><li>面对I/O密集型任务时,可以采用多线程或协程</li></ul><blockquote><p>附:<br><a href="https://docs.python.org/3/library/multiprocessing.html" target="_blank" rel="noopener">Python3 + Multiprocessing官档</a><br><a href="https://www.cnblogs.com/smallmars/p/7093603.html" target="_blank" rel="noopener">参考文献</a></p></blockquote><h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><p><strong>需要注意的一点:</strong> 进程之间的数据不共享</p><p>Multiprocessing模块常用的组件:</p><ul><li>Process: 创建进程的类</li><li>Queue: 队列,用于进程间通信</li><li>Pipe: 管道,另一种实现进程间通信的类方法</li><li>Lock: 进程同步锁,用于确保进程间数据安全</li><li>Pool: 进程池,维护一定的数量的进程</li></ul><h3 id="Process类"><a href="#Process类" class="headerlink" title="Process类"></a>Process类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 由该类实例化得到的对象，表示一个子进程中的任务（尚未启动）</span></span><br><span class="line">Process([group [, target [, name [, args [, kwargs]]]]])</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">    group: 值始终为None</span></span><br><span class="line"><span class="string">    target: 调用对象，即子进程要执行的任务</span></span><br><span class="line"><span class="string">    args: 调用对象的位置参数元组，args=(1,2,'zhangsan',)</span></span><br><span class="line"><span class="string">    kwargs: 调用对象的字典,kwargs=&#123;'name':'zhangsan','age':3&#125;</span></span><br><span class="line"><span class="string">    name: 子进程的名称</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><h4 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h4><table><thead><tr><th>func</th><th>description</th></tr></thead><tbody><tr><td>p.start()</td><td>启动进程，并调用该子进程中的p.run()</td></tr><tr><td>p.run()</td><td>进程启动时运行的方法，正是它去调用target指定的函数，我们自定义类的类中一定要实现该方法</td></tr><tr><td>p.terminate()</td><td>强制终止进程p，不会进行任何清理操作，如果p创建了子进程，该子进程就成了僵尸进程，使用该方法需要特别小心这种情况。如果p还保存了一个锁那么也将不会被释放，进而导致死锁</td></tr><tr><td>p.is_alive()</td><td>如果p仍然运行，返回True</td></tr><tr><td>p.join([timeout])</td><td>主线程等待p终止（强调：是主线程处于等的状态，而p是处于运行的状态）。timeout是可选的超时时间，需要强调的是，p.join只能join住start开启的进程，而不能join住run开启的进程</td></tr></tbody></table><h4 id="常用的属性"><a href="#常用的属性" class="headerlink" title="常用的属性"></a>常用的属性</h4><table><thead><tr><th>func</th><th>description</th></tr></thead><tbody><tr><td>p.daemon</td><td>默认值为False，如果设为True，代表p为后台运行的守护进程，当p的父进程终止时，p也随之终止，并且设定为True后，p不能创建自己的新进程，必须在p.start()之前设置</td></tr><tr><td>p.name</td><td>进程的名称</td></tr><tr><td>p.pid</td><td>进程的pid</td></tr><tr><td>p.exitcode</td><td>进程在运行时为None、如果为–N，表示被信号N结束(了解即可)</td></tr><tr><td>p.authkey</td><td>进程的身份验证键,默认是由os.urandom()随机生成的32字符的字符串。这个键的用途是为涉及网络连接的底层进程间通信提供安全性，这类连接只有在具有相同的身份验证键时才能成功（了解即可）</td></tr></tbody></table><h4 id="Process类的使用"><a href="#Process类的使用" class="headerlink" title="Process类的使用"></a>Process类的使用</h4><p><strong>方法一:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">piao</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">'say %s '</span> %name)</span><br><span class="line">    time.sleep(random.randrange(<span class="number">1</span>,<span class="number">5</span>))</span><br><span class="line">    print(<span class="string">'%s say end'</span> %name)</span><br><span class="line"></span><br><span class="line">p1=Process(target=piao,args=(<span class="string">'f'</span>,)) <span class="comment">#必须加,号</span></span><br><span class="line">p2=Process(target=piao,args=(<span class="string">'u'</span>,))</span><br><span class="line">p3=Process(target=piao,args=(<span class="string">'c'</span>,))</span><br><span class="line">p4=Process(target=piao,args=(<span class="string">'k'</span>,))</span><br><span class="line"></span><br><span class="line">p1.start()</span><br><span class="line">p2.start()</span><br><span class="line">p3.start()</span><br><span class="line">p4.start()</span><br><span class="line">print(<span class="string">'主线程'</span>)</span><br></pre></td></tr></table></figure><p><strong>方法二:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Piao</span><span class="params">(Process)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.name=name</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'say %s'</span> %self.name)</span><br><span class="line"></span><br><span class="line">        time.sleep(random.randrange(<span class="number">1</span>,<span class="number">5</span>))</span><br><span class="line">        print(<span class="string">'%s say end'</span> %self.name)</span><br><span class="line"></span><br><span class="line">p1=Piao(<span class="string">'f'</span>)</span><br><span class="line">p2=Piao(<span class="string">'u'</span>)</span><br><span class="line">p3=Piao(<span class="string">'c'</span>)</span><br><span class="line">p4=Piao(<span class="string">'k'</span>)</span><br><span class="line"></span><br><span class="line">p1.start() <span class="comment">#start会自动调用run</span></span><br><span class="line">p2.start()</span><br><span class="line">p3.start()</span><br><span class="line">p4.start()</span><br><span class="line">print(<span class="string">'主线程'</span>)</span><br></pre></td></tr></table></figure><p><em>注意：在 windows 中 Process() 必须放到 if <strong>name</strong> == ‘<strong>main</strong>‘:下</em></p><p><strong>关于守护进程的例子:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Piao</span><span class="params">(Process)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        super().__init__()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'%s is piaoing'</span> %self.name)</span><br><span class="line">        time.sleep(random.randrange(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        print(<span class="string">'%s is piao end'</span> %self.name)</span><br><span class="line"></span><br><span class="line">p=Piao(<span class="string">'e'</span>)</span><br><span class="line">p.daemon=<span class="keyword">True</span> <span class="comment">#一定要在p.start()前设置,设置p为守护进程,禁止p创建子进程,并且父进程死,p跟着一起死</span></span><br><span class="line">p.start()</span><br><span class="line">p.join(<span class="number">0.0001</span>) <span class="comment">#等待p停止,等0.0001秒就不再等了</span></span><br><span class="line">print(<span class="string">'开始'</span>)</span><br></pre></td></tr></table></figure><h3 id="Queue类"><a href="#Queue类" class="headerlink" title="Queue类"></a>Queue类</h3><p>进程间通信方式的实现</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建共享的进程队列，Queue是多进程安全的队列，可以使用Queue实现多进程之间的数据传递。</span></span><br><span class="line">Queue([maxsize]) <span class="comment"># maxsize是队列中允许最大项数，省略则无大小限制</span></span><br></pre></td></tr></table></figure><h4 id="方法介绍"><a href="#方法介绍" class="headerlink" title="方法介绍"></a>方法介绍</h4><table><thead><tr><th>func</th><th>description</th></tr></thead><tbody><tr><td>q.put()</td><td>插入数据到队列中</td></tr><tr><td>q.get()</td><td>从队列读取并且删除一个元素</td></tr><tr><td>q.get_nowait()</td><td>同q.get(False)</td></tr><tr><td>q.put_nowait()</td><td>同q.put(False)</td></tr><tr><td>q.empty()</td><td>调用此方法时q为空则返回True，该结果不可靠，比如在返回True的过程中，如果队列中又加入了项目</td></tr><tr><td>q.full()</td><td>调用此方法时q已满则返回True，该结果不可靠，比如在返回True的过程中，如果队列中的项目被取走</td></tr><tr><td>q.qsize()</td><td>返回队列中目前项目的正确数量，结果也不可靠，理由同q.empty()和q.full()一样</td></tr></tbody></table><p><strong>说明:</strong> put()还有两个可选参数：blocked和timeout。如果blocked为True（默认值），并且timeout为正值，该方法会阻塞timeout指定的时间，直到该队列有剩余的空间。如果超时，会抛出Queue.Full异常。如果blocked为False，但该Queue已满，会立即抛出Queue.Full异常,get()与之相反。</p><h4 id="Queue的简单使用"><a href="#Queue的简单使用" class="headerlink" title="Queue的简单使用"></a>Queue的简单使用</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Queue</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">q=Queue(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#put ,get ,put_nowait,get_nowait,full,empty</span></span><br><span class="line">q.put(<span class="number">3</span>)</span><br><span class="line">q.put(<span class="number">3</span>)</span><br><span class="line">q.put(<span class="number">3</span>)</span><br><span class="line">print(q.full()) <span class="comment">#满了</span></span><br><span class="line"></span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.empty()) <span class="comment">#空了</span></span><br></pre></td></tr></table></figure><h4 id="基于Queue实现生产者消费者模型"><a href="#基于Queue实现生产者消费者模型" class="headerlink" title="基于Queue实现生产者消费者模型"></a>基于Queue实现生产者消费者模型</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Queue</span><br><span class="line"><span class="keyword">import</span> time,random,os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">consumer</span><span class="params">(q)</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        res=q.get()</span><br><span class="line">        <span class="keyword">if</span> res <span class="keyword">is</span> <span class="keyword">None</span>:<span class="keyword">break</span></span><br><span class="line">        print(<span class="string">'\033[45m消费者拿到了：%s\033[0m'</span> %res)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">producer</span><span class="params">(seq,q)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> seq:</span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        print(<span class="string">'\033[46m生产者生产了：%s\033[0m'</span> %item)</span><br><span class="line">        q.put(item)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    q=Queue()</span><br><span class="line">    c=Process(target=consumer,args=(q,))</span><br><span class="line">    c.start()</span><br><span class="line">    producer((<span class="string">'包子%s'</span> %i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>)),q)</span><br><span class="line">    q.put(<span class="keyword">None</span>)</span><br><span class="line">    c.join()</span><br><span class="line">    print(<span class="string">'主线程'</span>)</span><br></pre></td></tr></table></figure><h3 id="Pool类"><a href="#Pool类" class="headerlink" title="Pool类"></a>Pool类</h3><p>通过维护一个进程池来控制进程数目</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建进程池</span></span><br><span class="line">Pool([numprocess  [,initializer [, initargs]]])</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">numprocess: 要创建的进程数，如果省略，将默认使用cpu_count()的值</span></span><br><span class="line"><span class="string">initializer：是每个工作进程启动时要执行的可调用对象，默认为None</span></span><br><span class="line"><span class="string">initargs：是要传给initializer的参数组</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><h4 id="方法简介"><a href="#方法简介" class="headerlink" title="方法简介"></a>方法简介</h4><table><thead><tr><th>func</th><th>description</th></tr></thead><tbody><tr><td>p.apply(func [, args [, kwargs]])</td><td>在一个池工作进程中执行func(*args,**kwargs),阻塞模式</td></tr><tr><td>p.apply_async(func [, args [, kwargs]])</td><td>在一个池工作进程中执行func(*args,**kwargs),然后返回结果。非阻塞,此方法的结果是AsyncResult类的实例，可调用callback函数。当func的结果变为可用时，将理解传递给callback。callback禁止执行任何阻塞操作，否则将接收其他异步操作中的结果。</td></tr><tr><td>p.close()</td><td>关闭进程池，防止进一步操作,如果所有操作持续挂起，它们将在工作进程终止前完成</td></tr><tr><td>P.jion()</td><td>等待所有工作进程退出。此方法只能在close（）或teminate()之后调用</td></tr></tbody></table><p><strong>方法apply_async()和map_async（）的返回值是AsyncResul的实例obj。实例具有以下方法:</strong></p><table><thead><tr><th>func</th><th>description</th></tr></thead><tbody><tr><td>obj.get()</td><td>返回结果，如果有必要则等待结果到达。timeout是可选的。如果在指定时间内还没有到达，将引发一场。如果远程操作中引发了异常，它将在调用此方法时再次被引发</td></tr><tr><td>obj.ready()</td><td>如果调用完成，返回True</td></tr><tr><td>obj.successful()</td><td>如果调用完成且没有引发异常，返回True，如果在结果就绪之前调用此方法，引发异常</td></tr><tr><td>obj.wait([timeout])</td><td>等待结果变为可用</td></tr><tr><td>obj.terminate()</td><td>立即终止所有工作进程，同时不执行任何清理或结束任何挂起工作。如果p被垃圾回收，将自动调用此函数</td></tr></tbody></table><h4 id="apply-async-非阻塞使用"><a href="#apply-async-非阻塞使用" class="headerlink" title="apply_async(非阻塞使用)"></a>apply_async(非阻塞使用)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> time,random,os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span><span class="params">(n)</span>:</span></span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> n**<span class="number">2</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    p=Pool()</span><br><span class="line"></span><br><span class="line">    res_l=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        res=p.apply_async(work,args=(i,))</span><br><span class="line">        res_l.append(res)</span><br><span class="line"></span><br><span class="line">    p.close()</span><br><span class="line">    p.join() <span class="comment">#等待进程池中所有进程执行完毕</span></span><br><span class="line"></span><br><span class="line">    nums=[]</span><br><span class="line">    <span class="keyword">for</span> res <span class="keyword">in</span> res_l:</span><br><span class="line">        nums.append(res.get()) <span class="comment">#拿到所有结果</span></span><br><span class="line">    print(nums) <span class="comment">#主进程拿到所有的处理结果,可以在主进程中进行统一进行处理</span></span><br></pre></td></tr></table></figure><h4 id="apply-async-回调函数-爬虫-实例"><a href="#apply-async-回调函数-爬虫-实例" class="headerlink" title="apply_async + 回调函数 + 爬虫 实例"></a>apply_async + 回调函数 + 爬虫 实例</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> time,random</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_page</span><span class="params">(url,pattern)</span>:</span></span><br><span class="line">    response=requests.get(url)</span><br><span class="line">    <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">        <span class="keyword">return</span> (response.text,pattern)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_page</span><span class="params">(info)</span>:</span></span><br><span class="line">    page_content,pattern=info</span><br><span class="line">    res=re.findall(pattern,page_content)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> res:</span><br><span class="line">        dic=&#123;</span><br><span class="line">            <span class="string">'index'</span>:item[<span class="number">0</span>],</span><br><span class="line">            <span class="string">'title'</span>:item[<span class="number">1</span>],</span><br><span class="line">            <span class="string">'actor'</span>:item[<span class="number">2</span>].strip()[<span class="number">3</span>:],</span><br><span class="line">            <span class="string">'time'</span>:item[<span class="number">3</span>][<span class="number">5</span>:],</span><br><span class="line">            <span class="string">'score'</span>:item[<span class="number">4</span>]+item[<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        print(dic)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    pattern1=re.compile(<span class="string">r'&lt;dd&gt;.*?board-index.*?&gt;(\d+)&lt;.*?title="(.*?)".*?star.*?&gt;(.*?)&lt;.*?releasetime.*?&gt;(.*?)&lt;.*?integer.*?&gt;(.*?)&lt;.*?fraction.*?&gt;(.*?)&lt;'</span>,re.S)</span><br><span class="line"></span><br><span class="line">    url_dic=&#123;</span><br><span class="line">        <span class="string">'http://maoyan.com/board/7'</span>:pattern1,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p=Pool()</span><br><span class="line">    res_l=[]</span><br><span class="line">    <span class="keyword">for</span> url,pattern <span class="keyword">in</span> url_dic.items():</span><br><span class="line">        res=p.apply_async(get_page,args=(url,pattern),callback=parse_page)</span><br><span class="line">        res_l.append(res)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> res_l:</span><br><span class="line">        i.get()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python-Multiprocessing&quot;&gt;&lt;a href=&quot;#Python-Multiprocessing&quot; class=&quot;headerlink&quot; title=&quot;Python Multiprocessing&quot;&gt;&lt;/a&gt;Python Multiprocessi
      
    
    </summary>
    
      <category term="Python" scheme="https://ojerk.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://ojerk.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Vscode下书写Markdown的利器</title>
    <link href="https://ojerk.cn/Vscode%E4%B8%8B%E4%B9%A6%E5%86%99Markdown%E7%9A%84%E5%88%A9%E5%99%A8/"/>
    <id>https://ojerk.cn/Vscode下书写Markdown的利器/</id>
    <published>2018-08-22T11:22:12.000Z</published>
    <updated>2019-12-05T13:52:25.743Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Markdown-All-in-One"><a href="#Markdown-All-in-One" class="headerlink" title="Markdown All in One"></a>Markdown All in One</h1><blockquote><p>一款在VSCode下,编辑md文件十分好用的扩展插件,<a href="https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one#overview" target="_blank" rel="noopener">搬运来源</a>,<a href="https://ci.appveyor.com/project/neilsustc/vscode-markdown/build/artifacts" target="_blank" rel="noopener">下载地址</a></p></blockquote><ul><li><a href="#markdown-all-in-one">Markdown All in One</a><ul><li><a href="#%e7%89%b9%e7%82%b9">特点</a></li><li><a href="#%e5%b8%b8%e7%94%a8%e5%bf%ab%e6%8d%b7%e9%94%ae">常用快捷键</a><ul><li><a href="#%e4%b8%be%e4%b8%aa%e5%bf%ab%e6%8d%b7%e9%94%ae%e7%9a%84%e4%bd%bf%e7%94%a8%e6%a0%97%e5%ad%90">举个快捷键的使用栗子</a><ul><li><a href="#bold">bold</a></li><li><a href="#%e6%a0%87%e9%a2%98">标题</a></li><li><a href="#%e7%9b%ae%e5%bd%95">目录</a></li><li><a href="#list-editing">List Editing</a></li><li><a href="#%e6%a0%bc%e5%bc%8f%e5%8c%96-table">格式化 Table</a></li><li><a href="#task-list">Task List</a></li><li><a href="#math-rendering">Math Rendering</a></li></ul></li></ul></li><li><a href="#%e4%b8%80%e4%ba%9b%e6%9c%89%e7%94%a8%e7%9a%84%e5%91%bd%e4%bb%a4">一些有用的命令</a></li></ul></li></ul><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul><li>提供了常用操作便利的快捷键</li><li>支持目录</li><li>一边书写一边预览(Ctrl + Shift + V or Ctrl + K V)</li><li>可轻松转换为HTML文件和PDF文件</li><li>优化了<strong>List editing</strong>的编辑</li><li>可格式化table (Alt + Shift + F) 以及Task list (use Alt + C to check/uncheck a list item)</li><li>支持特殊数学符号渲染</li></ul><h2 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h2><table><thead><tr><th>Key</th><th>Command</th></tr></thead><tbody><tr><td>Ctrl + B</td><td>粗体</td></tr><tr><td>Ctrl + I</td><td>斜体</td></tr><tr><td>Alt + S</td><td>删除线</td></tr><tr><td>Ctrl + Shift + ]</td><td>标题(uplevel)</td></tr><tr><td>Ctrl + Shift + [</td><td>标题(downlevel)</td></tr><tr><td>Ctrl + M</td><td>Toggle math environment</td></tr><tr><td>Alt + C</td><td>Check/Uncheck task list item</td></tr></tbody></table><h3 id="举个快捷键的使用栗子"><a href="#举个快捷键的使用栗子" class="headerlink" title="举个快捷键的使用栗子"></a>举个快捷键的使用栗子</h3><h4 id="bold"><a href="#bold" class="headerlink" title="bold"></a>bold</h4><p><img src="https://github.com/neilsustc/vscode-markdown/raw/master/images/gifs/bold-quick.gif" alt="图片"></p><h4 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h4><p><img src="https://github.com/neilsustc/vscode-markdown/raw/master/images/gifs/heading.gif" alt="图片"></p><h4 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h4><p><img src="https://github.com/neilsustc/vscode-markdown/raw/master/images/gifs/toc.gif" alt="图片"></p><h4 id="List-Editing"><a href="#List-Editing" class="headerlink" title="List Editing"></a>List Editing</h4><p><img src="https://github.com/neilsustc/vscode-markdown/raw/master/images/gifs/list-editing.gif" alt="图片"></p><h4 id="格式化-Table"><a href="#格式化-Table" class="headerlink" title="格式化 Table"></a>格式化 Table</h4><p><img src="https://github.com/neilsustc/vscode-markdown/raw/master/images/gifs/table-formatter.gif" alt="图片"></p><h4 id="Task-List"><a href="#Task-List" class="headerlink" title="Task List"></a>Task List</h4><p><img src="https://github.com/neilsustc/vscode-markdown/raw/master/images/gifs/tasklists.gif" alt="图片"></p><h4 id="Math-Rendering"><a href="#Math-Rendering" class="headerlink" title="Math Rendering"></a>Math Rendering</h4><p><img src="https://github.com/neilsustc/vscode-markdown/raw/master/images/math.png" alt="图片"></p><h2 id="一些有用的命令"><a href="#一些有用的命令" class="headerlink" title="一些有用的命令"></a>一些有用的命令</h2><ul><li>Markdown: Create Table of Contents</li><li>Markdown: Update Table of Contents</li><li>Markdown: Toggle code span</li><li>Markdown: Print current document to HTML</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Markdown-All-in-One&quot;&gt;&lt;a href=&quot;#Markdown-All-in-One&quot; class=&quot;headerlink&quot; title=&quot;Markdown All in One&quot;&gt;&lt;/a&gt;Markdown All in One&lt;/h1&gt;&lt;bloc
      
    
    </summary>
    
      <category term="Markdown" scheme="https://ojerk.cn/categories/Markdown/"/>
    
    
      <category term="Markdown" scheme="https://ojerk.cn/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>Pandas调用to_csv方法乱码问题的解决</title>
    <link href="https://ojerk.cn/%E8%A7%A3%E5%86%B3Pandas%E4%B8%8B-to-csv%E4%B9%B1%E7%A0%81/"/>
    <id>https://ojerk.cn/解决Pandas下-to-csv乱码/</id>
    <published>2018-08-20T10:34:31.000Z</published>
    <updated>2019-11-23T05:46:46.535Z</updated>
    
    <content type="html"><![CDATA[<h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><p>文件开头没有BOM</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.to_csv(“df.csv”, encoding=’utf_8_sig’)</span><br></pre></td></tr></table></figure><p>转载自: <a href="https://blog.csdn.net/weixin_39461443/article/details/75303072" target="_blank" rel="noopener">Dyson_L的个人博客</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;问题分析&quot;&gt;&lt;a href=&quot;#问题分析&quot; class=&quot;headerlink&quot; title=&quot;问题分析&quot;&gt;&lt;/a&gt;问题分析&lt;/h2&gt;&lt;p&gt;文件开头没有BOM&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td 
      
    
    </summary>
    
      <category term="pandas" scheme="https://ojerk.cn/categories/pandas/"/>
    
    
      <category term="pandas" scheme="https://ojerk.cn/tags/pandas/"/>
    
  </entry>
  
  <entry>
    <title>Python标准库之Shutil</title>
    <link href="https://ojerk.cn/Shutil/"/>
    <id>https://ojerk.cn/Shutil/</id>
    <published>2018-08-06T00:52:12.000Z</published>
    <updated>2019-12-05T13:50:23.035Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python-Shutil-Easystart"><a href="#Python-Shutil-Easystart" class="headerlink" title="Python Shutil Easystart"></a>Python Shutil Easystart</h1><p>os模块提供了对目录或者文件的新建/删除/查看文件属性，还提供了对文件以及目录的路径操作, 比如说：绝对路径，父目录…  但是，os并没有提供文件的移动、复制、打包、压缩、解压等操作, 而接下来所讲的shutil则就是对os中文件操作的补充</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="shutil-copyfileobj-fsrc-fdst-length"><a href="#shutil-copyfileobj-fsrc-fdst-length" class="headerlink" title="shutil.copyfileobj(fsrc, fdst[, length])"></a>shutil.copyfileobj(fsrc, fdst[, length])</h3><p>copy文件内容到另一个文件，可以copy指定大小的内容</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copyfileobj</span><span class="params">(fsrc, fdst, length=<span class="number">16</span>*<span class="number">1024</span>)</span>:</span></span><br><span class="line">    <span class="string">"""copy data from file-like object fsrc to file-like object fdst"""</span></span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        buf = fsrc.read(length)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> buf:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        fdst.write(buf)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意: 在其中fsrc，fdst都是文件对象，都需要打开后才能进行复制操作</span></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">f1=open(<span class="string">'name'</span>,<span class="string">'r'</span>)</span><br><span class="line">f2=open(<span class="string">'name_copy'</span>,<span class="string">'w+'</span>)</span><br><span class="line">shutil.copyfileobj(f1,f2,length=<span class="number">16</span>*<span class="number">1024</span>)</span><br></pre></td></tr></table></figure><h3 id="shutil-copyfile-src-dst"><a href="#shutil-copyfile-src-dst" class="headerlink" title="shutil.copyfile(src, dst)"></a>shutil.copyfile(src, dst)</h3><p>只复制文件内容,效果同上,不过这里只用给path而不需要给文件对象,从源src复制到dst中去,前提是目标地址是具备可写权限,否则将抛出异常信息IOException,值得注意的是当前的dst已存在的话就会被覆盖掉</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copyfile</span><span class="params">(src, dst, *, follow_symlinks=True)</span>:</span></span><br><span class="line">    <span class="string">"""Copy data from src to dst.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    If follow_symlinks is not set and src is a symbolic link, a new</span></span><br><span class="line"><span class="string">    symlink will be created instead of copying the file it points to.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> _samefile(src, dst):</span><br><span class="line">        <span class="keyword">raise</span> SameFileError(<span class="string">"&#123;!r&#125; and &#123;!r&#125; are the same file"</span>.format(src, dst))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> fn <span class="keyword">in</span> [src, dst]:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            st = os.stat(fn)</span><br><span class="line">        <span class="keyword">except</span> OSError:</span><br><span class="line">            <span class="comment"># File most likely does not exist</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># XXX What about other special files? (sockets, devices...)</span></span><br><span class="line">            <span class="keyword">if</span> stat.S_ISFIFO(st.st_mode):</span><br><span class="line">                <span class="keyword">raise</span> SpecialFileError(<span class="string">"`%s` is a named pipe"</span> % fn)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> follow_symlinks <span class="keyword">and</span> os.path.islink(src):</span><br><span class="line">        os.symlink(os.readlink(src), dst)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">with</span> open(src, <span class="string">'rb'</span>) <span class="keyword">as</span> fsrc:</span><br><span class="line">            <span class="keyword">with</span> open(dst, <span class="string">'wb'</span>) <span class="keyword">as</span> fdst:</span><br><span class="line">                copyfileobj(fsrc, fdst)</span><br><span class="line">    <span class="keyword">return</span> dst</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line">shutil.copyfile(<span class="string">'name'</span>, <span class="string">'name_copy_2'</span>)</span><br></pre></td></tr></table></figure><h3 id="shutil-copymode-src-dst"><a href="#shutil-copymode-src-dst" class="headerlink" title="shutil.copymode(src, dst)"></a>shutil.copymode(src, dst)</h3><p>仅copy权限，不更改文件内容，组和用户</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copymode</span><span class="params">(src, dst, *, follow_symlinks=True)</span>:</span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> follow_symlinks <span class="keyword">and</span> os.path.islink(src) <span class="keyword">and</span> os.path.islink(dst):</span><br><span class="line">    <span class="keyword">if</span> hasattr(os, <span class="string">'lchmod'</span>):</span><br><span class="line">      stat_func, chmod_func = os.lstat, os.lchmod</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">elif</span> hasattr(os, <span class="string">'chmod'</span>):</span><br><span class="line">    stat_func, chmod_func = os.stat, os.chmod</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  st = stat_func(src)</span><br><span class="line">  chmod_func(dst, stat.S_IMODE(st.st_mode))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用(以Linux 平台为例子)</span></span><br><span class="line">&gt;&gt;&gt;ls -l</span><br><span class="line">total <span class="number">4</span></span><br><span class="line">-rw-r--r--. <span class="number">1</span> root root <span class="number">79</span> May <span class="number">14</span> <span class="number">05</span>:<span class="number">17</span> test1</span><br><span class="line">-rwxr-xr-x. <span class="number">1</span> root root <span class="number">0</span> May <span class="number">14</span> <span class="number">19</span>:<span class="number">10</span> test2</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> shutil</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.copymode(<span class="string">'test1'</span>, <span class="string">'test2'</span>)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;ls -l</span><br><span class="line">total <span class="number">4</span></span><br><span class="line">-rw-r--r--. <span class="number">1</span> root root <span class="number">79</span> May <span class="number">14</span> <span class="number">05</span>:<span class="number">17</span> test1</span><br><span class="line">-rw-r--r--. <span class="number">1</span> root root <span class="number">0</span> May <span class="number">14</span> <span class="number">19</span>:<span class="number">10</span> test2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当目标文件dst不存在时,将会报错</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.copymode(<span class="string">'test1'</span>, <span class="string">'test3'</span>)  </span><br><span class="line">Traceback (most recent call last):</span><br><span class="line"> File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line"> File <span class="string">"/usr/local/python/lib/python3.6/shutil.py"</span>, line <span class="number">132</span>, <span class="keyword">in</span> copymode</span><br><span class="line">  chmod_func(dst, stat.S_IMODE(st.st_mode))</span><br><span class="line">FileNotFoundError: [Errno <span class="number">2</span>] No such file <span class="keyword">or</span> directory: <span class="string">'test233'</span></span><br></pre></td></tr></table></figure><h3 id="shutil-copystat-src-dst"><a href="#shutil-copystat-src-dst" class="headerlink" title="shutil.copystat(src, dst)"></a>shutil.copystat(src, dst)</h3><p>复制所有的状态信息，包括权限，组，用户，时间等</p><h3 id="shutil-copy-src-dst"><a href="#shutil-copy-src-dst" class="headerlink" title="shutil.copy(src, dst)"></a>shutil.copy(src, dst)</h3><p>复制文件的内容以及权限，先copyfile后copymode</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copy</span><span class="params">(src, dst, *, follow_symlinks=True)</span>:</span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span> os.path.isdir(dst):</span><br><span class="line">   dst = os.path.join(dst, os.path.basename(src))</span><br><span class="line"> copyfile(src, dst, follow_symlinks=follow_symlinks)</span><br><span class="line"> copymode(src, dst, follow_symlinks=follow_symlinks)</span><br><span class="line"> <span class="keyword">return</span> dst</span><br></pre></td></tr></table></figure><h3 id="shutil-copy2-src-dst"><a href="#shutil-copy2-src-dst" class="headerlink" title="shutil.copy2(src, dst)"></a>shutil.copy2(src, dst)</h3><p>复制文件的内容以及文件的所有状态信息。先copyfile后copystat</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copy2</span><span class="params">(src, dst, *, follow_symlinks=True)</span>:</span></span><br><span class="line">  <span class="string">"""Copy data and all stat info ("cp -p src dst"). Return the file's</span></span><br><span class="line"><span class="string">  destination."</span></span><br><span class="line"><span class="string">  The destination may be a directory.</span></span><br><span class="line"><span class="string">  If follow_symlinks is false, symlinks won't be followed. This</span></span><br><span class="line"><span class="string">  resembles GNU's "cp -P src dst".</span></span><br><span class="line"><span class="string">  """</span></span><br><span class="line">  <span class="keyword">if</span> os.path.isdir(dst):</span><br><span class="line">    dst = os.path.join(dst, os.path.basename(src))</span><br><span class="line">  copyfile(src, dst, follow_symlinks=follow_symlinks)</span><br><span class="line">  copystat(src, dst, follow_symlinks=follow_symlinks)</span><br><span class="line">  <span class="keyword">return</span> dst</span><br></pre></td></tr></table></figure><h3 id="shutil-copytree-src-dst-symlinks-False-ignore-None-copy-function-copy2-ignore-dangling-symlinks-False"><a href="#shutil-copytree-src-dst-symlinks-False-ignore-None-copy-function-copy2-ignore-dangling-symlinks-False" class="headerlink" title="shutil.copytree(src, dst, symlinks=False, ignore=None, copy_function=copy2, ignore_dangling_symlinks=False)"></a>shutil.copytree(src, dst, symlinks=False, ignore=None, copy_function=copy2, ignore_dangling_symlinks=False)</h3><p>递归的复制文件内容及状态信息</p><h3 id="shutil-rmtree-path-ignore-errors-False-onerror-None"><a href="#shutil-rmtree-path-ignore-errors-False-onerror-None" class="headerlink" title="shutil.rmtree(path, ignore_errors=False, onerror=None)"></a>shutil.rmtree(path, ignore_errors=False, onerror=None)</h3><p>递归地删除文件</p><h3 id="shutil-move-src-dst"><a href="#shutil-move-src-dst" class="headerlink" title="shutil.move(src, dst)"></a>shutil.move(src, dst)</h3><p>递归的移动文件</p><h3 id="shutil-make-archive-base-name-format-root-dir-None-base-dir-None-verbose-0-dry-run-0-owner-None-group-None-logger-None"><a href="#shutil-make-archive-base-name-format-root-dir-None-base-dir-None-verbose-0-dry-run-0-owner-None-group-None-logger-None" class="headerlink" title="shutil.make_archive(base_name, format, root_dir=None, base_dir=None, verbose=0, dry_run=0, owner=None, group=None, logger=None)"></a>shutil.make_archive(base_name, format, root_dir=None, base_dir=None, verbose=0, dry_run=0, owner=None, group=None, logger=None)</h3><p>压缩打包</p><ul><li>base_name：压缩打包后的文件名或者路径名</li><li>format：   压缩或者打包格式, “zip”, “tar”, “bztar”or “gztar”</li><li>root_dir:  将哪个目录或者文件打包（也就是源文件）</li></ul><h3 id="shutil-unpack-archive-filename-extract-dir-format"><a href="#shutil-unpack-archive-filename-extract-dir-format" class="headerlink" title="shutil.unpack_archive(filename[, extract_dir[, format]])"></a>shutil.unpack_archive(filename[, extract_dir[, format]])</h3><p>解压</p><ul><li>filename: 待解压文件的完整路径</li><li>extract_dir: 解压路径, 默认为当前目录</li><li>format: 解压格式, one of “zip”, “tar”, “gztar”, “bztar”, or “xztar”</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python-Shutil-Easystart&quot;&gt;&lt;a href=&quot;#Python-Shutil-Easystart&quot; class=&quot;headerlink&quot; title=&quot;Python Shutil Easystart&quot;&gt;&lt;/a&gt;Python Shutil Eas
      
    
    </summary>
    
      <category term="Python" scheme="https://ojerk.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://ojerk.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python标准库之itertools</title>
    <link href="https://ojerk.cn/Itertools/"/>
    <id>https://ojerk.cn/Itertools/</id>
    <published>2018-08-06T00:52:01.000Z</published>
    <updated>2019-12-05T13:47:15.378Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python-Itertools"><a href="#Python-Itertools" class="headerlink" title="Python Itertools"></a>Python Itertools</h1><p>高效循环创建迭代器的函数集合</p><p>文章大部分内容转载自<a href="http://www.wklken.me/posts/2013/08/20/python-extra-itertools.html" target="_blank" rel="noopener">wklken</a>前辈的博客, 本来想自己翻译和补充<a href="https://docs.python.org/3/library/itertools.html" target="_blank" rel="noopener">官方文档</a>的内容, 然后发现wklken前辈已经做了这件事情,只是用的Python2,所以在这里我用Python3修改整理和补充了一些内容,节省了不少时间</p><p><strong>特别说明:</strong></p><p>python2 to 3 关于itertools MODULE的一些改变</p><p><img src="2to3.png" alt="2to3"></p><h2 id="总览"><a href="#总览" class="headerlink" title="总览"></a>总览</h2><p>由三部分组成:</p><ul><li>无限迭代器</li><li>处理输入系列迭代器</li><li>组成生成器</li></ul><p><strong>无限迭代器:</strong></p><p><img src="无限迭代器.png" alt="无限迭代器"></p><p><strong>处理输入序列迭代器:</strong></p><p><img src="处理输入序列迭代器.png" alt="处理输入序列迭代器"></p><p><strong>组合迭代器:</strong></p><p><img src="组合迭代器.png" alt="组合迭代器"></p><h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><p>在没有学习迭代器之前,如果你想计算四匹马赛跑到达终点排名的所有可能性,代码该如何去写?</p><h2 id="无限迭代器"><a href="#无限迭代器" class="headerlink" title="无限迭代器"></a>无限迭代器</h2><h3 id="itertools-count-start-0-step-1"><a href="#itertools-count-start-0-step-1" class="headerlink" title="itertools.count(start=0, step=1)"></a>itertools.count(start=0, step=1)</h3><p>创建一个迭代器，生成从start开始的连续整数，如果忽略n，则从0开始计算(注意：此迭代器不支持长整数)</p><p>如果超出了sys.maxint，计数器将溢出并继续从-sys.maxint-1开始计算</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">(start=<span class="number">0</span>, step=<span class="number">1</span>)</span>:</span></span><br><span class="line">    <span class="comment"># count(10) --&gt; 10 11 12 13 14 ...</span></span><br><span class="line">    <span class="comment"># count(2.5, 0.5) -&gt; 2.5 3.0 3.5 ...</span></span><br><span class="line">    n = start</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        <span class="keyword">yield</span> n</span><br><span class="line">        n += step</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等价于</span></span><br><span class="line">start + step * i <span class="keyword">for</span> i <span class="keyword">in</span> count()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> zip(count(<span class="number">1</span>), [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]):</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">(<span class="number">1</span>, <span class="string">'a'</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="string">'b'</span>)</span><br><span class="line">(<span class="number">3</span>, <span class="string">'c'</span>)</span><br></pre></td></tr></table></figure><h3 id="itertools-cycle-iterable"><a href="#itertools-cycle-iterable" class="headerlink" title="itertools.cycle(iterable)"></a>itertools.cycle(iterable)</h3><p>创建一个迭代器，对iterable中的元素反复执行循环操作，内部会生成iterable中的元素的一个副本，此副本用于返回循环中的重复项</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cycle</span><span class="params">(iterable)</span>:</span></span><br><span class="line">    <span class="comment"># cycle('ABCD') --&gt; A B C D A B C D A B C D ...</span></span><br><span class="line">    saved = []</span><br><span class="line">    <span class="keyword">for</span> element <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">yield</span> element</span><br><span class="line">        saved.append(element)</span><br><span class="line">    <span class="keyword">while</span> saved:</span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> saved:</span><br><span class="line">            <span class="keyword">yield</span> element</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> cycle([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]):</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">10</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    print(i, item)</span><br><span class="line"></span><br><span class="line">(<span class="number">1</span>, <span class="string">'a'</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="string">'b'</span>)</span><br><span class="line">(<span class="number">3</span>, <span class="string">'c'</span>)</span><br><span class="line">(<span class="number">4</span>, <span class="string">'a'</span>)</span><br><span class="line">(<span class="number">5</span>, <span class="string">'b'</span>)</span><br><span class="line">(<span class="number">6</span>, <span class="string">'c'</span>)</span><br><span class="line">(<span class="number">7</span>, <span class="string">'a'</span>)</span><br><span class="line">(<span class="number">8</span>, <span class="string">'b'</span>)</span><br><span class="line">(<span class="number">9</span>, <span class="string">'c'</span>)</span><br></pre></td></tr></table></figure><h3 id="itertools-repeat-object-times"><a href="#itertools-repeat-object-times" class="headerlink" title="itertools.repeat(object[, times])"></a>itertools.repeat(object[, times])</h3><p>创建一个迭代器，重复生成object，times（如果已提供）指定重复计数，如果未提供times，将无止尽返回该对象</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">repeat</span><span class="params">(object, times=None)</span>:</span></span><br><span class="line">    <span class="comment"># repeat(10, 3) --&gt; 10 10 10</span></span><br><span class="line">    <span class="keyword">if</span> times <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">            <span class="keyword">yield</span> object</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> xrange(times):</span><br><span class="line">            <span class="keyword">yield</span> object</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> repeat(<span class="string">'over-and-over'</span>, <span class="number">5</span>):</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">over-<span class="keyword">and</span>-over</span><br><span class="line">over-<span class="keyword">and</span>-over</span><br><span class="line">over-<span class="keyword">and</span>-over</span><br><span class="line">over-<span class="keyword">and</span>-over</span><br><span class="line">over-<span class="keyword">and</span>-over</span><br></pre></td></tr></table></figure><h2 id="处理输入序列迭代器"><a href="#处理输入序列迭代器" class="headerlink" title="处理输入序列迭代器"></a>处理输入序列迭代器</h2><h3 id="itertools-chain-iterables"><a href="#itertools-chain-iterables" class="headerlink" title="itertools.chain(*iterables)"></a>itertools.chain(*iterables)</h3><p>将多个迭代器作为参数, 但只返回单个迭代器, 它产生所有参数迭代器的内容, 就好像他们是来自于一个单一的序列</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">chain</span><span class="params">(*iterables)</span>:</span></span><br><span class="line">    <span class="comment"># chain('ABC', 'DEF') --&gt; A B C D E F</span></span><br><span class="line">    <span class="keyword">for</span> it <span class="keyword">in</span> iterables:</span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> it:</span><br><span class="line">            <span class="keyword">yield</span> element</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> chain([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]):</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br></pre></td></tr></table></figure><h3 id="itertools-compress-data-selectors"><a href="#itertools-compress-data-selectors" class="headerlink" title="itertools.compress(data, selectors)"></a>itertools.compress(data, selectors)</h3><p>提供一个选择列表，对原始数据进行筛选</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compress</span><span class="params">(data, selectors)</span>:</span></span><br><span class="line">    <span class="comment"># compress('ABCDEF', [1,0,1,0,1,1]) --&gt; A C E F</span></span><br><span class="line">    <span class="keyword">return</span> (d <span class="keyword">for</span> d, s <span class="keyword">in</span> izip(data, selectors) <span class="keyword">if</span> s)</span><br></pre></td></tr></table></figure><h3 id="itertools-dropwhile-predicate-iterable"><a href="#itertools-dropwhile-predicate-iterable" class="headerlink" title="itertools.dropwhile(predicate, iterable)"></a>itertools.dropwhile(predicate, iterable)</h3><p>创建一个迭代器，只要函数predicate(item)为True，就丢弃iterable中的项，如果predicate返回False，就会生成iterable中的项和所有后续项</p><p>即：在条件为false之后的第一次, 返回迭代器中剩下来的项</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropwhile</span><span class="params">(predicate, iterable)</span>:</span></span><br><span class="line">    <span class="comment"># dropwhile(lambda x: x&lt;5, [1,4,6,4,1]) --&gt; 6 4 1</span></span><br><span class="line">    iterable = iter(iterable)</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> predicate(x):</span><br><span class="line">            <span class="keyword">yield</span> x</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">yield</span> x</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">should_drop</span><span class="params">(x)</span>:</span></span><br><span class="line">    print(<span class="string">'Testing:'</span>, x)</span><br><span class="line">    <span class="keyword">return</span>(x&lt;<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dropwhile(should_drop, [ <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">-2</span> ]):</span><br><span class="line">    print(<span class="string">'Yielding:'</span>, i)</span><br><span class="line"></span><br><span class="line">Testing: <span class="number">-1</span></span><br><span class="line">Testing: <span class="number">0</span></span><br><span class="line">Testing: <span class="number">1</span></span><br><span class="line">Yielding: <span class="number">1</span></span><br><span class="line">Yielding: <span class="number">2</span></span><br><span class="line">Yielding: <span class="number">3</span></span><br><span class="line">Yielding: <span class="number">4</span></span><br><span class="line">Yielding: <span class="number">1</span></span><br><span class="line">Yielding: <span class="number">-2</span></span><br></pre></td></tr></table></figure><h3 id="itertools-groupby-iterable-key"><a href="#itertools-groupby-iterable-key" class="headerlink" title="itertools.groupby(iterable[, key])"></a>itertools.groupby(iterable[, key])</h3><p>返回一个产生按照key进行分组后的值集合的迭代器.</p><p>如果iterable在多次连续迭代中生成了同一项，则会定义一个组，如果将此函数应用一个分类列表，那么分组将定义该列表中的所有唯一项，key（如果已提供）是一个函数，应用于每一项，如果此函数存在返回值，该值将用于后续项而不是该项本身进行比较，此函数返回的迭代器生成元素(key, group)，其中key是分组的键值，group是迭代器，生成组成该组的所有项。</p><p>即：按照keyfunc函数对序列每个元素执行后的结果分组(每个分组是一个迭代器), 返回这些分组的迭代器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">groupby</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="comment"># [k for k, g in groupby('AAAABBBCCDAABBB')] --&gt; A B C D A B</span></span><br><span class="line">    <span class="comment"># [list(g) for k, g in groupby('AAAABBBCCD')] --&gt; AAAA BBB CC D</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, iterable, key=None)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            key = <span class="keyword">lambda</span> x: x</span><br><span class="line">        self.keyfunc = key</span><br><span class="line">        self.it = iter(iterable)</span><br><span class="line">        self.tgtkey = self.currkey = self.currvalue = object()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> self.currkey == self.tgtkey:</span><br><span class="line">            self.currvalue = next(self.it)    <span class="comment"># Exit on StopIteration</span></span><br><span class="line">            self.currkey = self.keyfunc(self.currvalue)</span><br><span class="line">        self.tgtkey = self.currkey</span><br><span class="line">        <span class="keyword">return</span> (self.currkey, self._grouper(self.tgtkey))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_grouper</span><span class="params">(self, tgtkey)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> self.currkey == tgtkey:</span><br><span class="line">            <span class="keyword">yield</span> self.currvalue</span><br><span class="line">            self.currvalue = next(self.it)    <span class="comment"># Exit on StopIteration</span></span><br><span class="line">            self.currkey = self.keyfunc(self.currvalue)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> groupby</span><br><span class="line">qs = [&#123;<span class="string">'date'</span> : <span class="number">1</span>&#125;,&#123;<span class="string">'date'</span> : <span class="number">2</span>&#125;]</span><br><span class="line">[(name, list(group)) <span class="keyword">for</span> name, group <span class="keyword">in</span> itertools.groupby(qs, <span class="keyword">lambda</span> p:p[<span class="string">'date'</span>])]</span><br><span class="line"></span><br><span class="line">Out[<span class="number">77</span>]: [(<span class="number">1</span>, [&#123;<span class="string">'date'</span>: <span class="number">1</span>&#125;]), (<span class="number">2</span>, [&#123;<span class="string">'date'</span>: <span class="number">2</span>&#125;])]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"> a = [<span class="string">'aa'</span>, <span class="string">'ab'</span>, <span class="string">'abc'</span>, <span class="string">'bcd'</span>, <span class="string">'abcde'</span>]</span><br><span class="line"> <span class="keyword">for</span> i, k <span class="keyword">in</span> groupby(a, len):</span><br><span class="line"><span class="meta">... </span>    print(i, list(k))</span><br><span class="line">...</span><br><span class="line"><span class="number">2</span> [<span class="string">'aa'</span>, <span class="string">'ab'</span>]</span><br><span class="line"><span class="number">3</span> [<span class="string">'abc'</span>, <span class="string">'bcd'</span>]</span><br><span class="line"><span class="number">5</span> [<span class="string">'abcde'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 另一个栗子</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"></span><br><span class="line">d = dict(a=<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">1</span>, d=<span class="number">2</span>, e=<span class="number">1</span>, f=<span class="number">2</span>, g=<span class="number">3</span>)</span><br><span class="line">di = sorted(d.iteritems(), key=itemgetter(<span class="number">1</span>))</span><br><span class="line"><span class="keyword">for</span> k, g <span class="keyword">in</span> groupby(di, key=itemgetter(<span class="number">1</span>)):</span><br><span class="line">    print(k, map(itemgetter(<span class="number">0</span>), g))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">1</span> [<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'e'</span>]</span><br><span class="line"><span class="number">2</span> [<span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'f'</span>]</span><br><span class="line"><span class="number">3</span> [<span class="string">'g'</span>]</span><br></pre></td></tr></table></figure><h3 id="itertools-ifilter-predicate-iterable"><a href="#itertools-ifilter-predicate-iterable" class="headerlink" title="itertools.ifilter(predicate, iterable)"></a>itertools.ifilter(predicate, iterable)</h3><p>返回的是迭代器类似于针对列表的内置函数 filter() , 它只包括当测试函数返回true时的项. 它不同于 dropwhile()</p><p>创建一个迭代器，仅生成iterable中predicate(item)为True的项，如果predicate为None，将返回iterable中所有计算为True的项</p><p>对函数func执行返回真的元素的迭代器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ifilter</span><span class="params">(predicate, iterable)</span>:</span></span><br><span class="line">    <span class="comment"># ifilter(lambda x: x%2, range(10)) --&gt; 1 3 5 7 9</span></span><br><span class="line">    <span class="keyword">if</span> predicate <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        predicate = bool</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">if</span> predicate(x):</span><br><span class="line">            <span class="keyword">yield</span> x</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_item</span><span class="params">(x)</span>:</span></span><br><span class="line">    print(<span class="string">'Testing:'</span>, x)</span><br><span class="line">    <span class="keyword">return</span> (x&lt;<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ifilter(check_item, [ <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">-2</span> ]):</span><br><span class="line">    print(<span class="string">'Yielding:'</span>, i)</span><br><span class="line"></span><br><span class="line">Testing: <span class="number">-1</span></span><br><span class="line">Yielding: <span class="number">-1</span></span><br><span class="line">Testing: <span class="number">0</span></span><br><span class="line">Yielding: <span class="number">0</span></span><br><span class="line">Testing: <span class="number">1</span></span><br><span class="line">Testing: <span class="number">2</span></span><br><span class="line">Testing: <span class="number">3</span></span><br><span class="line">Testing: <span class="number">4</span></span><br><span class="line">Testing: <span class="number">1</span></span><br><span class="line">Testing: <span class="number">-2</span></span><br><span class="line">Yielding: <span class="number">-2</span></span><br></pre></td></tr></table></figure><h3 id="itertools-ifilterfalse-predicate-iterable"><a href="#itertools-ifilterfalse-predicate-iterable" class="headerlink" title="itertools.ifilterfalse(predicate, iterable)"></a>itertools.ifilterfalse(predicate, iterable)</h3><p>和ifilter(函数相反 ， 返回一个包含那些测试函数返回false的项的迭代器)</p><p>创建一个迭代器，仅生成iterable中predicate(item)为False的项，如果predicate为None，则返回iterable中所有计算为False的项 对函数func执行返回假的元素的迭代器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ifilterfalse</span><span class="params">(predicate, iterable)</span>:</span></span><br><span class="line">    <span class="comment"># ifilterfalse(lambda x: x%2, range(10)) --&gt; 0 2 4 6 8</span></span><br><span class="line">    <span class="keyword">if</span> predicate <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        predicate = bool</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> predicate(x):</span><br><span class="line">            <span class="keyword">yield</span> x</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_item</span><span class="params">(x)</span>:</span></span><br><span class="line">    print(<span class="string">'Testing:'</span>, x)</span><br><span class="line">    <span class="keyword">return</span> (x&lt;<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ifilterfalse(check_item, [ <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">-2</span> ]):</span><br><span class="line">    print(<span class="string">'Yielding:'</span>, i)</span><br><span class="line"></span><br><span class="line">Testing: <span class="number">-1</span></span><br><span class="line">Testing: <span class="number">0</span></span><br><span class="line">Testing: <span class="number">1</span></span><br><span class="line">Yielding: <span class="number">1</span></span><br><span class="line">Testing: <span class="number">2</span></span><br><span class="line">Yielding: <span class="number">2</span></span><br><span class="line">Testing: <span class="number">3</span></span><br><span class="line">Yielding: <span class="number">3</span></span><br><span class="line">Testing: <span class="number">4</span></span><br><span class="line">Yielding: <span class="number">4</span></span><br><span class="line">Testing: <span class="number">1</span></span><br><span class="line">Yielding: <span class="number">1</span></span><br><span class="line">Testing: <span class="number">-2</span></span><br></pre></td></tr></table></figure><h3 id="itertools-islice-iterable-stop"><a href="#itertools-islice-iterable-stop" class="headerlink" title="itertools.islice(iterable, stop)"></a>itertools.islice(iterable, stop)</h3><p>itertools.islice(iterable, start, stop[, step])</p><p>返回的迭代器是返回了输入迭代器根据索引来选取的项</p><p>创建一个迭代器，生成项的方式类似于切片返回值： iterable[start : stop : step]，将跳过前start个项，迭代在stop所指定的位置停止，step指定用于跳过项的步幅。 与切片不同，负值不会用于任何start，stop和step， 如果省略了start，迭代将从0开始，如果省略了step，步幅将采用1.</p><p>返回序列seq的从start开始到stop结束的步长为step的元素的迭代器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">islice</span><span class="params">(iterable, *args)</span>:</span></span><br><span class="line">    <span class="comment"># islice('ABCDEFG', 2) --&gt; A B</span></span><br><span class="line">    <span class="comment"># islice('ABCDEFG', 2, 4) --&gt; C D</span></span><br><span class="line">    <span class="comment"># islice('ABCDEFG', 2, None) --&gt; C D E F G</span></span><br><span class="line">    <span class="comment"># islice('ABCDEFG', 0, None, 2) --&gt; A C E G</span></span><br><span class="line">    s = slice(*args)</span><br><span class="line">    it = iter(xrange(s.start <span class="keyword">or</span> <span class="number">0</span>, s.stop <span class="keyword">or</span> sys.maxint, s.step <span class="keyword">or</span> <span class="number">1</span>))</span><br><span class="line">    nexti = next(it)</span><br><span class="line">    <span class="keyword">for</span> i, element <span class="keyword">in</span> enumerate(iterable):</span><br><span class="line">        <span class="keyword">if</span> i == nexti:</span><br><span class="line">            <span class="keyword">yield</span> element</span><br><span class="line">            nexti = next(it)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">print(<span class="string">'Stop at 5:'</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> islice(count(), <span class="number">5</span>):</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'Start at 5, Stop at 10:'</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> islice(count(), <span class="number">5</span>, <span class="number">10</span>):</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'By tens to 100:'</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> islice(count(), <span class="number">0</span>, <span class="number">100</span>, <span class="number">10</span>):</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">Stop at <span class="number">5</span>:</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line">Start at <span class="number">5</span>, Stop at <span class="number">10</span>:</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line">By tens to <span class="number">100</span>:</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="number">30</span></span><br><span class="line"><span class="number">40</span></span><br><span class="line"><span class="number">50</span></span><br><span class="line"><span class="number">60</span></span><br><span class="line"><span class="number">70</span></span><br><span class="line"><span class="number">80</span></span><br><span class="line"><span class="number">90</span></span><br></pre></td></tr></table></figure><h3 id="itertools-imap-function-iterables"><a href="#itertools-imap-function-iterables" class="headerlink" title="itertools.imap(function, *iterables)"></a>itertools.imap(function, *iterables)</h3><p>创建一个迭代器，生成项function(i1, i2, …, iN)，其中i1，i2…iN分别来自迭代器iter1，iter2 … iterN，如果function为None，则返回(i1, i2, …, iN)形式的元组，只要提供的一个迭代器不再生成值，迭代就会停止。</p><p>即：返回一个迭代器, 它是调用了一个其值在输入迭代器上的函数, 返回结果. 它类似于内置函数 map() , 只是前者在任意输入迭代器结束后就停止(而不是插入None值来补全所有的输入).</p><p>返回序列每个元素被func执行后返回值的序列的迭代器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">imap</span><span class="params">(function, *iterables)</span>:</span></span><br><span class="line">    <span class="comment"># imap(pow, (2,3,10), (5,2,3)) --&gt; 32 9 1000</span></span><br><span class="line">    iterables = map(iter, iterables)</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        args = [next(it) <span class="keyword">for</span> it <span class="keyword">in</span> iterables]</span><br><span class="line">        <span class="keyword">if</span> function <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            <span class="keyword">yield</span> tuple(args)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">yield</span> function(*args)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">print(<span class="string">'Doubles:'</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> imap(<span class="keyword">lambda</span> x:<span class="number">2</span>*x, range(<span class="number">5</span>)):</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'Multiples:'</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> imap(<span class="keyword">lambda</span> x,y:(x, y, x*y), range(<span class="number">5</span>), range(<span class="number">5</span>,<span class="number">10</span>)):</span><br><span class="line">    print(<span class="string">'%d * %d = %d'</span> % i)</span><br><span class="line"></span><br><span class="line">Doubles:</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line">Multiples:</span><br><span class="line"><span class="number">0</span> * <span class="number">5</span> = <span class="number">0</span></span><br><span class="line"><span class="number">1</span> * <span class="number">6</span> = <span class="number">6</span></span><br><span class="line"><span class="number">2</span> * <span class="number">7</span> = <span class="number">14</span></span><br><span class="line"><span class="number">3</span> * <span class="number">8</span> = <span class="number">24</span></span><br><span class="line"><span class="number">4</span> * <span class="number">9</span> = <span class="number">36</span></span><br></pre></td></tr></table></figure><h3 id="itertools-starmap-function-iterable"><a href="#itertools-starmap-function-iterable" class="headerlink" title="itertools.starmap(function, iterable)"></a>itertools.starmap(function, iterable)</h3><p>创建一个迭代器，生成值func(*item),其中item来自iterable，只有当iterable生成的项适用于这种调用函数的方式时，此函数才有效。</p><p>对序列seq的每个元素作为func的参数列表执行, 返回执行结果的迭代器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">starmap</span><span class="params">(function, iterable)</span>:</span></span><br><span class="line">    <span class="comment"># starmap(pow, [(2,5), (3,2), (10,3)]) --&gt; 32 9 1000</span></span><br><span class="line">    <span class="keyword">for</span> args <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">yield</span> function(*args)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">values = [(<span class="number">0</span>, <span class="number">5</span>), (<span class="number">1</span>, <span class="number">6</span>), (<span class="number">2</span>, <span class="number">7</span>), (<span class="number">3</span>, <span class="number">8</span>), (<span class="number">4</span>, <span class="number">9</span>)]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> starmap(<span class="keyword">lambda</span> x,y:(x, y, x*y), values):</span><br><span class="line">    print(<span class="string">'%d * %d = %d'</span> % i)</span><br><span class="line"></span><br><span class="line"><span class="number">0</span> * <span class="number">5</span> = <span class="number">0</span></span><br><span class="line"><span class="number">1</span> * <span class="number">6</span> = <span class="number">6</span></span><br><span class="line"><span class="number">2</span> * <span class="number">7</span> = <span class="number">14</span></span><br><span class="line"><span class="number">3</span> * <span class="number">8</span> = <span class="number">24</span></span><br><span class="line"><span class="number">4</span> * <span class="number">9</span> = <span class="number">36</span></span><br></pre></td></tr></table></figure><h3 id="itertools-tee-iterable-n-2"><a href="#itertools-tee-iterable-n-2" class="headerlink" title="itertools.tee(iterable[, n=2])"></a>itertools.tee(iterable[, n=2])</h3><p>返回一些基于单个原始输入的独立迭代器(默认为2). 它和Unix上的tee工具有点语义相似, 也就是说它们都重复读取输入设备中的值并将值写入到一个命名文件和标准输出中</p><p>从iterable创建n个独立的迭代器，创建的迭代器以n元组的形式返回，n的默认值为2，此函数适用于任何可迭代的对象，但是，为了克隆原始迭代器，生成的项会被缓存，并在所有新创建的迭代器中使用，一定要注意，不要在调用tee()之后使用原始迭代器iterable，否则缓存机制可能无法正确工作。</p><p>把一个迭代器分为n个迭代器, 返回一个元组.默认是两个</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tee</span><span class="params">(iterable, n=<span class="number">2</span>)</span>:</span></span><br><span class="line">    it = iter(iterable)</span><br><span class="line">    deques = [collections.deque() <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">gen</span><span class="params">(mydeque)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> mydeque:             <span class="comment"># when the local deque is empty</span></span><br><span class="line">                newval = next(it)       <span class="comment"># fetch a new value and</span></span><br><span class="line">                <span class="keyword">for</span> d <span class="keyword">in</span> deques:        <span class="comment"># load it to all the deques</span></span><br><span class="line">                    d.append(newval)</span><br><span class="line">            <span class="keyword">yield</span> mydeque.popleft()</span><br><span class="line">    <span class="keyword">return</span> tuple(gen(d) <span class="keyword">for</span> d <span class="keyword">in</span> deques)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">r = islice(count(), <span class="number">5</span>)</span><br><span class="line">i1, i2 = tee(r)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> i1:</span><br><span class="line">    print(<span class="string">'i1:'</span>, i)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> i2:</span><br><span class="line">    print(<span class="string">'i2:'</span>, i)</span><br><span class="line"></span><br><span class="line">i1: <span class="number">0</span></span><br><span class="line">i1: <span class="number">1</span></span><br><span class="line">i1: <span class="number">2</span></span><br><span class="line">i1: <span class="number">3</span></span><br><span class="line">i1: <span class="number">4</span></span><br><span class="line">i2: <span class="number">0</span></span><br><span class="line">i2: <span class="number">1</span></span><br><span class="line">i2: <span class="number">2</span></span><br><span class="line">i2: <span class="number">3</span></span><br><span class="line">i2: <span class="number">4</span></span><br></pre></td></tr></table></figure><h3 id="itertools-takewhile-predicate-iterable"><a href="#itertools-takewhile-predicate-iterable" class="headerlink" title="itertools.takewhile(predicate, iterable)"></a>itertools.takewhile(predicate, iterable)</h3><p>和dropwhile相反</p><p>创建一个迭代器，生成iterable中predicate(item)为True的项，只要predicate计算为False，迭代就会立即停止。</p><p>即：从序列的头开始, 直到执行函数func失败</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">takewhile</span><span class="params">(predicate, iterable)</span>:</span></span><br><span class="line">    <span class="comment"># takewhile(lambda x: x&lt;5, [1,4,6,4,1]) --&gt; 1 4</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">if</span> predicate(x):</span><br><span class="line">            <span class="keyword">yield</span> x</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">should_take</span><span class="params">(x)</span>:</span></span><br><span class="line">    print(<span class="string">'Testing:'</span>, x)</span><br><span class="line">    <span class="keyword">return</span> (x&lt;<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> takewhile(should_take, [ <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">-2</span> ]):</span><br><span class="line">    print(<span class="string">'Yielding:'</span>, i)</span><br><span class="line"></span><br><span class="line">Testing: <span class="number">-1</span></span><br><span class="line">Yielding: <span class="number">-1</span></span><br><span class="line">Testing: <span class="number">0</span></span><br><span class="line">Yielding: <span class="number">0</span></span><br><span class="line">Testing: <span class="number">1</span></span><br><span class="line">Yielding: <span class="number">1</span></span><br><span class="line">Testing: <span class="number">2</span></span><br></pre></td></tr></table></figure><h3 id="itertools-izip-iterables"><a href="#itertools-izip-iterables" class="headerlink" title="itertools.izip(*iterables)"></a>itertools.izip(*iterables)</h3><p>返回一个合并了多个迭代器为一个元组的迭代器. 它类似于内置函数zip(), 只是它返回的是一个迭代器而不是一个列表</p><p>创建一个迭代器，生成元组(i1, i2, … iN)，其中i1，i2 … iN 分别来自迭代器iter1，iter2 … iterN，只要提供的某个迭代器不再生成值，迭代就会停止，此函数生成的值与内置的zip()函数相同</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line">izip(iter1, iter2, ... iterN):</span><br><span class="line">返回:(it1[<span class="number">0</span>],it2 [<span class="number">0</span>], it3[<span class="number">0</span>], ..), (it1[<span class="number">1</span>], it2[<span class="number">1</span>], it3[<span class="number">1</span>], ..)...</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">izip</span><span class="params">(*iterables)</span>:</span></span><br><span class="line">    <span class="comment"># izip('ABCD', 'xy') --&gt; Ax By</span></span><br><span class="line">    iterators = map(iter, iterables)</span><br><span class="line">    <span class="keyword">while</span> iterators:</span><br><span class="line">        <span class="keyword">yield</span> tuple(map(next, iterators))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> izip([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]):</span><br><span class="line">    print(i)</span><br><span class="line">(<span class="number">1</span>, <span class="string">'a'</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="string">'b'</span>)</span><br><span class="line">(<span class="number">3</span>, <span class="string">'c'</span>)</span><br></pre></td></tr></table></figure><h3 id="itertools-izip-longest-iterables-fillvalue"><a href="#itertools-izip-longest-iterables-fillvalue" class="headerlink" title="itertools.izip_longest(*iterables[, fillvalue])"></a>itertools.izip_longest(*iterables[, fillvalue])</h3><p>与izip()相同，但是迭代过程会持续到所有输入迭代变量iter1,iter2等都耗尽为止，如果没有使用fillvalue关键字参数指定不同的值，则使用None来填充已经使用的迭代变量的值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZipExhausted</span><span class="params">(Exception)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">izip_longest</span><span class="params">(*args, **kwds)</span>:</span></span><br><span class="line">    <span class="comment"># izip_longest('ABCD', 'xy', fillvalue='-') --&gt; Ax By C- D-</span></span><br><span class="line">    fillvalue = kwds.get(<span class="string">'fillvalue'</span>)</span><br><span class="line">    counter = [len(args) - <span class="number">1</span>]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sentinel</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> counter[<span class="number">0</span>]:</span><br><span class="line">            <span class="keyword">raise</span> ZipExhausted</span><br><span class="line">        counter[<span class="number">0</span>] -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">yield</span> fillvalue</span><br><span class="line">    fillers = repeat(fillvalue)</span><br><span class="line">    iterators = [chain(it, sentinel(), fillers) <span class="keyword">for</span> it <span class="keyword">in</span> args]</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> iterators:</span><br><span class="line">            <span class="keyword">yield</span> tuple(map(next, iterators))</span><br><span class="line">    <span class="keyword">except</span> ZipExhausted:</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h2 id="组成生成器"><a href="#组成生成器" class="headerlink" title="组成生成器"></a>组成生成器</h2><h2 id="itertools-product-iterables-repeat"><a href="#itertools-product-iterables-repeat" class="headerlink" title="itertools.product(*iterables[, repeat])"></a>itertools.product(*iterables[, repeat])</h2><p>笛卡尔积</p><p>创建一个迭代器，生成表示item1，item2等中的项目的笛卡尔积的元组，repeat是一个关键字参数，指定重复生成序列的次数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">product</span><span class="params">(*args, **kwds)</span>:</span></span><br><span class="line">    <span class="comment"># product('ABCD', 'xy') --&gt; Ax Ay Bx By Cx Cy Dx Dy</span></span><br><span class="line">    <span class="comment"># product(range(2), repeat=3) --&gt; 000 001 010 011 100 101 110 111</span></span><br><span class="line">    pools = map(tuple, args) * kwds.get(<span class="string">'repeat'</span>, <span class="number">1</span>)</span><br><span class="line">    result = [[]]</span><br><span class="line">    <span class="keyword">for</span> pool <span class="keyword">in</span> pools:</span><br><span class="line">        result = [x+[y] <span class="keyword">for</span> x <span class="keyword">in</span> result <span class="keyword">for</span> y <span class="keyword">in</span> pool]</span><br><span class="line">    <span class="keyword">for</span> prod <span class="keyword">in</span> result:</span><br><span class="line">        <span class="keyword">yield</span> tuple(prod)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line">a = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">b = (<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>)</span><br><span class="line">c = itertools.product(a,b)</span><br><span class="line"><span class="keyword">for</span> elem <span class="keyword">in</span> c:</span><br><span class="line">    print(elem)</span><br><span class="line"></span><br><span class="line">(<span class="number">1</span>, <span class="string">'A'</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="string">'B'</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="string">'C'</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="string">'A'</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="string">'B'</span>)</span><br><span class="line">(<span class="number">2</span>, <span class="string">'C'</span>)</span><br><span class="line">(<span class="number">3</span>, <span class="string">'A'</span>)</span><br><span class="line">(<span class="number">3</span>, <span class="string">'B'</span>)</span><br><span class="line">(<span class="number">3</span>, <span class="string">'C'</span>)</span><br></pre></td></tr></table></figure><h3 id="itertools-permutations-iterable-r"><a href="#itertools-permutations-iterable-r" class="headerlink" title="itertools.permutations(iterable[, r])"></a>itertools.permutations(iterable[, r])</h3><p>排列</p><p>创建一个迭代器，返回iterable中所有长度为r的项目序列，如果省略了r，那么序列的长度与iterable中的项目数量相同： 返回p中任意取r个元素做排列的元组的迭代器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">permutations</span><span class="params">(iterable, r=None)</span>:</span></span><br><span class="line">    <span class="comment"># permutations('ABCD', 2) --&gt; AB AC AD BA BC BD CA CB CD DA DB DC</span></span><br><span class="line">    <span class="comment"># permutations(range(3)) --&gt; 012 021 102 120 201 210</span></span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    r = n <span class="keyword">if</span> r <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">else</span> r</span><br><span class="line">    <span class="keyword">if</span> r &gt; n:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    indices = range(n)</span><br><span class="line">    cycles = range(n, n-r, <span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">yield</span> tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices[:r])</span><br><span class="line">    <span class="keyword">while</span> n:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> reversed(range(r)):</span><br><span class="line">            cycles[i] -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> cycles[i] == <span class="number">0</span>:</span><br><span class="line">                indices[i:] = indices[i+<span class="number">1</span>:] + indices[i:i+<span class="number">1</span>]</span><br><span class="line">                cycles[i] = n - i</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                j = cycles[i]</span><br><span class="line">                indices[i], indices[-j] = indices[-j], indices[i]</span><br><span class="line">                <span class="keyword">yield</span> tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices[:r])</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">也可以用product实现</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">permutations</span><span class="params">(iterable, r=None)</span>:</span></span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    r = n <span class="keyword">if</span> r <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">else</span> r</span><br><span class="line">    <span class="keyword">for</span> indices <span class="keyword">in</span> product(range(n), repeat=r):</span><br><span class="line">        <span class="keyword">if</span> len(set(indices)) == r:</span><br><span class="line">            <span class="keyword">yield</span> tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br></pre></td></tr></table></figure><h3 id="itertools-combinations-iterable-r"><a href="#itertools-combinations-iterable-r" class="headerlink" title="itertools.combinations(iterable, r)"></a>itertools.combinations(iterable, r)</h3><p>创建一个迭代器，返回iterable中所有长度为r的子序列，返回的子序列中的项按输入iterable中的顺序排序 (不带重复)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">combinations</span><span class="params">(iterable, r)</span>:</span></span><br><span class="line">    <span class="comment"># combinations('ABCD', 2) --&gt; AB AC AD BC BD CD</span></span><br><span class="line">    <span class="comment"># combinations(range(4), 3) --&gt; 012 013 023 123</span></span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    <span class="keyword">if</span> r &gt; n:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    indices = range(r)</span><br><span class="line">    <span class="keyword">yield</span> tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> reversed(range(r)):</span><br><span class="line">            <span class="keyword">if</span> indices[i] != i + n - r:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        indices[i] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>, r):</span><br><span class="line">            indices[j] = indices[j<span class="number">-1</span>] + <span class="number">1</span></span><br><span class="line">        <span class="keyword">yield</span> tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">combinations</span><span class="params">(iterable, r)</span>:</span></span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    <span class="keyword">for</span> indices <span class="keyword">in</span> permutations(range(n), r):</span><br><span class="line">        <span class="keyword">if</span> sorted(indices) == list(indices):</span><br><span class="line">            <span class="keyword">yield</span> tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br></pre></td></tr></table></figure><h3 id="itertools-combinations-with-replacement-iterable-r"><a href="#itertools-combinations-with-replacement-iterable-r" class="headerlink" title="itertools.combinations_with_replacement(iterable, r)"></a>itertools.combinations_with_replacement(iterable, r)</h3><p>创建一个迭代器，返回iterable中所有长度为r的子序列，返回的子序列中的项按输入iterable中的顺序排序 (带重复)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">combinations_with_replacement</span><span class="params">(iterable, r)</span>:</span></span><br><span class="line">    <span class="comment"># combinations_with_replacement('ABC', 2) --&gt; AA AB AC BB BC CC</span></span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> n <span class="keyword">and</span> r:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    indices = [<span class="number">0</span>] * r</span><br><span class="line">    <span class="keyword">yield</span> tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> reversed(range(r)):</span><br><span class="line">            <span class="keyword">if</span> indices[i] != n - <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        indices[i:] = [indices[i] + <span class="number">1</span>] * (r - i)</span><br><span class="line">        <span class="keyword">yield</span> tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">combinations_with_replacement</span><span class="params">(iterable, r)</span>:</span></span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    <span class="keyword">for</span> indices <span class="keyword">in</span> product(range(n), repeat=r):</span><br><span class="line">        <span class="keyword">if</span> sorted(indices) == list(indices):</span><br><span class="line">            <span class="keyword">yield</span> tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br></pre></td></tr></table></figure><h2 id="解疑"><a href="#解疑" class="headerlink" title="解疑"></a>解疑</h2><p>四匹马赛跑到达终点排名的所有可能性：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用列表的值和索引分别表示4匹赛马和它们的排名</span></span><br><span class="line">horses = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">races = itertools.permutations(horses)</span><br><span class="line">print(list(races))</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python-Itertools&quot;&gt;&lt;a href=&quot;#Python-Itertools&quot; class=&quot;headerlink&quot; title=&quot;Python Itertools&quot;&gt;&lt;/a&gt;Python Itertools&lt;/h1&gt;&lt;p&gt;高效循环创建迭代器的函数集合
      
    
    </summary>
    
      <category term="Python" scheme="https://ojerk.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://ojerk.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python标准库之Collections</title>
    <link href="https://ojerk.cn/Collections/"/>
    <id>https://ojerk.cn/Collections/</id>
    <published>2018-08-03T01:58:48.000Z</published>
    <updated>2019-11-30T11:06:08.370Z</updated>
    
    <content type="html"><![CDATA[<h2 id="defaultdict"><a href="#defaultdict" class="headerlink" title="defaultdict"></a>defaultdict</h2><p>在Python中如果访问字典中不存在的键, 会引发KeyError异常, 但是有时候, 字典中的每个键都存在默认值是非常方便的</p><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>初始化说明:</p><ul><li>当不传入参数时,可以其看作一个普通字典</li><li>可接受一个类型作为参数, 当访问的键不存在时, 它会实例化该类作为默认值</li><li>也可以接受任何不带参数的可调用函数作为参数, 它会把函数的返回结果作为默认值</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 传入一个list类型</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd = defaultdict(list)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd</span><br><span class="line">defaultdict(&lt;type <span class="string">'list'</span>&gt;, &#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 传入一个不带参数的可调用函数</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">zero</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd = defaultdict(zero)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd</span><br><span class="line">defaultdict(&lt;function zero at <span class="number">0xb7ed2684</span>&gt;, &#123;&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd[<span class="string">'foo'</span>]</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd</span><br><span class="line">defaultdict(&lt;function zero at <span class="number">0xb7ed2684</span>&gt;, &#123;<span class="string">'foo'</span>: <span class="number">0</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 利用collections.defaultdict来解决最初的单词统计问题</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line">strings = (<span class="string">'puppy'</span>, <span class="string">'kitten'</span>, <span class="string">'puppy'</span>, <span class="string">'puppy'</span>,</span><br><span class="line">           <span class="string">'weasel'</span>, <span class="string">'puppy'</span>, <span class="string">'kitten'</span>, <span class="string">'puppy'</span>)</span><br><span class="line">counts = defaultdict(<span class="keyword">lambda</span>: <span class="number">0</span>)  <span class="comment"># 使用lambda来定义简单的函数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> s <span class="keyword">in</span> strings:</span><br><span class="line">    counts[s] += <span class="number">1</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;defaultdict&quot;&gt;&lt;a href=&quot;#defaultdict&quot; class=&quot;headerlink&quot; title=&quot;defaultdict&quot;&gt;&lt;/a&gt;defaultdict&lt;/h2&gt;&lt;p&gt;在Python中如果访问字典中不存在的键, 会引发KeyError异
      
    
    </summary>
    
      <category term="Python" scheme="https://ojerk.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://ojerk.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python标准库之Pathlib</title>
    <link href="https://ojerk.cn/Pathlib/"/>
    <id>https://ojerk.cn/Pathlib/</id>
    <published>2018-08-01T03:11:11.000Z</published>
    <updated>2019-12-05T13:48:24.118Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python-Pathlib-Easystart"><a href="#Python-Pathlib-Easystart" class="headerlink" title="Python Pathlib Easystart"></a>Python Pathlib Easystart</h1><p>这个模块提供了表示文件系统路径的类，以面向对象的方式来操作我们的路径,它们的语义适用于不同的操作系统</p><p>路径类分为:</p><ul><li>pure paths: 纯路径(提供不含I/O的纯计算操作)</li><li>concrete paths: 混合路径(继承自纯路径，提供I/O操作)</li></ul><p>继承关系:</p><p><img src="https://docs.python.org/3.6/_images/pathlib-inheritance.png" alt="继承关系图"></p><p><strong>注意几点</strong>:</p><ul><li>pathlib.Path 会根据不同的使用平台实例化成不同的Path, Windows下为WindowsPath, Linux下为PosixPath</li><li>pathlib.Path 是一个 concrete path</li><li>所以我们只需要掌握 <em>pathlib.Path</em> 就能解决我们大部分的需要了</li></ul><h2 id="Quickly-Start"><a href="#Quickly-Start" class="headerlink" title="Quickly Start"></a>Quickly Start</h2><h3 id="实例化"><a href="#实例化" class="headerlink" title="实例化"></a>实例化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="comment"># pathlib.Path(*pathsegments)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法一, 不传参数则代表当前目录"."</span></span><br><span class="line">path = Path()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line">path = Path(<span class="string">"test.txt"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法三(相对路径)</span></span><br><span class="line">path = Path(Path(<span class="string">"A"</span>), <span class="string">"B"</span>, <span class="string">"C/D"</span>, <span class="string">"test.txt"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法四(绝对路径), 略</span></span><br></pre></td></tr></table></figure><h3 id="斜线操作"><a href="#斜线操作" class="headerlink" title="斜线操作"></a>斜线操作</h3><p>类似于 os.path.join()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line">path = Path(<span class="string">"/A"</span>)</span><br><span class="line">new_path = path / B / C</span><br></pre></td></tr></table></figure><h3 id="常用属性和方法"><a href="#常用属性和方法" class="headerlink" title="常用属性和方法"></a>常用属性和方法</h3><h4 id="Path-parents-Path-parent"><a href="#Path-parents-Path-parent" class="headerlink" title="Path.parents / Path.parent"></a>Path.parents / Path.parent</h4><p>返回父节点列表 / 父节点</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 父节点们</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = PureWindowsPath(<span class="string">'c:/foo/bar/setup.py'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.parents[<span class="number">0</span>]</span><br><span class="line">PureWindowsPath(<span class="string">'c:/foo/bar'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.parents[<span class="number">1</span>]</span><br><span class="line">PureWindowsPath(<span class="string">'c:/foo'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.parents[<span class="number">2</span>]</span><br><span class="line">PureWindowsPath(<span class="string">'c:/'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 父节点</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = PurePosixPath(<span class="string">'/a/b/c/d'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.parent</span><br><span class="line">PurePosixPath(<span class="string">'/a/b/c'</span>)</span><br></pre></td></tr></table></figure><h4 id="Path-cwd"><a href="#Path-cwd" class="headerlink" title="Path.cwd()"></a>Path.cwd()</h4><p>返回当前目录</p><h4 id="Path-stat"><a href="#Path-stat" class="headerlink" title="Path.stat()"></a>Path.stat()</h4><p>返回当前Path的具体信息</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = Path(<span class="string">'setup.py'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.stat().st_size</span><br><span class="line"><span class="number">956</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.stat().st_mtime</span><br><span class="line"><span class="number">1327883547.852554</span></span><br></pre></td></tr></table></figure><h4 id="Path-exists"><a href="#Path-exists" class="headerlink" title="Path.exists()"></a>Path.exists()</h4><p>判断文件/文件夹是否存在</p><h4 id="Path-is-dir"><a href="#Path-is-dir" class="headerlink" title="Path.is_dir()"></a>Path.is_dir()</h4><p>判断是否是文件夹</p><h4 id="Path-is-file"><a href="#Path-is-file" class="headerlink" title="Path.is_file()"></a>Path.is_file()</h4><p>判断是否是文件</p><h4 id="Path-glob-pattern"><a href="#Path-glob-pattern" class="headerlink" title="Path.glob(pattern)"></a>Path.glob(pattern)</h4><p>在给定目录里,匹配需要的文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(Path(<span class="string">'.'</span>).glob(<span class="string">'*.py'</span>))</span><br><span class="line">[PosixPath(<span class="string">'pathlib.py'</span>), PosixPath(<span class="string">'setup.py'</span>), PosixPath(<span class="string">'test_pathlib.py'</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(Path(<span class="string">'.'</span>).glob(<span class="string">'*/*.py'</span>))</span><br><span class="line">[PosixPath(<span class="string">'docs/conf.py'</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配模式 ** 表示递归匹配</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(Path(<span class="string">'.'</span>).glob(<span class="string">'**/*.py'</span>))</span><br><span class="line">[PosixPath(<span class="string">'build/lib/pathlib.py'</span>),</span><br><span class="line"> PosixPath(<span class="string">'docs/conf.py'</span>),</span><br><span class="line"> PosixPath(<span class="string">'pathlib.py'</span>),</span><br><span class="line"> PosixPath(<span class="string">'setup.py'</span>),</span><br><span class="line"> PosixPath(<span class="string">'test_pathlib.py'</span>)]</span><br></pre></td></tr></table></figure><h4 id="Path-iterdir"><a href="#Path-iterdir" class="headerlink" title="Path.iterdir()"></a>Path.iterdir()</h4><p>当path指向一个目录时,迭代返回目录的内容</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = Path(<span class="string">'docs'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> child <span class="keyword">in</span> p.iterdir(): child</span><br><span class="line">...</span><br><span class="line">PosixPath(<span class="string">'docs/conf.py'</span>)</span><br><span class="line">PosixPath(<span class="string">'docs/_templates'</span>)</span><br><span class="line">PosixPath(<span class="string">'docs/make.bat'</span>)</span><br><span class="line">PosixPath(<span class="string">'docs/index.rst'</span>)</span><br><span class="line">PosixPath(<span class="string">'docs/_build'</span>)</span><br><span class="line">PosixPath(<span class="string">'docs/_static'</span>)</span><br><span class="line">PosixPath(<span class="string">'docs/Makefile'</span>)</span><br></pre></td></tr></table></figure><h4 id="Path-write-bytes-data-Path-read-bytes"><a href="#Path-write-bytes-data-Path-read-bytes" class="headerlink" title="Path.write_bytes(data) / Path.read_bytes()"></a>Path.write_bytes(data) / Path.read_bytes()</h4><p>以二进制形式存储和读取文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = Path(<span class="string">'my_binary_file'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.write_bytes(<span class="string">b'Binary file contents'</span>)</span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.read_bytes()</span><br><span class="line"><span class="string">b'Binary file contents'</span></span><br></pre></td></tr></table></figure><h4 id="Path-write-text-data-encoding-None-errors-None"><a href="#Path-write-text-data-encoding-None-errors-None" class="headerlink" title="Path.write_text(data, encoding=None, errors=None)"></a>Path.write_text(data, encoding=None, errors=None)</h4><p>打开文件以指定编码写入数据并关闭</p><h4 id="Path-read-text-encoding-None-errors-None"><a href="#Path-read-text-encoding-None-errors-None" class="headerlink" title="Path.read_text(encoding=None, errors=None)"></a>Path.read_text(encoding=None, errors=None)</h4><p>读取指定编码文件的内容</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = Path(<span class="string">'my_text_file'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.write_text(<span class="string">'Text file contents'</span>)</span><br><span class="line"><span class="number">18</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.read_text()</span><br><span class="line"><span class="string">'Text file contents'</span></span><br></pre></td></tr></table></figure><p><a href="https://docs.python.org/3/library/pathlib.html" target="_blank" rel="noopener">docs.python.org</a><br>未完待续…</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python-Pathlib-Easystart&quot;&gt;&lt;a href=&quot;#Python-Pathlib-Easystart&quot; class=&quot;headerlink&quot; title=&quot;Python Pathlib Easystart&quot;&gt;&lt;/a&gt;Python Pathlib
      
    
    </summary>
    
      <category term="Python" scheme="https://ojerk.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://ojerk.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>github不完全指北</title>
    <link href="https://ojerk.cn/Github%E5%85%A5%E9%97%A8%E6%95%99%E5%AD%A6/"/>
    <id>https://ojerk.cn/Github入门教学/</id>
    <published>2018-07-27T08:43:41.000Z</published>
    <updated>2019-12-05T13:47:05.462Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Git-GitHub-Briefer-Course"><a href="#Git-GitHub-Briefer-Course" class="headerlink" title="Git_GitHub Briefer Course"></a>Git_GitHub Briefer Course</h1><blockquote><p>教程源于<a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener">Here</a>,以下是自己的整理</p></blockquote><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><strong>Win10环境下:</strong><br><a href="https://git-scm.com/downloads" target="_blank" rel="noopener">猛击这里下载</a>安装包,默认选项安装,安装完成后,右键菜单出现下图标识表示安装成功!</p><h2 id="初次使用的配置"><a href="#初次使用的配置" class="headerlink" title="初次使用的配置"></a>初次使用的配置</h2><p>打开<em>Git Bash</em>命令窗口输入:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --<span class="keyword">global</span> user.name <span class="string">"Your Name"</span></span><br><span class="line">git config --<span class="keyword">global</span> user.email <span class="string">"email@example.com"</span></span><br></pre></td></tr></table></figure><h2 id="Git具体食用方法步骤"><a href="#Git具体食用方法步骤" class="headerlink" title="Git具体食用方法步骤"></a>Git具体食用方法步骤</h2><p><strong>初始化Git仓库</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><p><strong>添加文件到Git仓库，分两步：</strong>:</p><ol><li>把需要提交的文件先放入缓存区</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add &lt;file&gt; <span class="comment">#注意，可反复多次使用，添加多个文件；</span></span><br></pre></td></tr></table></figure><ol start="2"><li>使用提交命令</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit <span class="comment">#完成提交</span></span><br></pre></td></tr></table></figure><p><strong>查看工作区的状态</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><p>如果git status告诉你有文件被修改过，使用下面代码可以查看修改内容</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff</span><br></pre></td></tr></table></figure><p>查看工作区和版本库里面最新版本的区别：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff HEAD -- filename</span><br></pre></td></tr></table></figure><p><strong>时光穿梭</strong>:</p><p>HEAD指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭，使用命令</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard commit_id</span><br></pre></td></tr></table></figure><p>查看提交历史</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure><p>查看命令历史</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure><p>丢弃工作区的修改</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- readme.txt</span><br></pre></td></tr></table></figure><p>该命令意思就是，把readme.txt文件在工作区的修改全部撤销，这里有两种情况：</p><ul><li>readme.txt自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；</li><li>readme.txt已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。</li></ul><p>总之，就是让这个文件回到最近一次git commit或git add时的状态。<br>如果已经提交到缓存区,就需要先把文件从缓存区撤下来:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD &lt;file&gt;</span><br></pre></td></tr></table></figure><p>然后再执行上一步:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- readme.txt</span><br></pre></td></tr></table></figure><p>或者还可以(前提是没有把文件推送到远程git仓库):</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure><p>再reset回去:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard commit_id</span><br></pre></td></tr></table></figure><p><strong>文件删除</strong>:</p><p>首先删除工作区文件:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm test.txt</span><br></pre></td></tr></table></figure><p>此时两种情况:</p><ul><li>确实要删除此文件,则执行:</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git rm test.txt</span><br><span class="line">rm <span class="string">'test.txt'</span></span><br><span class="line">$ git commit -m <span class="string">"remove test.txt"</span></span><br></pre></td></tr></table></figure><ul><li>发现删错了?没关系,可以从版本库回复到最后一次提交上去的修改</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- test.txt</span><br></pre></td></tr></table></figure><h2 id="GitHub具体食用方法步骤"><a href="#GitHub具体食用方法步骤" class="headerlink" title="GitHub具体食用方法步骤"></a>GitHub具体食用方法步骤</h2><h3 id="准备阶段"><a href="#准备阶段" class="headerlink" title="准备阶段"></a>准备阶段</h3><ol><li>首先你得注册自己的GitHub账号(<a href="https://github.com/" target="_blank" rel="noopener">猛击这里注册</a>)</li><li>由于你的本地Git仓库和GitHub仓库之间的传输是通过SSH加密的，所以，需要如下设置：</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"youremail@example.com"</span> <span class="comment">#填写自己的邮箱,然后一路回车就可以</span></span><br></pre></td></tr></table></figure><ol start="3"><li>在用户主目录里找到.ssh目录,里面有<strong>id_rsa</strong>和<strong>id_rsa.pub</strong>两个文件,登录GitHub,找到settings里面SSH Keys页面把<strong>id_rsa.pub</strong>里面的内容添加进去</li></ol><h3 id="GitHub食用阶段"><a href="#GitHub食用阶段" class="headerlink" title="GitHub食用阶段"></a>GitHub食用阶段</h3><p><strong>关联一个远程库</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@server-name:path/repo-name.git</span><br></pre></td></tr></table></figure><p>取消关联:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote remove origin git@server-name:path/repo-name.git</span><br></pre></td></tr></table></figure><p><strong>第一次推送master分支的所有内容</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><p>此后每次推送:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure><p><strong>远程库的克隆</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:michaelliao/gitskills.git</span><br></pre></td></tr></table></figure><p><strong>分支的操作</strong>:</p><p>查看分支:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure><p>创建分支：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch &lt;name&gt;</span><br></pre></td></tr></table></figure><p>切换分支：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout &lt;name&gt;</span><br></pre></td></tr></table></figure><p>创建+切换分支：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;name&gt;</span><br></pre></td></tr></table></figure><p>合并某分支到当前分支：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge &lt;name&gt;</span><br></pre></td></tr></table></figure><p>删除分支：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d &lt;name&gt;</span><br></pre></td></tr></table></figure><p>查看分支合并情况:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --graph --pretty=oneline --abbrev-commit</span><br></pre></td></tr></table></figure><p><strong>多人协作</strong>:</p><p>查看远程库的信息</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote</span><br></pre></td></tr></table></figure><p>显示更详细的信息</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure><p>推送分支</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure><p>创建远程origin的dev分支到本地</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b dev origin/dev</span><br></pre></td></tr></table></figure><p><strong>多人协作小结</strong>:</p><ul><li>查看远程库信息，使用<strong>git remote -v</strong>；</li><li>本地新建的分支如果不推送到远程，对其他人就是不可见的；</li><li>从本地推送分支，使用<strong>git push origin branch-name</strong>，如果推送失败，先用git pull抓取远程的新提交；</li><li>在本地创建和远程分支对应的分支，使用<strong>git checkout -b branch-name origin/branch-name</strong>，本地和远程分支的名称最好一致；</li><li>建立本地分支和远程分支的关联，使用<strong>git branch –set-upstream branch-name origin/branch-name</strong>；</li><li>从远程抓取分支，使用<strong>git pull</strong>，如果有冲突，要先处理冲突。</li></ul><p><strong>.gitignore文件说明</strong>:</p><p>在使用git时,它默认会把所有文件添加到版本控制器中,但是在实践中我们可能会遇到有的文件不需要添加到版控制当中,比如vscode编译时产生的.vscode文件我们不希望它被上传到GitHub上面,涉及到保密的.xlsx文件等等,这时候你可能就需要一个.gitignore文件来达到目的</p><ul><li>规则<ul><li>空白或者以#开始的文字将被忽略, 比如注释一行可以用 #</li><li>可以使用通配符,例如 *</li><li>使用 / 结束可以匹配文件夹,例如 doc/ 将匹配doc文件夹</li><li>使用 ! 来声明一个非语句. 比如 !doc.txt 将不会忽略doc.txt文件</li></ul></li></ul><p><a href="https://www.cnblogs.com/langtianya/p/5748885.html" target="_blank" rel="noopener">猛击这里获取更多</a></p><blockquote><p>未完待续…</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Git-GitHub-Briefer-Course&quot;&gt;&lt;a href=&quot;#Git-GitHub-Briefer-Course&quot; class=&quot;headerlink&quot; title=&quot;Git_GitHub Briefer Course&quot;&gt;&lt;/a&gt;Git_GitHub 
      
    
    </summary>
    
      <category term="Git" scheme="https://ojerk.cn/categories/Git/"/>
    
    
      <category term="Git" scheme="https://ojerk.cn/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Python里包、库、模块的区别</title>
    <link href="https://ojerk.cn/Python%E9%87%8C%E5%BA%93%E3%80%81%E5%8C%85%E3%80%81%E6%A8%A1%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <id>https://ojerk.cn/Python里库、包、模块的区别/</id>
    <published>2018-07-27T01:59:41.000Z</published>
    <updated>2018-10-19T01:04:28.497Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python里包、库、模块的区别"><a href="#Python里包、库、模块的区别" class="headerlink" title="Python里包、库、模块的区别"></a>Python里包、库、模块的区别</h1><h2 id="包-package"><a href="#包-package" class="headerlink" title="包(package)"></a>包(package)</h2><p>包是一个有层次的文件目录结构，它定义了由n个模块或n个子包组成的python应用程序执行环境</p><p>通俗一点：包是一个包含<strong>init</strong>.py 文件的目录，该目录下一定得有这个<strong>init</strong>.py文件和其它模块或子包</p><h2 id="库-lib"><a href="#库-lib" class="headerlink" title="库(lib)"></a>库(lib)</h2><p>参考其它编程语言的说法，就是指python中的完成一定功能的代码集合，供用户使用的代码组合,在python中是包和模块的形式</p><h2 id="模块-module"><a href="#模块-module" class="headerlink" title="模块(module)"></a>模块(module)</h2><p>自我包含并且有组织的代码片段为模块。可以理解为module，一个 <strong>.py</strong> 文件就是个 module</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python里包、库、模块的区别&quot;&gt;&lt;a href=&quot;#Python里包、库、模块的区别&quot; class=&quot;headerlink&quot; title=&quot;Python里包、库、模块的区别&quot;&gt;&lt;/a&gt;Python里包、库、模块的区别&lt;/h1&gt;&lt;h2 id=&quot;包-package
      
    
    </summary>
    
      <category term="Python" scheme="https://ojerk.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://ojerk.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python标准库之Unittest</title>
    <link href="https://ojerk.cn/Unittest/"/>
    <id>https://ojerk.cn/Unittest/</id>
    <published>2018-07-23T11:08:15.000Z</published>
    <updated>2019-12-05T13:51:55.739Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Python-UnitTest-Briefer-Course"><a href="#Python-UnitTest-Briefer-Course" class="headerlink" title="Python UnitTest Briefer Course"></a>Python UnitTest Briefer Course</h1><blockquote><p>梳理理念: WWH = What + Why + How</p></blockquote><h2 id="什么是UnitTest"><a href="#什么是UnitTest" class="headerlink" title="什么是UnitTest"></a>什么是UnitTest</h2><p>UnitTest是Python内部已有的一个单元测试模块,也叫pyUnit</p><blockquote><p><a href="https://baike.baidu.com/item/单元测试/1917084?fr=aladdin" target="_blank" rel="noopener">单元测试(猛击这里获取更多):</a>对软件中的最小可测试单元进行检查和验证</p></blockquote><blockquote><p><strong>作用</strong>:用于检验被测代码的一个很小的、很明确的功能是否正确</p></blockquote><h2 id="为什么需要单元测试"><a href="#为什么需要单元测试" class="headerlink" title="为什么需要单元测试"></a>为什么需要单元测试</h2><p>如果我们对某个函数/模块代码做了修改,只要通过简单的跑一遍单元测试,就能知道这次修改有没有对原有函数行为产生影响,这样就能确保一个程序模块的行为符合我们设计的测试用例,可以保证该函数/模块仍然是正确的</p><h2 id="怎么食用"><a href="#怎么食用" class="headerlink" title="怎么食用"></a>怎么食用</h2><p><a href="https://docs.python.org/3.6/library/unittest.html" target="_blank" rel="noopener">官方技术文档(猛击这里获取更多)</a></p><p><strong>理解下面4个重要概念</strong>(就能完成日常大部分测试需求)</p><blockquote><p>分别是 Test Fixture,Test Case,Test Suite,Test Runner</p></blockquote><h3 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h3><ul><li>TestCase: 测试用例,一个TestCase的实例就是一个完整的测试流程,包括测试前的准备(setUp),测试的执行(run),测试后的回调(tearDown),通过运行这个测试单元可以对某一个问题进行验证</li><li>TestSuite: 很多TestCase的整合,而且本身能嵌套</li><li>TextTestRunner: 执行测试用例</li><li>Test Fixture:对一个测试用例的搭建和销毁就是Test Fixture,换句话说就是重写TestCase里面setUp()和tearDown()方法就是一个Test Fixture</li></ul><p><strong>概念补充</strong>:</p><ul><li>TestLoader: 把TestCase加载到TestSuite中,返回一个TestSuite实例</li><li>TextTestResult: 测试结果会储存在这个实例里(包括测试了多少用例,成功、失败了多少等等信息)</li></ul><h4 id="食用方法"><a href="#食用方法" class="headerlink" title="食用方法"></a>食用方法</h4><ol><li>import unittest</li><li>定义一个继承自unittest.TestCase的测试用例类</li><li>定义setUp()和tearDown()方法，在每个测试用例前后做一些辅助工作</li><li>定义测试用例，名字必须以test开头  </li><li>一个测试用例应该只测试一个方面，测试目的和测试内容应很明确,主要是调用assertEqual、assertRaises等断言方法判断程序执行结果和预期值是否相符 </li><li>调用unittest.main()启动测试  </li><li>如果测试未通过，会输出相应的错误提示。如果测试全部通过则不显示任何东西</li></ol><h4 id="干货"><a href="#干货" class="headerlink" title="干货"></a>干货</h4><p><strong>一个简单测试实例的创建</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#首先导入unittest模块</span></span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test01</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line"><span class="string">'''定义一个继承自unittest.TestCase的测试用例类'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#定义setUp()和tearDown()方法</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">setUp</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例前执行'''</span></span><br><span class="line">    print(<span class="string">"Case Before"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tearDown</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例执行后'''</span></span><br><span class="line">    print(<span class="string">"Case After"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义测试用例，名字必须以test开头</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_case1</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例1'''</span></span><br><span class="line">    num_a = <span class="number">1</span></span><br><span class="line">    num_b = <span class="number">2</span></span><br><span class="line">    self.assertEqual(num_a+num_b, <span class="number">3</span>, <span class="string">'结果错误'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_case2</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例2'''</span></span><br><span class="line">    num_a = <span class="number">3</span></span><br><span class="line">    num_b = <span class="number">4</span></span><br><span class="line">    self.assertEqual(num_a*num_b, <span class="number">10</span>, <span class="string">'结果错误'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure><p><strong>Suite管理多个测试实例:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#首先导入unittest模块</span></span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test01</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line"><span class="string">'''定义一个继承自unittest.TestCase的测试用例类'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#定义setUp()和tearDown()方法</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">setUp</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例前执行'''</span></span><br><span class="line">    print(<span class="string">"Case Before"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tearDown</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例执行后'''</span></span><br><span class="line">    print(<span class="string">"Case After"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义测试用例，名字必须以test开头</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_case1</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例1'''</span></span><br><span class="line">    num_a = <span class="number">1</span></span><br><span class="line">    num_b = <span class="number">2</span></span><br><span class="line">    self.assertEqual(num_a+num_b, <span class="number">3</span>, <span class="string">'结果错误'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_case2</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例2'''</span></span><br><span class="line">    num_a = <span class="number">3</span></span><br><span class="line">    num_b = <span class="number">4</span></span><br><span class="line">    self.assertEqual(num_a*num_b, <span class="number">10</span>, <span class="string">'结果错误'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义一个测试集合(Suite),并添加测试实例(Case)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">suite</span><span class="params">()</span>:</span></span><br><span class="line"><span class="string">'''这是一个测试集合'''</span></span><br><span class="line">suite_test = unittest.TestSuite()</span><br><span class="line">suite_test.addTest(Test01(<span class="string">"test_case1"</span>))</span><br><span class="line">suite_test.addTest(Test01(<span class="string">"test_case2"</span>))</span><br><span class="line"><span class="keyword">return</span> suite_test</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">RUNNER = unittest.TextTestRunner()</span><br><span class="line">RUNNER.run(suite())</span><br><span class="line"></span><br><span class="line"><span class="comment">#if __name__ == "__main__":</span></span><br><span class="line"><span class="comment">#   unittest.main(defaultTest='suite')</span></span><br></pre></td></tr></table></figure><p><strong>Suite分组管理:</strong></p><p>文件目录:</p><p><img src="https://github.com/Easy318/MyPicture/blob/master/VS%20Code/%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95.png?raw=true" alt="图片"></p><p><em>Case模块</em>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#首先导入unittest模块</span></span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test01</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line"><span class="string">'''定义一个继承自unittest.TestCase的测试用例类'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#定义setUp()和tearDown()方法</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">setUp</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例前执行'''</span></span><br><span class="line">    print(<span class="string">"Case Before"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tearDown</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例执行后'''</span></span><br><span class="line">    print(<span class="string">"Case After"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义测试用例，名字必须以test开头</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_case1</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例1'''</span></span><br><span class="line">    print(<span class="string">"test_case1"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_case2</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例2'''</span></span><br><span class="line">    print(<span class="string">"test_case2"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_case3</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例3'''</span></span><br><span class="line">    print(<span class="string">"test_case3"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_case4</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">'''测试用例4'''</span></span><br><span class="line">    print(<span class="string">"test_case4"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure><p><em>suite模块</em>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#首先导入unittest模块</span></span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> cases_data <span class="keyword">import</span> Test01</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义测试集合(Suite),并添加测试实例(Case)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#第一类测试集合</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">suite1</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''这是一个测试集合'''</span></span><br><span class="line">    suite_test = unittest.TestSuite()</span><br><span class="line">    suite_test.addTest(Test01(<span class="string">"test_case1"</span>))</span><br><span class="line">    suite_test.addTest(Test01(<span class="string">"test_case2"</span>))</span><br><span class="line">    <span class="keyword">return</span> suite_test</span><br><span class="line"></span><br><span class="line"><span class="comment">#第二类测试集合</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">suite2</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''这是一个测试集合'''</span></span><br><span class="line">    suite_test = unittest.TestSuite()</span><br><span class="line">    suite_test.addTest(Test01(<span class="string">"test_case3"</span>))</span><br><span class="line">    suite_test.addTest(Test01(<span class="string">"test_case4"</span>))</span><br><span class="line">    <span class="keyword">return</span> suite_test</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义一个管理所有测试集合的集合</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">all_suite</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''集合的集合'''</span></span><br><span class="line">    all_test = unittest.TestSuite((suite1(), suite2()))</span><br><span class="line">    <span class="keyword">return</span> all_test</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动总测试集合</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    RUNNER = unittest.TextTestRunner()</span><br><span class="line">    RUNNER.run(all_suite())</span><br></pre></td></tr></table></figure><p><em>所有测试开始前只执行一次总配置,结束时也一样</em>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">#首先导入unittest模块</span></span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test01</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line">    <span class="string">'''定义一个继承自unittest.TestCase的测试用例类'''</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setUpClass</span><span class="params">(cls)</span>:</span></span><br><span class="line">        print(<span class="string">"all test only one sets"</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tearDownClass</span><span class="params">(cls)</span>:</span></span><br><span class="line">        print(<span class="string">'tearDownClass'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_01</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"This is a testcase.."</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Python-UnitTest-Briefer-Course&quot;&gt;&lt;a href=&quot;#Python-UnitTest-Briefer-Course&quot; class=&quot;headerlink&quot; title=&quot;Python UnitTest Briefer Course&quot;&gt;
      
    
    </summary>
    
      <category term="Python" scheme="https://ojerk.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://ojerk.cn/tags/Python/"/>
    
  </entry>
  
</feed>
